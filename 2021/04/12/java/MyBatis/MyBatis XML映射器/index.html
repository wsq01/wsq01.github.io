<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>MyBatis 映射器 |  学海无涯</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?b1b5dee3bb1719c8a439f8070118dc80";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <!-- <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script> -->
      <link href="https://cdn.bootcdn.net/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.css" rel="stylesheet">
      <script src="https://cdn.bootcdn.net/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-java/MyBatis/MyBatis XML映射器"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  MyBatis 映射器
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/04/12/java/MyBatis/MyBatis%20XML%E6%98%A0%E5%B0%84%E5%99%A8/" class="article-date">
  <time datetime="2021-04-12T07:56:16.000Z" itemprop="datePublished">2021-04-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/MyBatis/">MyBatis</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">9k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">37 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <p>映射器文件中包含一组 SQL 语句（例如查询、添加、删除、修改），这些语句称为映射语句或映射 SQL 语句。</p>
<p>映射器由 Java 接口和 XML 文件（或注解）共同组成，它的作用如下：</p>
<ul>
<li>定义参数类型</li>
<li>配置缓存</li>
<li>提供 SQL 语句和动态 SQL</li>
<li>定义查询结果和 POJO 的映射关系</li>
</ul>
<p>映射器有两种实现方式：</p>
<ul>
<li>通过 XML 文件方式实现，比如在<code>mybatis-config.xml</code>文件中描述的 XML 文件，用来生成<code>mapper</code>。</li>
<li>通过注解的方式实现，使用<code>Configuration</code>对象注册<code>Mapper</code>接口。</li>
</ul>
<p>如果 SQL 语句存在动态 SQL 或者比较复杂，使用注解写在 Java 文件里可读性差，且增加了维护的成本。所以一般建议使用 XML 文件配置的方式，避免重复编写 SQL 语句。</p>
<h1 id="XML实现映射器"><a href="#XML实现映射器" class="headerlink" title="XML实现映射器"></a>XML实现映射器</h1><p>XML 定义映射器分为两个部分：接口和 XML。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> net.biancheng.mapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> net.biancheng.po.Website;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">WebsiteMapper</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> List&lt;Website&gt; <span class="title function_">selectAllWebsite</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- WebsiteMapper.xml --&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;net.biancheng.mapper.WebsiteMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllWebsite&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span>&gt;</span></span><br><span class="line">    select * from website</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>namespace</code>用来定义命名空间，该命名空间和定义接口的全限定名一致。</li>
<li><code>&lt;select&gt;</code>元素表明这是一条查询语句，属性<code>id</code>用来标识这条 SQL。<code>resultType</code>表示返回的是一个<code>Website</code>类型的值。</li>
</ul>
<p>在 MyBatis 配置文件中添加以下代码。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;net/biancheng/mapper/WebsiteMapper.xml&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>该语句用来引入 XML 文件，MyBatis 会读取<code>WebsiteMapper.xml</code>文件，生成映射器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">config</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(config);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">ss</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line">    <span class="type">WebsiteMapper</span> <span class="variable">websiteMapper</span> <span class="operator">=</span> ss.getMapper(WebsiteMapper.class);</span><br><span class="line">    List&lt;Website&gt; websitelist = websiteMapper.selectAllWebsite();</span><br><span class="line">    <span class="keyword">for</span> (Website site : websitelist) &#123;</span><br><span class="line">      System.out.println(site);</span><br><span class="line">    &#125;</span><br><span class="line">    ss.commit();</span><br><span class="line">    ss.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="注解实现映射器"><a href="#注解实现映射器" class="headerlink" title="注解实现映射器"></a>注解实现映射器</h1><p>使用注解的方式实现映射器，只需要在接口中使用 Java 注解，注入 SQL 即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> net.biancheng.mapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> net.biancheng.po.Website;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">WebsiteMapper2</span> &#123;</span><br><span class="line">  <span class="meta">@Select(value = &quot;select * from website&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> List&lt;Website&gt; <span class="title function_">selectAllWebsite</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果使用注解和 XML 文件两种方式同时定义，那么 XML 方式将覆盖掉注解方式。</p>
</blockquote>
<p>虽然这里注解的方式看起来比 XML 简单，但是现实中我们遇到的 SQL 会复杂得多。如果 SQL 语句中有多个表的关联、多个查询条件、级联、条件分支等，显然这条 SQL 就会复杂的多，所以并不建议使用这种方式。</p>
<p>此外，XML 可以相互引入，而注解是不可以的，所以在一些比较复杂的场景下，使用 XML 方式会更加灵活和方便。因此大部分的企业都以 XML 为主，当然在一些简单的表和应用中使用注解方式也会比较简单。</p>
<p>这个接口可以在 XML 中定义，将在<code>mybatis-config.xml</code>中配置 XML 的语句修改为以下语句即可。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/mybatis/mapper/WebsiteMapper2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>也可以使用<code>configuration</code>对象注册这个接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configuration.addMapper(WebsiteMapper2.class);</span><br></pre></td></tr></table></figure>
<h1 id="映射器的主要元素"><a href="#映射器的主要元素" class="headerlink" title="映射器的主要元素"></a>映射器的主要元素</h1><table>
<thead>
<tr>
<th align="center">元素名称</th>
<th align="center">描述</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">mapper</td>
<td align="center">映射文件的根节点，只有 namescape 一个属性</td>
<td align="center">namescape 作用如下：<br>1.用于区分不同的 mapper，全局唯一<br>2.绑定DAO接口，即面向接口编程。当 namescape 绑定某一接口后，可以不用写该接口的实现类，MyBatis 会通过接口的完整限定名查找到对应的 mapper 配置来执行 SQL 语句。因此 namescape 的命名必须要跟接口同名。</td>
</tr>
<tr>
<td align="center">select</td>
<td align="center">查询语句</td>
<td align="center">可以自定义参数，返回结果集等</td>
</tr>
<tr>
<td align="center">insert</td>
<td align="center">插入语句</td>
<td align="center">执行后返回一个整数，代表插入的条数</td>
</tr>
<tr>
<td align="center">update</td>
<td align="center">更新语句</td>
<td align="center">执行后返回一个整数，代表更新的条数</td>
</tr>
<tr>
<td align="center">delete</td>
<td align="center">删除语句</td>
<td align="center">执行后返回一个整数，代表删除的条数</td>
</tr>
<tr>
<td align="center">parameterMap</td>
<td align="center">定义参数映射关系</td>
<td align="center">即将被删除的元素，不建议使用</td>
</tr>
<tr>
<td align="center">sql</td>
<td align="center">允许定义一部分的 SQL，然后在各个地方引用它</td>
<td align="center">例如，一张表列名，我们可以一次定义，在多个 SQL 语句中使用</td>
</tr>
<tr>
<td align="center">resultMap</td>
<td align="center">用来描述数据库结果集与对象的对应关系，它是最复杂、最强大的元素</td>
<td align="center">提供映射规则</td>
</tr>
<tr>
<td align="center">cache</td>
<td align="center">配置给定命名空间的缓存</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">cache-ref</td>
<td align="center">其它命名空间缓存配置的引用</td>
<td align="center"></td>
</tr>
</tbody></table>
<p>SQL 映射文件中的<code>mapper</code>元素的<code>namescape</code>属性有如下要求。</p>
<ul>
<li><code>namescape</code>的命名必须跟某个 DAO 接口同名，同属于 DAO 层，因此代码结构上，映射文件与该接口应放置在同一<code>package</code>下（如<code>net.biancheng.dao.website</code>），并且习惯上是以<code>Mapper</code>结尾（如 <code>WebsiteMapper.java、WebsiteMapper.xml</code>）。</li>
<li>不同的<code>mapper</code>文件中子元素的<code>id</code>可以相同，MyBatis 通过<code>namescape</code>和子元素的<code>id</code>联合区分。接口中的方法与映射文件中的 SQL 语句<code>id</code>应一一对应。</li>
</ul>
<h2 id="select-标签"><a href="#select-标签" class="headerlink" title="select 标签"></a>select 标签</h2><p>在 SQL 映射文件中<code>&lt;select&gt;</code>标签用于映射 SQL 的<code>select</code>语句。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllWebsite&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;string&quot;</span>&gt;</span></span><br><span class="line">  SELECT id,NAME,url FROM website WHERE NAME LIKE CONCAT (&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上是一个<code>id</code>为<code>selectAllWebsite</code>的映射语句，参数类型为<code>string</code>，返回结果类型为<code>Website</code>。</p>
<p>执行 SQL 语句时可以定义参数，参数可以是一个简单的参数类型，例如<code>int、float、String</code>；也可以是一个复杂的参数类型，例如<code>JavaBean、Map</code>等。MyBatis 提供了强大的映射规则，执行 SQL 后，MyBatis 会将结果集自动映射到<code>JavaBean</code>中。</p>
<blockquote>
<p>为了使数据库的查询结果和返回值类型中的属性能够自动匹配，通常会对 MySQL 数据库和JavaBean采用同一套命名规则，即 Java 命名驼峰规则，这样就不需要再做映射了（数据库表字段名和属性名不一致时需要手动映射）。</p>
</blockquote>
<p>参数的传递使用<code>#&#123;参数名&#125;</code>，相当于告诉 MyBatis 生成<code>PreparedStatement</code>参数。对于 JDBC，该参数会被标识为<code>?</code>。以上 SQL 语句可以使用 JDBC 实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id,NAME,url FROM website WHERE NAME LIKE CONCAT (&#x27;%&#x27;,?,&#x27;%&#x27;)&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">ps.setString(<span class="number">1</span>,userName);</span><br></pre></td></tr></table></figure>
<h3 id="select-标签常用属性"><a href="#select-标签常用属性" class="headerlink" title="select 标签常用属性"></a>select 标签常用属性</h3><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id</td>
<td align="center">在命名空间中唯一的标识符，可以被用来引用这条语句。</td>
</tr>
<tr>
<td align="center">parameterType</td>
<td align="center">将会传入这条语句的参数的类全限定名或别名。这个属性是可选的，因为 MyBatis 可以通过类型处理器（TypeHandler）推断出具体传入语句的参数，默认值为未设置（unset）。</td>
</tr>
<tr>
<td align="center">resultType</td>
<td align="center">期望从这条语句中返回结果的类全限定名或别名。 注意，如果返回的是集合，那应该设置为集合包含的类型，而不是集合本身的类型。 resultType 和 resultMap 之间只能同时使用一个。</td>
</tr>
<tr>
<td align="center">resultMap</td>
<td align="center">对外部 resultMap 的命名引用。resultType 和 resultMap 之间只能同时使用一个。</td>
</tr>
<tr>
<td align="center">flushCache</td>
<td align="center">将其设置为 true 后，只要语句被调用，都会导致本地缓存和二级缓存被清空，默认值：false。</td>
</tr>
<tr>
<td align="center">useCache</td>
<td align="center">将其设置为 true 后，将会导致本条语句的结果被二级缓存缓存起来，默认值：对 select 元素为 true。</td>
</tr>
<tr>
<td align="center">timeout</td>
<td align="center">这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为未设置（unset）（依赖数据库驱动）。</td>
</tr>
<tr>
<td align="center">fetchSize</td>
<td align="center">这是一个给驱动的建议值，尝试让驱动程序每次批量返回的结果行数等于这个设置值。 默认值为未设置（unset）（依赖驱动）。</td>
</tr>
<tr>
<td align="center">statementType</td>
<td align="center">可选 STATEMENT，PREPARED 或 CALLABLE。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。</td>
</tr>
<tr>
<td align="center">resultSetType</td>
<td align="center">FORWARD_ONLY，SCROLL_SENSITIVE, SCROLL_INSENSITIVE 或 DEFAULT（等价于 unset） 中的一个，默认值为 unset （依赖数据库驱动）。</td>
</tr>
<tr>
<td align="center">databaseId</td>
<td align="center">如果配置了数据库厂商标识（databaseIdProvider），MyBatis 会加载所有不带 databaseId 或匹配当前 databaseId 的语句；如果带和不带的语句都有，则不带的会被忽略。</td>
</tr>
<tr>
<td align="center">resultOrdered</td>
<td align="center">这个设置仅针对嵌套结果 select 语句：如果为 true，将会假设包含了嵌套结果集或是分组，当返回一个主结果行时，就不会产生对前面结果集的引用。 这就使得在获取嵌套结果集的时候不至于内存不够用。默认值：false。</td>
</tr>
<tr>
<td align="center">resultSets</td>
<td align="center">这个设置仅适用于多结果集的情况。它将列出语句执行后返回的结果集并赋予每个结果集一个名称，多个名称之间以逗号分隔。</td>
</tr>
</tbody></table>
<h3 id="传递多个参数"><a href="#传递多个参数" class="headerlink" title="传递多个参数"></a>传递多个参数</h3><p>现在需要根据<code>id</code>和<code>name</code>来模糊查询网站信息，显然这涉及到了两个参数。给映射器传递多个参数分为以下三种方法。</p>
<ul>
<li>使用<code>Map</code>传递参数</li>
<li>使用注解传递参数</li>
<li>使用<code>JavaBean</code>传递参数</li>
</ul>
<h4 id="使用-Map-传递参数"><a href="#使用-Map-传递参数" class="headerlink" title="使用 Map 传递参数"></a>使用 Map 传递参数</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据name和url模糊查询网站信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectWebsiteByMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  SELECT id,NAME,url FROM website</span><br><span class="line">  WHERE name LIKE CONCAT (&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">  AND url LIKE CONCAT (&#x27;%&#x27;,#&#123;url&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>WebsiteMapper</code>接口中，方法如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Website&gt; <span class="title function_">selectWebsiteByMap</span><span class="params">(Map&lt;String, String&gt; params)</span>;</span><br></pre></td></tr></table></figure>
<p>测试代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,String&gt; paramsMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,String&gt;();</span><br><span class="line">paramsMap.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;编程&quot;</span>);</span><br><span class="line">paramsMap.put(<span class="string">&quot;url&quot;</span>,<span class="string">&quot;biancheng&quot;</span>);</span><br><span class="line">websiteMapper.selectWebsiteByMap(paramsMap);</span><br></pre></td></tr></table></figure>
<p>使用<code>Map</code>传递参数虽然简单易用，但是由于这样设置参数需要键值对应，业务关联性不强，需要深入到程序中看代码，造成可读性下降。</p>
<h4 id="使用注解传递参数"><a href="#使用注解传递参数" class="headerlink" title="使用注解传递参数"></a>使用注解传递参数</h4><p>使用 MyBatis 的注解<code>@Param()</code>传递参数。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据name和url模糊查询网站信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectWebsiteByAn&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span>&gt;</span></span><br><span class="line">  SELECT id,NAME,url FROM website</span><br><span class="line">  WHERE name LIKE CONCAT (&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">  AND url LIKE CONCAT (&#x27;%&#x27;,#&#123;url&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>WebsiteMapper</code>接口中方法如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Website&gt; <span class="title function_">selectWebsiteByAn</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;url&quot;)</span> String url)</span>;</span><br></pre></td></tr></table></figure>
<p>当我们把参数传递给后台时，MyBatis 通过<code>@Param</code>提供的名称就会知道<code>#&#123;name&#125;</code>代表<code>name</code>参数，提高了参数可读性。但是如果这条 SQL 拥有 10 个参数的查询，就会造成可读性下降，增强了代码复杂性。</p>
<h4 id="使用JavaBean传递参数"><a href="#使用JavaBean传递参数" class="headerlink" title="使用JavaBean传递参数"></a>使用JavaBean传递参数</h4><p>在参数过多的情况下，MyBatis 允许组织一个<code>JavaBean</code>，通过简单的<code>setter</code>和<code>getter</code>方法设置参数，提高可读性。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据name和url模糊查询网站信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectWebsiteByAn&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span>&gt;</span></span><br><span class="line">  SELECT id,NAME,url FROM website</span><br><span class="line">  WHERE name LIKE CONCAT (&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">  AND url LIKE CONCAT (&#x27;%&#x27;,#&#123;url&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>WebsiteMapper</code>接口中方法如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;Website&gt; selectWebsiteByAn(Website website);</span><br></pre></td></tr></table></figure>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><p>以上 3 种方式的区别如下。</p>
<ul>
<li>使用<code>Map</code>传递参数会导致业务可读性的丧失，继而导致后续扩展和维护的困难，所以在实际应用中我们应该果断废弃该方式。</li>
<li>使用<code>@Param</code>注解传递参数会受到参数个数的影响。当<code>n≤5</code>时，它是最佳的传参方式，因为它更加直观；当<code>n&gt;5</code>时，多个参数将给调用带来困难。</li>
<li>当参数个数大于 5 个时，建议使用<code>JavaBean</code>方式。</li>
</ul>
<h2 id="insert-标签"><a href="#insert-标签" class="headerlink" title="insert 标签"></a>insert 标签</h2><p><code>insert</code>标签用来定义插入语句，执行插入操作。当 MyBatis 执行完一条插入语句后，就会返回其影响数据库的行数。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- WebsiteMapper.xml --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 增加网站信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addWebsite&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;string&quot;</span>&gt;</span></span><br><span class="line">  insert into website(name) values(#&#123;name&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>WebsiteMapper</code>接口中定义一个<code>add()</code>方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addWebsite</span><span class="params">(String name)</span>;</span><br></pre></td></tr></table></figure>
<p>参数为<code>Sting</code>类型的字符串；返回值为<code>int</code>类型，即执行 SQL 后，插入记录的行数。</p>
<p>测试代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入 name 为编程帮4 的记录</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;baidu&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.addWebsite(name);</span><br><span class="line">System.out.println(<span class="string">&quot;共插入了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>执行测试代码，控制台输出如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">共插入了 1 条记录</span><br></pre></td></tr></table></figure>
<h3 id="insert-标签常用属性"><a href="#insert-标签常用属性" class="headerlink" title="insert 标签常用属性"></a>insert 标签常用属性</h3><table>
<thead>
<tr>
<th align="center">属性名称</th>
<th align="center">描述</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id</td>
<td align="center">它和 Mapper 的命名空间组合起来使用，是唯一标识符，供 MyBatis 调用</td>
<td align="center">如果命名空间+ id 不唯一，那么 MyBatis 抛出异常</td>
</tr>
<tr>
<td align="center">parameterType</td>
<td align="center">传入 SQL 语句的参数类型的全限定名或别名，它是一个可选属性。</td>
<td align="center">支持基本数据类型和 JavaBean、Map 等复杂数据类型</td>
</tr>
<tr>
<td align="center">keyProperty</td>
<td align="center">该属性的作用是将插入操作的返回值赋给 PO 类的某个属性，通常为主键对应的属性。如果是联合主键，可以将多个值用逗号隔开。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">useGeneratedKeys</td>
<td align="center">该属性用来设置，是否使用 JDBC 提供的 getGenereatedKeys() 方法，获取数据库内部产生的主键并赋值到 keyProperty 属性设置的请求对象的属性中，例如 MySQL、SQL Server 等自动递增的字段，其默认值为 false。</td>
<td align="center">该属性值设置为 true 后，会将数据库生成的主键回填到请求对象中，以供其他业务使用。</td>
</tr>
<tr>
<td align="center">flushCache</td>
<td align="center">该属性用于设置执行该操作后，是否会清空二级缓存和本地缓存，默认值为 true。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">timeout</td>
<td align="center">该属性用于设置执行该操作的最大时限，如果超时，就抛异常。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">databaseId</td>
<td align="center">取值范围 oracle、mysql 等，表示数据库厂家；元素内部可通过 <if test="_databaseId = 'oracle'"> 来为特定数据库指定不同的 sql 语句。	MyBatis 可以根据不同的数据库厂商执行不同的语句，这种多厂商的支持是基于映射语句中的 databaseId 属性。 MyBatis 会加载不带 databaseId 属性和带有匹配当前数据库 databaseId 属性的所有语句。 如果同时找到带有 databaseId 和不带 databaseId 的相同语句，则后者会被舍弃。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">keyColumn</td>
<td align="center">该属性用于设置第几列是主键，当主键列不是表中的第 1 列时，就需要设置该属性。如果是联合主键，可以将多个值用逗号隔开。</td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p><code>insert</code>标签中没有<code>resultType</code>属性，只有查询操作才需要对返回结果类型进行相应的指定。</p>
</blockquote>
<h3 id="传递多个参数-1"><a href="#传递多个参数-1" class="headerlink" title="传递多个参数"></a>传递多个参数</h3><p>Mybatis 为我们提供以下 3 种方式，来实现给映射器传递多个参数：</p>
<ul>
<li>使用<code>Map</code>传递参数</li>
<li>使用注解传递参数</li>
<li>使用<code>JavaBean</code>传递参数</li>
</ul>
<h4 id="使用-Map-传递参数-1"><a href="#使用-Map-传递参数-1" class="headerlink" title="使用 Map 传递参数"></a>使用 Map 传递参数</h4><p>我们可以将参数封装到一个<code>Map</code>对象中，然后传递给 MyBatis 的映射器。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>addWebsiteByMap()</code>方法，并使用<code>Map</code>传递参数。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int addWebsiteByMap(Map&lt;String, String&gt; params);</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中，使用<code>insert</code>标签定义一条插入语句，并接收通过<code>Map</code>传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--接收 Map 参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addWebsiteByMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  insert into Website (name, url) values (#&#123;name&#125;, #&#123;url&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">params.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">params.put(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.addWebsiteByMap(params);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 Map 成功向数据库中添加了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 Map 成功向数据库中添加了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用注解传递参数-1"><a href="#使用注解传递参数-1" class="headerlink" title="使用注解传递参数"></a>使用注解传递参数</h4><p>我们还可以使用 MyBatis 提供的<code>@Param</code>注解给注解器传递参数。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>addWebsiteByParam()</code>方法，并使用<code>@Param</code>注解传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">addWebsiteByParam</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;url&quot;)</span> String url)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>insert</code>标签定义一条插入语句，并接收通过<code>@Param</code>注解传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--接收 @Param 注解传递的参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addWebsiteByParam&quot;</span>&gt;</span></span><br><span class="line">  insert into Website (name, url)  values (#&#123;name&#125;, #&#123;url&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.addWebsiteByParam(<span class="string">&quot;baidu&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 @Param 注解成功向数据库中添加了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 @Param 注解成功向数据库中添加了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用-JavaBean-传递参数"><a href="#使用-JavaBean-传递参数" class="headerlink" title="使用 JavaBean 传递参数"></a>使用 JavaBean 传递参数</h4><p>在参数过多的情况下，我们可以将参数通过<code>setter</code>方法封装到<code>JavaBean</code>（实体类）对象中 ，传递给映射器。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中,定义一个<code>addWebsiteByJavaBean()</code>方法，并使用<code>JavaBean</code>传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">addWebsiteByJavaBean</span><span class="params">(Website website)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>insert</code>标签定义一条插入语句，并接收通过<code>JavaBean</code>传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--接收通过 JavaBean 传递的参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addWebsiteByJavaBean&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;net.biancheng.www.po.Website&quot;</span>&gt;</span></span><br><span class="line">  insert into Website (name, url) values (#&#123;name&#125;, #&#123;url&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建 JavaBean 对象</span></span><br><span class="line"><span class="type">Website</span> <span class="variable">website</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Website</span>();</span><br><span class="line"><span class="comment">//通过 setter 方法将参数封装</span></span><br><span class="line">website.setName(<span class="string">&quot;编程帮 JavaBean&quot;</span>);</span><br><span class="line">website.setUrl(<span class="string">&quot;www.biancheng.net&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.addWebsiteByJavaBean(website);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 JavaBean 成功向数据库中添加了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 JavaBean 成功向数据库中添加了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="区别-1"><a href="#区别-1" class="headerlink" title="区别"></a>区别</h4><p>以上 3 种方式的区别如下：</p>
<ul>
<li>使用<code>Map</code>传递参数会导致业务可读性的丧失，继而导致后续扩展和维护的困难，所以在实际应用中我们应该果断废弃该方式。</li>
<li>使用<code>@Param</code>注解传递参数会受到参数个数的影响。当<code>n≤5</code>时，它是最佳的传参方式，因为它更加直观；当<code>n&gt;5</code>时，多个参数将给调用带来困难。</li>
<li>当参数个数大于 5 个时，建议使用<code>JavaBean</code>方式。</li>
</ul>
<h3 id="主键（自动递增）回填"><a href="#主键（自动递增）回填" class="headerlink" title="主键（自动递增）回填"></a>主键（自动递增）回填</h3><p>MySQL、SQL Server 等数据库表可以采用自动递增的字段作为其主键，当向这样的数据库表插入数据时，即使不指定自增主键的值，数据库也会根据自增规则自动生成主键并插入到表中。</p>
<p>一些特殊情况下，我们可能需要将这个刚刚生成的主键回填到请求对象（原本不包含主键信息的请求对象）中，供其他业务使用。此时，我们就可以通过在<code>insert</code>标签中添加<code>keyProperty</code>和<code>useGeneratedKeys</code>属性，来实现该功能。</p>
<ol>
<li>为<code>WebsiteMapper.xml</code>中<code>id</code>为<code>addWebsite</code>的<code>insert</code>标签添加<code>keyProperty</code>和<code>useGeneratedKeys</code>属性：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--添加一个网站信息，成功后将主键值返回填给id(po的属性)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addWebsite&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  insert into Website (name,url) values(#&#123;name&#125;,#&#123;url&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加一个网站信息</span></span><br><span class="line"><span class="type">Website</span> <span class="variable">addsite</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Website</span>();</span><br><span class="line"><span class="comment">//插入的对象中不包含主键 id </span></span><br><span class="line">addsite.setName(<span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">addsite.setUrl(<span class="string">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class="line"><span class="comment">//执行插入</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> websiteMapper.addWebsite(addsite);</span><br><span class="line">System.out.println(<span class="string">&quot;添加了 &quot;</span> + num + <span class="string">&quot; 条记录&quot;</span>);</span><br><span class="line"><span class="comment">//获取回填的主键</span></span><br><span class="line">System.out.println(<span class="string">&quot;添加记录的主键是:&quot;</span> + addsite.getId());</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">添加了 1 条记录</span><br><span class="line">添加记录的主键是:3</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="自定义主键"><a href="#自定义主键" class="headerlink" title="自定义主键"></a>自定义主键</h3><p>如果在实际工程中使用的数据库不支持主键自动递增，或者取消了主键自动递增的规则，可以使用 MyBatis 的<code>&lt;selectKey&gt;</code>元素来自定义生成主键。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加一个网站，#&#123;name&#125;为 net.biancheng.po.Website 的属性值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertWebsite&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 先使用selectKey标签定义主键，然后再定义SQL语句 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span>&gt;</span></span><br><span class="line">    select if(max(id) is null,1,max(id)+1) as newId from Website</span><br><span class="line">  <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">  insert into Website (id,name,url) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;url&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;selectKey&gt;</code>标签中属性说明如下：</p>
<ul>
<li><code>keyProperty</code>：用于指定主键值对应的<code>PO</code>类的属性。</li>
<li><code>order</code>：该属性取值可以为<code>BEFORE</code>或<code>AFTER</code>。<code>BEFORE</code>表示先执行<code>&lt;selectKey&gt;</code>标签内的语句，再执行插入语句；<code>AFTER</code>表示先执行插入语句再执行<code>&lt;selectKey&gt;</code>标签内的语句。</li>
</ul>
<h2 id="update标签"><a href="#update标签" class="headerlink" title="update标签"></a>update标签</h2><p><code>update</code>标签用于定义更新语句，执行更新操作。当 MyBatis 执行完一条更新语句后，会返回一个整数，表示受影响的数据库记录的行数。</p>
<ol>
<li><p>在<code>WebsiteMapper.xml</code>中添加以下更新语句。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--update 标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateWebsite&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;string&quot;</span>&gt;</span></span><br><span class="line">    update website set name = #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在<code>WebsiteMapper</code>接口中增加一个<code>updateWebsite()</code>方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateWebsite</span><span class="params">(String name)</span>;</span><br></pre></td></tr></table></figure>
<p>参数为<code>String</code>类型的字符串；返回值为<code>int</code>类型，表示执行<code>sql</code>语句后受影响的记录的行数。</p>
</li>
<li><p>测试代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.updateWebsite(<span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;共更新了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>执行测试代码，控制台输出如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">共更新了 9 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="update-标签常用属性"><a href="#update-标签常用属性" class="headerlink" title="update 标签常用属性"></a>update 标签常用属性</h3><table>
<thead>
<tr>
<th align="center">属性名称</th>
<th align="center">描述</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id</td>
<td align="center">它和 Mapper 的命名空间组合起来使用，是唯一标识符，供 MyBatis 调用</td>
<td align="center">如果命名空间+ id 不唯一，那么 MyBatis 抛出异常</td>
</tr>
<tr>
<td align="center">parameterType</td>
<td align="center">传入 SQL 语句的参数类型的全限定名或别名，它是一个可选属性。</td>
<td align="center">支持基本数据类型和 JavaBean、Map 等复杂数据类型</td>
</tr>
<tr>
<td align="center">flushCache</td>
<td align="center">该属性用于设置执行该操作后，是否会清空二级缓存和本地缓存，默认值为 true。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">timeout</td>
<td align="center">该属性用于设置 SQL 执行的超时时间，如果超时，就抛异常。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">statementType</td>
<td align="center">执行 SQL 时使用的 statement 类型, 默认为 PREPARED，可选值：STATEMENT，PREPARED 和 CALLABLE。</td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p><code>update</code>标签中没有<code>resultType</code>属性，只有查询操作才需要对返回结果类型进行相应的指定。</p>
</blockquote>
<h3 id="传递多个参数-2"><a href="#传递多个参数-2" class="headerlink" title="传递多个参数"></a>传递多个参数</h3><p>Mybatis 为我们提供以下 3 种方式，来实现给映射器传递多个参数：</p>
<ul>
<li>使用<code>Map</code>传递参数</li>
<li>使用注解传递参数</li>
<li>使用<code>JavaBean</code>传递参数</li>
</ul>
<h4 id="使用-Map-传递参数-2"><a href="#使用-Map-传递参数-2" class="headerlink" title="使用 Map 传递参数"></a>使用 Map 传递参数</h4><p>我们可以将参数封装到一个<code>Map</code>对象中，然后传递给 MyBatis 的映射器。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>updateWebsiteByMap()</code>方法，并使用<code>Map</code>传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateWebsiteByMap</span><span class="params">(Map&lt;String, Object&gt; params)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>使用<code>update</code>标签定义一个<code>update</code>语句，并接收通过<code>Map</code>传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--更新语句接收 Map 传递的参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateWebsiteByMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  update website set name = #&#123;name&#125;,url= #&#123;url&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 Map 向 update 标签传递参数</span></span><br><span class="line">Map&lt;String, Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">params.put(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>);</span><br><span class="line">params.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">params.put(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.updateWebsiteByMap(params);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 Map 传递参数，共更新了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 Map 传递参数，共更新了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用注解传递参数-2"><a href="#使用注解传递参数-2" class="headerlink" title="使用注解传递参数"></a>使用注解传递参数</h4><p>我们还可以使用 MyBatis 提供的<code>@Param</code>注解给注解器传递参数。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>updateWebsiteByParam()</code>方法，并使用<code>@Param</code>注解传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateWebsiteByParam</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;url&quot;)</span> String url, <span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>update</code>标签定义一个<code>update</code>语句，并接收通过<code>@Param</code>注解传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--更新语句接收 @Param 注解传递的参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateWebsiteByParam&quot;</span>&gt;</span></span><br><span class="line">  update website set name = #&#123;name&#125;,url= #&#123;url&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用@Param 注解传递参数到更新语句中</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;编程帮2&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;www.biancheng.net&quot;</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.updateWebsiteByParam(name, url, id);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 @Param 注解传递参数，共更新了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 @Param 注解传递参数，共更新了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用-JavaBean-传递参数-1"><a href="#使用-JavaBean-传递参数-1" class="headerlink" title="使用 JavaBean 传递参数"></a>使用 JavaBean 传递参数</h4><p>在参数过多的情况下，我们还可以将参数通过<code>setter</code>方法封装到<code>JavaBean</code>（实体类）对象中传递给映射器。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>updateWebsiteByJavaBean()</code>方法，并使用<code>JavaBean</code>传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateWebsiteByJavaBean</span><span class="params">(Website website)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>update</code>标签定义一个<code>update</code>语句，并接收通过<code>JavaBean</code>传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--更新语句接收 JavaBean 传递的参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateWebsiteByJavaBean&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;net.biancheng.www.po.Website&quot;</span>&gt;</span></span><br><span class="line">  update website set name = #&#123;name&#125;,url= #&#123;url&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 JavaBean 传递参数到更新语句中</span></span><br><span class="line"><span class="type">Website</span> <span class="variable">website</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Website</span>();</span><br><span class="line">website.setName(<span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">website.setUrl(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">website.setId(<span class="number">3</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.updateWebsiteByJavaBean(website);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 JavaBean 传递参数，共更新了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 JavaBean 传递参数，共更新了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="区别-2"><a href="#区别-2" class="headerlink" title="区别"></a>区别</h4><p>以上 3 种方式的区别如下：</p>
<ul>
<li>使用<code>Map</code>传递参数会导致业务可读性的丧失，继而导致后续扩展和维护的困难，所以在实际应用中我们应该果断废弃该方式。</li>
<li>使用<code>@Param</code>注解传递参数会受到参数个数的影响。当<code>n≤5</code>时，它是最佳的传参方式，因为它更加直观；当<code>n&gt;5</code>时，多个参数将给调用带来困难。</li>
<li>当参数个数大于 5 个时，建议使用<code>JavaBean</code>方式。</li>
</ul>
<h2 id="delete标签"><a href="#delete标签" class="headerlink" title="delete标签"></a>delete标签</h2><p><code>delete</code>标签用于定义<code>delete</code>语句，执行删除操作。当 MyBatis 执行完一条更新语句后，会返回一个整数，表示受影响的数据库记录的行数。</p>
<ol>
<li>在<code>WebsiteMapper.xml</code>中使用<code>delete</code>标签添加一条<code>delete</code>语句。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteWebsite&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;string&quot;</span>&gt;</span></span><br><span class="line">  delete from website where name = #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper</code>接口中增加一个<code>deleteWebsite()</code>方法。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteWebsite</span><span class="params">(String name)</span>;</span><br></pre></td></tr></table></figure>
参数为<code>String</code>类型的字符串；返回值为<code>int</code>类型，表示执行<code>sql</code>语句后，被删除记录的行数。</li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除 name 为编程帮3 的记录</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;编程帮3&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.deleteWebsite(name);</span><br><span class="line">System.out.println(<span class="string">&quot;共删除了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">共删除了 3 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="delete-标签常用属性"><a href="#delete-标签常用属性" class="headerlink" title="delete 标签常用属性"></a>delete 标签常用属性</h3><table>
<thead>
<tr>
<th align="center">属性名称</th>
<th align="center">描述</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id</td>
<td align="center">它和 Mapper 的命名空间组合起来使用，是唯一标识符，供 MyBatis 调用</td>
<td align="center">如果命名空间+ id 不唯一，那么 MyBatis 抛出异常</td>
</tr>
<tr>
<td align="center">parameterType</td>
<td align="center">传入 SQL 语句的参数类型的全限定名或别名，它是一个可选属性。</td>
<td align="center">支持基本数据类型和 JavaBean、Map 等复杂数据类型</td>
</tr>
<tr>
<td align="center">flushCache</td>
<td align="center">该属性用于设置执行该操作后，是否会清空二级缓存和本地缓存，默认值为 true。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">timeout</td>
<td align="center">该属性用于设置 SQL 执行的超时时间，如果超时，就抛异常。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">statementType</td>
<td align="center">执行 SQL 时使用的 statement 类型, 默认为 PREPARED，可选值：STATEMENT，PREPARED 和 CALLABLE。</td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p><code>delete</code>标签中没有<code>resultType</code>属性，只有查询操作才需要对返回结果类型进行相应的指定。</p>
</blockquote>
<h3 id="传递多个参数-3"><a href="#传递多个参数-3" class="headerlink" title="传递多个参数"></a>传递多个参数</h3><p>Mybatis 为我们提供以下 3 种方式，来实现给映射器传递多个参数：</p>
<ul>
<li>使用<code>Map</code>传递参数</li>
<li>使用注解传递参数</li>
<li>使用<code>JavaBean</code>传递参数</li>
</ul>
<h4 id="使用-Map-传递参数-3"><a href="#使用-Map-传递参数-3" class="headerlink" title="使用 Map 传递参数"></a>使用 Map 传递参数</h4><p>我们可以将参数封装到一个<code>Map</code>对象中，然后传递给 MyBatis 的映射器。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>deleteWebsiteByMap()</code>方法，并使用<code>Map</code>传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteWebsiteByMap</span><span class="params">(Map&lt;String, Object&gt; params)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>delete</code>标签定义一个<code>delete</code>语句，并接收通过<code>Map</code>传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通过 Map 传递参数，执行删除操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteWebsiteByMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  delete from website where name = #&#123;name&#125; and url = #&#123;url&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 Map 向 delete 标签传递参数</span></span><br><span class="line">Map&lt;String, Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">params.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">params.put(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.deleteWebsiteByMap(params);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 Map 传递参数，共删除了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 Map 传递参数，共删除了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用注解传递参数-3"><a href="#使用注解传递参数-3" class="headerlink" title="使用注解传递参数"></a>使用注解传递参数</h4><p>我们还可以使用 MyBatis 提供的<code>@Param</code>注解给注解器传递参数。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中，定义一个<code>deleteWebsiteByParam()</code>方法，并使用<code>@Param</code>注解传递参数。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteWebsiteByParam</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;url&quot;)</span> String url)</span>;</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>delete</code>标签定义一个<code>delete</code>语句，并接收通过<code>@Param</code>注解传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通过 @Param 注解传递参数，执行删除操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteWebsiteByParam&quot;</span>&gt;</span></span><br><span class="line">    delete from website where name = #&#123;name&#125; and url = #&#123;url&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 @Param 注解传递参数</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;baidu&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;www.baidu.com&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.deleteWebsiteByParam(name, url);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 @Param 注解传递参数，共删除了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 @Param 注解传递参数，共删除了 1 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用-JavaBean-传递参数-2"><a href="#使用-JavaBean-传递参数-2" class="headerlink" title="使用 JavaBean 传递参数"></a>使用 JavaBean 传递参数</h4><p>在参数过多的情况下，我们还可以将参数通过<code>setter</code>方法封装到<code>JavaBean</code>（实体类）对象中传递给映射器。</p>
<ol>
<li>在<code>WebsiteMapper</code>接口中,定义一个<code>deleteWebsiteByJavaBean()</code>方法，并使用<code>JavaBean</code>传递参数。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int deleteWebsiteByJavaBean(Website website);</span><br></pre></td></tr></table></figure></li>
<li>在<code>WebsiteMapper.xml</code>中使用<code>delete</code>标签定义一个<code>delete</code>语句，并接收通过<code>JavaBean</code>传递的参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通过 JavaBean 传递参数，执行删除操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteWebsiteByJavaBean&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;net.biancheng.www.po.Website&quot;</span>&gt;</span></span><br><span class="line">  delete from website where name = #&#123;name&#125; and url = #&#123;url&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>测试代码如下。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 JavaBean 传递参数到更新语句中</span></span><br><span class="line"><span class="type">Website</span> <span class="variable">website</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Website</span>();</span><br><span class="line">website.setName(<span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">website.setUrl(<span class="string">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> websiteMapper.deleteWebsiteByJavaBean(website);</span><br><span class="line">System.out.println(<span class="string">&quot;通过 JavaBean 传递参数，共删除了 &quot;</span> + i + <span class="string">&quot; 条记录&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>执行测试代码，控制台输出如下。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过 JavaBean 传递参数，共删除了 3 条记录</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="区别-3"><a href="#区别-3" class="headerlink" title="区别"></a>区别</h4><p>以上 3 种方式的区别如下：</p>
<ul>
<li>使用<code>Map</code>传递参数会导致业务可读性的丧失，继而导致后续扩展和维护的困难，所以在实际应用中我们应该果断废弃该方式。</li>
<li>使用<code>@Param</code>注解传递参数会受到参数个数的影响。当<code>n≤5</code>时，它是最佳的传参方式，因为它更加直观；当<code>n&gt;5</code>时，多个参数将给调用带来困难。</li>
<li>当参数个数大于 5 个时，建议使用<code>JavaBean</code>方式。</li>
</ul>
<h2 id="sql-标签"><a href="#sql-标签" class="headerlink" title="sql 标签"></a>sql 标签</h2><p><code>&lt;sql&gt;</code>标签的作用在于可以定义 SQL 语句的一部分（代码片段），以方便后面的 SQL 语句引用它，例如反复使用的列名。</p>
<p>在 MyBatis 中只需使用<code>&lt;sql&gt;</code>标签编写一次便能在其他元素中引用它。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;comColumns&quot;</span>&gt;</span>id,uname,usex<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.po.MyUser&quot;</span>&gt;</span></span><br><span class="line">  select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;comColumns&quot;</span>&gt;</span> from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="resultMap元素"><a href="#resultMap元素" class="headerlink" title="resultMap元素"></a>resultMap元素</h2><p><code>resultMap</code>主要用于解决实体类属性名与数据库表中字段名不一致的情况，可以将查询结果映射成实体对象。</p>
<p>现有的 MyBatis 版本只支持<code>resultMap</code>查询，不支持更新或者保存，更不必说级联的更新、删除和修改。</p>
<h3 id="resultMap元素的构成"><a href="#resultMap元素的构成" class="headerlink" title="resultMap元素的构成"></a>resultMap元素的构成</h3><p><code>resultMap</code>元素还可以包含以下子元素。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor</span>&gt;</span><span class="comment">&lt;!-- 类再实例化时用来注入结果到构造方法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">idArg</span>/&gt;</span><span class="comment">&lt;!-- ID参数，结果为ID --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span>/&gt;</span><span class="comment">&lt;!-- 注入到构造方法的一个普通结果 --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>/&gt;</span><span class="comment">&lt;!-- 用于表示哪个列是主键 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span>/&gt;</span><span class="comment">&lt;!-- 注入到字段或JavaBean属性的普通结果 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;&quot;</span>/&gt;</span><span class="comment">&lt;!-- 用于一对一关联 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;&quot;</span>/&gt;</span><span class="comment">&lt;!-- 用于一对多、多对多关联 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="comment">&lt;!-- 使用结果值来决定使用哪个结果映射 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span><span class="comment">&lt;!-- 基于某些值的结果映射 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li><code>&lt;resultMap&gt;</code>元素的<code>type</code>属性表示需要的 POJO，<code>id</code>属性是<code>resultMap</code>的唯一标识。</li>
<li>子元素<code>&lt;constructor&gt;</code>用于配置构造方法。当一个 POJO 没有无参数构造方法时使用。</li>
<li>子元素<code>&lt;id&gt;</code>用于表示哪个列是主键。允许多个主键，多个主键称为联合主键。</li>
<li>子元素<code>&lt;result&gt;</code>用于表示 POJO 和 SQL 列名的映射关系。</li>
<li>子元素<code>&lt;association&gt;、&lt;collection&gt;</code>和<code>&lt;discriminator&gt;</code>用在级联的情况下。</li>
</ul>
<p><code>id</code>和<code>result</code>元素都有以下属性。</p>
<table>
<thead>
<tr>
<th align="center">元素</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">property</td>
<td align="center">映射到列结果的字段或属性。如果 POJO 的属性和 SQL 列名（column元素）是相同的，那么 MyBatis 就会映射到 POJO 上</td>
</tr>
<tr>
<td align="center">column</td>
<td align="center">对应 SQL 列</td>
</tr>
<tr>
<td align="center">javaType</td>
<td align="center">配置 Java 类型。可以是特定的类完全限定名或 MyBatis 上下文的别名</td>
</tr>
<tr>
<td align="center">jdbcType</td>
<td align="center">配置数据库类型。这是 JDBC 类型，MyBatis 已经为我们做了限定，基本支持所有常用数据库类型</td>
</tr>
<tr>
<td align="center">typeHandler</td>
<td align="center">类型处理器。允许你用特定的处理器来覆盖 MyBatis 默认的处理器。需要指定 jdbcType 和 javaType 相互转化的规则</td>
</tr>
</tbody></table>
<p>一条 SQL 查询语句执行后会返回结果集，结果集有两种存储方式，即使用<code>Map</code>存储和使用 POJO 存储。</p>
<h3 id="使用Map存储结果集"><a href="#使用Map存储结果集" class="headerlink" title="使用Map存储结果集"></a>使用Map存储结果集</h3><p>任何<code>select</code>语句都可以使用<code>Map</code>存储。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询所有网站信息存到Map中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllWebsite&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select * from website</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>WebsiteMapper</code>接口中添加以下方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">selectAllWebsite</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<p><code>Map</code>的<code>key</code>是<code>select</code>语句查询的字段名（必须完全一样），而<code>Map</code>的<code>value</code>是查询返回结果中字段对应的值，一条记录映射到一个<code>Map</code>对象中。</p>
<p>使用<code>Map</code>存储结果集很方便，但可读性稍差，所以一般推荐使用 POJO 的方式。</p>
<h3 id="使用POJO存储结果集"><a href="#使用POJO存储结果集" class="headerlink" title="使用POJO存储结果集"></a>使用POJO存储结果集</h3><p>因为 MyBatis 提供了自动映射，所以使用 POJO 存储结果集是最常用的方式。但有时候需要更加复杂的映射或级联，这时就需要使用<code>select</code>元素的<code>resultMap</code>属性配置映射集合。</p>
<p>修改<code>Website</code>类，代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> net.biancheng.po;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Website</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String uname;</span><br><span class="line">  <span class="keyword">private</span> String url;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">  <span class="keyword">private</span> String country;</span><br><span class="line">  <span class="keyword">private</span> Date createtime;</span><br><span class="line">  <span class="comment">/* setter和getter方法*/</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Website[id=&quot;</span> + id + <span class="string">&quot;,uname=&quot;</span> + uname + <span class="string">&quot;,url=&quot;</span> + url + <span class="string">&quot;,age=&quot;</span> + age + <span class="string">&quot;,country=&quot;</span> + country</span><br><span class="line">          + <span class="string">&quot;,createtime=&quot;</span> + createtime + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>WebsiteMapper.xml</code>代码如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用自定义结果集类型 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;net.biancheng.po.Website&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myResult&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- property 是 net.biancheng.po.Website 类中的属性 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- column是查询结果的列名，可以来自不同的表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;uname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>resultMap</code>元素的属性<code>id</code>代表这个<code>resultMap</code>的标识，<code>type</code>标识需要映射的 POJO。我们可以使用 MyBatis 定义好的类的别名或自定义类的全限定名。</p>
<p>这里使用<code>property</code>元素指定<code>Website</code>的属性名称<code>uname，column</code>表示数据库中<code>website</code>表的 SQL 列名<code>name</code>，将 POJO 和 SQL 的查询结果一 一对应。</p>
<p><code>WebsiteMapper.xml</code>中<code>select</code>元素配置代码如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllWebsite&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;myResult&quot;</span>&gt;</span></span><br><span class="line">  select id,name,url from website</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以发现 SQL 语句的列名和<code>myResult</code>中的<code>column</code>一一对应。</p>
<h3 id="resultType和resultMap的区别"><a href="#resultType和resultMap的区别" class="headerlink" title="resultType和resultMap的区别"></a>resultType和resultMap的区别</h3><p>MyBatis 的每一个查询映射的返回类型都是<code>resultMap</code>，只是当我们提供的返回类型是<code>resultType</code>时，MyBatis 会自动把对应的值赋给<code>resultType</code>所指定对象的属性，而当我们提供的返回类型是<code>resultMap</code>时，MyBatis 会将数据库中的列数据复制到对象的相应属性上，可用于复制查询。</p>
<p>需要注意的是，<code>resultMap</code>和<code>resultType</code>不能同时使用。</p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2021/04/12/java/MyBatis/MyBatis%20XML%E6%98%A0%E5%B0%84%E5%99%A8/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2021/04/12/java/MyBatis/MyBatis%20%E5%8A%A8%E6%80%81SQL/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            MyBatis 动态SQL
          
        </div>
      </a>
    
    
      <a href="/2021/04/10/java/MyBatis/MyBatis%20XML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">MyBatis XML配置文件</div>
      </a>
    
  </nav>

  
   
  
    
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2017-2023
        <i class="ri-heart-fill heart_icon"></i> WSQ
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="学海无涯"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>
 
<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>