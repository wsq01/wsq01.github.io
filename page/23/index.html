<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 学海无涯</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?b1b5dee3bb1719c8a439f8070118dc80";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <!-- <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script> -->
      <link href="https://cdn.bootcdn.net/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.css" rel="stylesheet">
      <script src="https://cdn.bootcdn.net/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/wsq01/"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover5.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">学海无涯</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-MySQL/MySQL视图"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/27/MySQL/MySQL%E8%A7%86%E5%9B%BE/"
    >MySQL 视图</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/27/MySQL/MySQL%E8%A7%86%E5%9B%BE/" class="article-date">
  <time datetime="2020-04-27T10:21:41.000Z" itemprop="datePublished">2020-04-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="视图是什么"><a href="#视图是什么" class="headerlink" title="视图是什么"></a>视图是什么</h1><p>MySQL 视图（View）是一种虚拟存在的表，同真实表一样，视图也由列和行构成，但视图并不实际存在于数据库中。行和列的数据来自于定义视图的查询中所使用的表，并且还是在使用视图时动态生成的。</p>
<p>数据库中只存放了视图的定义，并没有存放视图中的数据，这些数据都存放在定义视图查询所引用的真实表中。使用视图查询数据时，数据库会从真实表中取出对应的数据。因此，视图中的数据是依赖于真实表中的数据的。一旦真实表中的数据发生改变，显示在视图中的数据也会发生改变。</p>
<p>视图可以从原有的表上选取对用户有用的信息，那些对用户没用，或者用户没有权限了解的信息，都可以直接屏蔽掉，作用类似于筛选。这样做既使应用简单化，也保证了系统的安全。</p>
<p>例如，数据库中有一张公司部门表<code>department</code>和一张员工表<code>worker</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> department;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> d_id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> d_name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">function</span> <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> address  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> worker;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field       <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> num         <span class="operator">|</span> <span class="type">int</span>(<span class="number">10</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> d_id        <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>MUL  <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name        <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sex         <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">4</span>)  <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> birthday    <span class="operator">|</span> datetime    <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> homeaddress <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>由于各部门领导的权力范围不同，因此，各部门的领导只能看到该部门的员工信息；而且，领导可能不关心员工的生日和家庭住址。为了达到这个目的，可以为各部门的领导建立一个视图，通过该视图，领导只能看到本部门员工的指定信息。</p>
<p>例如，为生产部门建立一个名为<code>product _view</code>的视图。通过视图<code>product_ view</code>，生产部门的领导只能看到生产部门员工的工作号、姓名和性别等信息。这些<code>department</code>表的信息和<code>worker</code>表的信息依然存在于各自的表中，而视图<code>product_view</code>中不保存任何数据信息。当<code>department</code>表和<code>worker</code>表的信息发生改变时，视图<code>product_view</code>显示的信息也会发生相应的变化。</p>
<p>技巧：如果经常需要从多个表查询指定字段的数据，可以在这些表上建立一个视图，通过这个视图显示这些字段的数据。</p>
<p>MySQL 的视图不支持输入参数的功能，因此交互性上还有欠缺。但对于变化不是很大的操作，使用视图可以很大程度上简化用户的操作。</p>
<p>视图并不同于数据表，它们的区别在于以下几点：</p>
<ul>
<li>视图不是数据库中真实的表，而是一张虚拟表，其结构和数据是建立在对数据中真实表的查询基础上的。</li>
<li>存储在数据库中的查询操作 SQL 语句定义了视图的内容，列数据和行数据来自于视图查询所引用的实际表，引用视图时动态生成这些数据。</li>
<li>视图没有实际的物理记录，不是以数据集的形式存储在数据库中的，它所对应的数据实际上是存储在视图所引用的真实表中的。</li>
<li>视图是数据的窗口，而表是内容。表是实际数据的存放单位，而视图只是以不同的显示方式展示数据，其数据来源还是实际表。</li>
<li>视图是查看数据表的一种方法，可以查询数据表中某些字段构成的数据，只是一些 SQL 语句的集合。从安全的角度来看，视图的数据安全性更高，使用视图的用户不接触数据表，不知道表结构。</li>
<li>视图的建立和删除只影响视图本身，不影响对应的基本表。</li>
</ul>
<h2 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h2><p>视图与表在本质上虽然不相同，但视图经过定义以后，结构形式和表一样，可以进行查询、修改、更新和删除等操作。同时，视图具有如下优点：</p>
<ol>
<li>定制用户数据，聚焦特定的数据<br>在实际的应用过程中，不同的用户可能对不同的数据有不同的要求。<br>例如，当数据库同时存在时，如学生基本信息表、课程表和教师信息表等多种表同时存在时，可以根据需求让不同的用户使用各自的数据。学生查看修改自己基本信息的视图，安排课程人员查看修改课程表和教师信息的视图，教师查看学生信息和课程信息表的视图。</li>
<li>简化数据操作<br>在使用查询时，很多时候要使用聚合函数，同时还要显示其他字段的信息，可能还需要关联到其他表，语句可能会很长，如果这个动作频繁发生的话，可以创建视图来简化操作。</li>
<li>提高数据的安全性<br>视图是虚拟的，物理上是不存在的。可以只授予用户视图的权限，而不具体指定使用表的权限，来保护基础数据的安全。</li>
<li>共享所需数据<br>通过使用视图，每个用户不必都定义和存储自己所需的数据，可以共享数据库中的数据，同样的数据只需要存储一次。</li>
<li>更改数据格式<br>通过使用视图，可以重新格式化检索出的数据，并组织输出到其他应用程序中。</li>
<li>重用 SQL 语句<br>视图提供的是对查询操作的封装，本身不包含数据，所呈现的数据是根据视图定义从基础表中检索出来的，如果基础表的数据新增或删除，视图呈现的也是更新后的数据。视图定义后，编写完所需的查询，可以方便地重用该视图。</li>
</ol>
<p>要注意区别视图和数据表的本质，即视图是基于真实表的一张虚拟的表，其数据来源均建立在真实表的基础上。</p>
<p>使用视图的时候，还应该注意以下几点：</p>
<ul>
<li>创建视图需要足够的访问权限。</li>
<li>创建视图的数目没有限制。</li>
<li>视图可以嵌套，即从其他视图中检索数据的查询来创建视图。</li>
<li>视图不能索引，也不能有关联的触发器、默认值或规则。</li>
<li>视图可以和表一起使用。</li>
<li>视图不包含数据，所以每次使用视图时，都必须执行查询中所需的任何一个检索操作。如果用多个连接和过滤条件创建了复杂的视图或嵌套了视图，可能会发现系统运行性能下降得十分严重。因此，在部署大量视图应用时，应该进行系统测试。</li>
</ul>
<h1 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h1><p>创建视图是指在已经存在的 MySQL 数据库表上建立视图。视图可以建立在一张表中，也可以建立在多张表中。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>可以使用<code>CREATE VIEW</code>语句来创建视图。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="operator">&gt;</span> <span class="keyword">AS</span> <span class="operator">&lt;</span><span class="keyword">SELECT</span>语句<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>&lt;视图名&gt;：指定视图的名称。该名称在数据库中必须是唯一的，不能与其他表或视图同名。</li>
<li><code>&lt;SELECT语句&gt;</code>：指定创建视图的<code>SELECT</code>语句，可用于查询多个基础表或源视图。</li>
</ul>
<p>对于创建视图中的<code>SELECT</code>语句的指定存在以下限制：</p>
<ul>
<li>用户除了拥有<code>CREATE VIEW</code>权限外，还具有操作中涉及的基础表和其他视图的相关权限。</li>
<li><code>SELECT</code>语句不能引用系统或用户变量。</li>
<li><code>SELECT</code>语句不能包含<code>FROM</code>子句中的子查询。</li>
<li><code>SELECT</code>语句不能引用预处理语句参数。</li>
</ul>
<p>视图定义中引用的表或视图必须存在。但是，创建完视图后，可以删除定义引用的表或视图。可使用<code>CHECK TABLE</code>语句检查视图定义是否存在这类问题。</p>
<p>视图定义中允许使用<code>ORDER BY</code>语句，但是若从特定视图进行选择，而该视图使用了自己的<code>ORDER BY</code>语句，则视图定义中的<code>ORDER BY</code>将被忽略。</p>
<p>视图定义中不能引用<code>TEMPORARY</code>表（临时表），不能创建<code>TEMPORARY</code>视图。</p>
<p><code>WITH CHECK OPTION</code>的意思是，修改视图时，检查插入的数据是否符合<code>WHERE</code>设置的条件。</p>
<h2 id="创建基于单表的视图"><a href="#创建基于单表的视图" class="headerlink" title="创建基于单表的视图"></a>创建基于单表的视图</h2><p>MySQL 可以在单个数据表上创建视图。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>       <span class="number">6</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-06</span><span class="number">-07</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-08</span><span class="number">-05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>在<code>tb_students_info</code>表上创建一个名为<code>view_students_info</code>的视图。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_students_info <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>       <span class="number">6</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-06</span><span class="number">-07</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-08</span><span class="number">-05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>默认情况下，创建的视图和基本表的字段是一样的，也可以通过指定视图字段的名称来创建视图。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (s_id,s_name,d_id,s_age,s_sex,s_height,s_date)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">AS</span> <span class="keyword">SELECT</span> id,name,dept_id,age,sex,height,login_date</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> v_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="operator">|</span> s_id <span class="operator">|</span> s_name <span class="operator">|</span> d_id <span class="operator">|</span> s_age <span class="operator">|</span> s_sex <span class="operator">|</span> s_height <span class="operator">|</span> s_date     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">21</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">178</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-06</span><span class="number">-07</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-08</span><span class="number">-05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>可以看到，<code>view_students_info</code>和<code>v_students_info</code>两个视图中的字段名称不同，但是数据却相同。因此，在使用视图时，可能用户不需要了解基本表的结构，更接触不到实际表中的数据，从而保证了数据库的安全。</p>
<h2 id="创建基于多表的视图"><a href="#创建基于多表的视图" class="headerlink" title="创建基于多表的视图"></a>创建基于多表的视图</h2><p>MySQL 中也可以在两个以上的表中创建视图，使用<code>CREATE VIEW</code>语句创建。</p>
<p>在表<code>tb_student_info</code>和表<code>tb_departments</code>上创建视图<code>v_students_info</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (s_id,s_name,d_id,s_age,s_sex,s_height,s_date)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">AS</span> <span class="keyword">SELECT</span> id,name,dept_id,age,sex,height,login_date</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> v_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="operator">|</span> s_id <span class="operator">|</span> s_name <span class="operator">|</span> d_id <span class="operator">|</span> s_age <span class="operator">|</span> s_sex <span class="operator">|</span> s_height <span class="operator">|</span> s_date     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">21</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">178</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-06</span><span class="number">-07</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-08</span><span class="number">-05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>通过这个视图可以很好地保护基本表中的数据。视图中包含<code>s_id、s_name</code>和<code>dept_name，s_id</code>字段对应<code>tb_students_info</code>表中的<code>id</code>字段，<code>s_name</code>字段对应<code>tb_students_info</code>表中的<code>name</code>字段，<code>dept_name</code>字段对应<code>tb_departments</code>表中的<code>dept_name</code>字段。</p>
<h1 id="查看视图"><a href="#查看视图" class="headerlink" title="查看视图"></a>查看视图</h1><p>创建好视图后，可以通过查看视图的语句来查看视图的字段信息以及详细信息。</p>
<h2 id="查看视图的字段信息"><a href="#查看视图的字段信息" class="headerlink" title="查看视图的字段信息"></a>查看视图的字段信息</h2><p>查看视图的字段信息与查看数据表的字段信息一样，都是使用<code>DESCRIBE</code>关键字来查看的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESCRIBE 视图名;</span><br></pre></td></tr></table></figure>
<p>或简写成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 视图名;</span><br></pre></td></tr></table></figure>
<p>创建学生信息表<code>studentinfo</code>的一个视图，用于查询学生姓名和考试分数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> studentinfo(</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ID <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> SCORE <span class="type">DECIMAL</span>(<span class="number">4</span>,<span class="number">2</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> SUBJECT <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> TEACHER <span class="type">VARCHAR</span>(<span class="number">20</span>));</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.10</span> sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_studentinfo <span class="keyword">AS</span> <span class="keyword">SELECT</span> name,score <span class="keyword">FROM</span> studentinfo;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESCRIBE</span> v_studentinfo;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type         <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> score <span class="operator">|</span> <span class="type">decimal</span>(<span class="number">4</span>,<span class="number">2</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>注意：使用<code>DESC</code>的执行结果和使用<code>DESCRIBE</code>是一样的。</p>
<p>由运行结果可以看出，查看视图的字段内容与查看表的字段内容显示的格式是相同的。因此，更能说明视图实际上也是一张数据表了，不同的是，视图中的数据都来自于数据库中已经存在的表。</p>
<h2 id="查看视图的详细信息"><a href="#查看视图的详细信息" class="headerlink" title="查看视图的详细信息"></a>查看视图的详细信息</h2><p>在 MySQL 中，<code>SHOW CREATE VIEW</code>语句可以查看视图的详细定义。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 视图名;</span><br></pre></td></tr></table></figure>
<p>通过上面的语句，还可以查看创建视图的语句。创建视图的语句可以作为修改或者重新创建视图的参考，方便用户操作。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_studentinfo \G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">                <span class="keyword">View</span>: v_studentinfo</span><br><span class="line">         <span class="keyword">Create</span> <span class="keyword">View</span>: <span class="keyword">CREATE</span> ALGORITHM<span class="operator">=</span>UNDEFINED DEFINER<span class="operator">=</span>`root`@`localhost` <span class="keyword">SQL</span> SECURITY DEFINER <span class="keyword">VIEW</span> `v_studentinfo` <span class="keyword">AS</span> <span class="keyword">select</span> `studentinfo`.`NAME` <span class="keyword">AS</span> `name`,`studentinfo`.`SCORE` <span class="keyword">AS</span> `score` <span class="keyword">from</span> `studentinfo`</span><br><span class="line">character_set_client: gbk</span><br><span class="line">collation_connection: gbk_chinese_ci</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>上述 SQL 语句以<code>\G</code>结尾，这样能使显示结果格式化。如果不使用<code>\G</code>，显示的结果会比较混乱，如下所示：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESCRIBE</span> v_studentinfo;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type         <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> score <span class="operator">|</span> <span class="type">decimal</span>(<span class="number">4</span>,<span class="number">2</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_studentinfo;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">View</span>          <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">View</span>                                                                                                                                                                                  <span class="operator">|</span> character_set_client <span class="operator">|</span> collation_connection <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> v_studentinfo <span class="operator">|</span> <span class="keyword">CREATE</span> ALGORITHM<span class="operator">=</span>UNDEFINED DEFINER<span class="operator">=</span>`root`@`localhost` <span class="keyword">SQL</span> SECURITY DEFINER <span class="keyword">VIEW</span> `v_studentinfo` <span class="keyword">AS</span> <span class="keyword">select</span> `studentinfo`.`NAME` <span class="keyword">AS</span> `name`,`studentinfo`.`SCORE` <span class="keyword">AS</span> `score` <span class="keyword">from</span> `studentinfo` <span class="operator">|</span> gbk                  <span class="operator">|</span> gbk_chinese_ci       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>所有视图的定义都是存储在<code>information_schema</code>数据库下的<code>views</code>表中，也可以在这个表中查看所有视图的详细信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.views;</span><br></pre></td></tr></table></figure>
<p>不过，通常情况下都是使用<code>SHOW CREATE VIEW</code>语句。</p>
<h1 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h1><p>修改视图是指修改 MySQL 数据库中存在的视图，当基本表的某些字段发生变化时，可以通过修改视图来保持与基本表的一致性。</p>
<h2 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h2><p>可以使用<code>ALTER VIEW</code>语句来对已有的视图进行修改。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="operator">&gt;</span> <span class="keyword">AS</span> <span class="operator">&lt;</span><span class="keyword">SELECT</span>语句<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>&lt;视图名&gt;：指定视图的名称。该名称在数据库中必须是唯一的，不能与其他表或视图同名。</li>
<li><code>&lt;SELECT 语句&gt;</code>：指定创建视图的<code>SELECT</code>语句，可用于查询多个基础表或源视图。</li>
</ul>
<p>需要注意的是，对于<code>ALTER VIEW</code>语句的使用，需要用户具有针对视图的<code>CREATE VIEW</code>和<code>DROP</code>权限，以及由<code>SELECT</code>语句选择的每一列上的某些权限。</p>
<p>修改视图的定义，除了可以通过<code>ALTER VIEW</code>外，也可以使用<code>DROP VIEW</code>语句先删除视图，再使用<code>CREATE VIEW</code>语句来实现。</p>
<h2 id="修改视图内容"><a href="#修改视图内容" class="headerlink" title="修改视图内容"></a>修改视图内容</h2><p>视图是一个虚拟表，实际的数据来自于基本表，所以通过插入、修改和删除操作更新视图中的数据，实质上是在更新视图所引用的基本表的数据。</p>
<blockquote>
<p>注意：对视图的修改就是对基本表的修改，因此在修改时，要满足基本表的数据定义。</p>
</blockquote>
<p>某些视图是可更新的。也就是说，可以使用<code>UPDATE、DELETE</code>或<code>INSERT</code>等语句更新基本表的内容。对于可更新的视图，视图中的行和基本表的行之间必须具有一对一的关系。</p>
<p>还有一些特定的其他结构，这些结构会使得视图不可更新。更具体地讲，如果视图包含以下结构中的任何一种，它就是不可更新的：</p>
<ul>
<li>聚合函数<code>SUM()、MIN()、MAX()、COUNT()</code>等。</li>
<li><code>DISTINCT</code>关键字。</li>
<li><code>GROUP BY</code>子句。</li>
<li><code>HAVING</code>子句。</li>
<li><code>UNION</code>或<code>UNION ALL</code>运算符。</li>
<li>位于选择列表中的子查询。</li>
<li><code>FROM</code>子句中的不可更新视图或包含多个表。</li>
<li><code>WHERE</code>子句中的子查询，引用<code>FROM</code>子句中的表。</li>
<li><code>ALGORITHM</code>选项为<code>TEMPTABLE</code>（使用临时表总会使视图成为不可更新的）的时候。</li>
</ul>
<p>使用<code>ALTER</code>语句修改视图<code>view_students_info</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">VIEW</span> view_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">AS</span> <span class="keyword">SELECT</span> id,name,age</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> view_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">45</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> age   <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>用户可以通过视图来插入、更新、删除表中的数据，因为视图是一个虚拟的表，没有数据。通过视图更新时转到基本表上进行更新，如果对视图增加或删除记录，实际上是对基本表增加或删除记录。</p>
<p>查看视图<code>view_students_info</code>的数据内容。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>使用<code>UPDATE</code>语句更新视图<code>view_students_info</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">UPDATE</span> view_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">SET</span> age<span class="operator">=</span><span class="number">25</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.24</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>查看基本表<code>tb_students_info</code>和视图<code>v_students_info</code>的内容。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>       <span class="number">6</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-06</span><span class="number">-07</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-08</span><span class="number">-05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> v_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="operator">|</span> s_id <span class="operator">|</span> s_name <span class="operator">|</span> d_id <span class="operator">|</span> s_age <span class="operator">|</span> s_sex <span class="operator">|</span> s_height <span class="operator">|</span> s_date     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">21</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> F     <span class="operator">|</span>      <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">178</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-06</span><span class="number">-07</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span> M     <span class="operator">|</span>      <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-08</span><span class="number">-05</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+------+-------+-------+----------+------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="修改视图名称"><a href="#修改视图名称" class="headerlink" title="修改视图名称"></a>修改视图名称</h2><p>修改视图的名称可以先将视图删除，然后按照相同的定义语句进行视图的创建，并命名为新的视图名称。</p>
<h1 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h1><p>删除视图是指删除 MySQL 数据库中已存在的视图。删除视图时，只能删除视图的定义，不会删除数据。</p>
<p>可以使用<code>DROP VIEW</code>语句来删除视图。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="number">1</span><span class="operator">&gt;</span> [ , <span class="operator">&lt;</span>视图名<span class="number">2</span><span class="operator">&gt;</span> …]</span><br></pre></td></tr></table></figure>
<p>其中：&lt;视图名&gt;指定要删除的视图名。<code>DROP VIEW</code>语句可以一次删除多个视图，但是必须在每个视图上拥有<code>DROP</code>权限。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">VIEW</span> IF <span class="keyword">EXISTS</span> v_students_info;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_students_info;</span><br><span class="line">ERROR <span class="number">1146</span> (<span class="number">42</span>S02): <span class="keyword">Table</span> <span class="string">&#x27;test_db.v_students_info&#x27;</span> doesn<span class="string">&#x27;t exist</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL多表查询"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/26/MySQL/MySQL%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/"
    >MySQL多表查询</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/26/MySQL/MySQL%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/" class="article-date">
  <time datetime="2020-04-26T03:48:12.000Z" itemprop="datePublished">2020-04-26</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>多表查询就是同时查询两个或两个以上的表。在 MySQL 中，多表查询主要有交叉连接、内连接和外连接。</p>
<h1 id="CROSS-JOIN：交叉连接"><a href="#CROSS-JOIN：交叉连接" class="headerlink" title="CROSS JOIN：交叉连接"></a>CROSS JOIN：交叉连接</h1><p>交叉连接（<code>CROSS JOIN</code>）一般用来返回连接表的笛卡尔积。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT &lt;字段名&gt; FROM &lt;表1&gt; CROSS JOIN &lt;表2&gt; [WHERE子句]</span><br><span class="line">或</span><br><span class="line">SELECT &lt;字段名&gt; FROM &lt;表1&gt;, &lt;表2&gt; [WHERE子句] </span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>字段名：需要查询的字段名称。</li>
<li>&lt;表1&gt;&lt;表2&gt;：需要交叉连接的表名。</li>
<li><code>WHERE</code>子句：用来设置交叉连接的查询条件。</li>
</ul>
<blockquote>
<p>注意：多个表交叉连接时，在<code>FROM</code>后连续使用<code>CROSS JOIN</code>或<code>,</code>即可。</p>
</blockquote>
<p>当连接的表之间没有关系时，我们会省略掉<code>WHERE</code>子句，这时返回结果就是两个表的笛卡尔积，返回结果数量就是两个表的数据行相乘。需要注意的是，如果每个表有 1000 行，那么返回结果的数量就有 1000×1000 &#x3D; 1000000 行，数据量是非常巨大的。</p>
<p>交叉连接可以查询两个或两个以上的表。</p>
<p>查询学生信息表和科目信息表，并得到一个笛卡尔积。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> course_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_course;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> course_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_course <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> course_name <span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> course_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="number">50</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，<code>tb_course</code>和<code>tb_students_info</code>表交叉连接查询后，返回了 50 条记录。可以想象，当表中的数据较多时，得到的运行结果会非常长，而且得到的运行结果也没太大的意义。所以，通过交叉连接的方式进行多表查询的这种方法并不常用，我们应该尽量避免这种查询。</p>
<p>查询<code>tb_course</code>表中的<code>id</code>字段和<code>tb_students_info</code>表中的<code>course_id</code>字段相等的内容：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_course <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> tb_students_info </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> tb_students_info.course_id <span class="operator">=</span> tb_course.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> course_name <span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> course_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>如果在交叉连接时使用<code>WHERE</code>子句，MySQL 会先生成两个表的笛卡尔积，然后再选择满足<code>WHERE</code>条件的记录。因此，表的数量较多时，交叉连接会非常非常慢。一般情况下不建议使用交叉连接。</p>
<p>在 MySQL 中，多表查询一般使用内连接和外连接，它们的效率要高于交叉连接。</p>
<h2 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h2><p>笛卡尔积是指两个集合<code>X</code>和<code>Y</code>的乘积。</p>
<p>例如，有<code>A</code>和<code>B</code>两个集合：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A = &#123;1,2&#125;</span><br><span class="line">B = &#123;3,4,5&#125;</span><br></pre></td></tr></table></figure>
<p>集合<code>A×B 和 B×A</code>的结果集分别表示为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A×B=&#123;(1,3), (1,4), (1,5), (2,3), (2,4), (2,5) &#125;;</span><br><span class="line">B×A=&#123;(3,1), (3,2), (4,1), (4,2), (5,1), (5,2) &#125;;</span><br></pre></td></tr></table></figure>
<p>以上<code>A×B</code>和<code>B×A</code>的结果就叫做两个集合的笛卡尔积。并且，从以上结果我们可以看出：</p>
<ul>
<li>两个集合相乘，不满足交换率，即<code>A×B≠B×A</code>。</li>
<li><code>A</code>集合和<code>B</code>集合的笛卡尔积是<code>A</code>集合的元素个数 × <code>B</code>集合的元素个数。</li>
</ul>
<p>多表查询遵循的算法就是以上提到的笛卡尔积，表与表之间的连接可以看成是在做乘法运算。在实际应用中，应避免使用笛卡尔积，因为笛卡尔积中容易存在大量的不合理数据，简单来说就是容易导致查询结果重复、混乱。</p>
<h1 id="INNER-JOIN：内连接"><a href="#INNER-JOIN：内连接" class="headerlink" title="INNER JOIN：内连接"></a>INNER JOIN：内连接</h1><p>内连接主要通过设置连接条件的方式，来移除查询结果中某些数据行的交叉连接。简单来说，就是利用条件表达式来消除交叉连接的某些数据行。</p>
<p>内连接使用<code>INNER JOIN</code>关键字连接两张表，并使用<code>ON</code>子句来设置连接条件。如果没有连接条件，<code>INNER JOIN</code>和<code>CROSS JOIN</code>在语法上是等同的，两者可以互换。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表<span class="number">1</span><span class="operator">&gt;</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="operator">&lt;</span>表<span class="number">2</span><span class="operator">&gt;</span> [<span class="keyword">ON</span>子句]</span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>字段名：需要查询的字段名称。</li>
<li>&lt;表1&gt;&lt;表2&gt;：需要内连接的表名。</li>
<li><code>INNER JOIN</code>：内连接中可以省略<code>INNER</code>关键字，只用关键字<code>JOIN</code>。</li>
<li><code>ON</code>子句：用来设置内连接的连接条件。</li>
</ul>
<p><code>INNER JOIN</code>也可以使用<code>WHERE</code>子句指定连接条件，但是<code>INNER JOIN ... ON</code>语法是官方的标准写法，而且<code>WHERE</code>子句在某些时候会影响查询的性能。</p>
<p>多个表内连接时，在<code>FROM</code>后连续使用<code>INNER JOIN</code>或<code>JOIN</code>即可。</p>
<p>在<code>tb_students_info</code>表和<code>tb_course</code>表之间，使用内连接查询学生姓名和相对应的课程名称。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> s.name,c.course_name <span class="keyword">FROM</span> tb_students_info s <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tb_course c </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> s.course_id <span class="operator">=</span> c.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> course_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> Python      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>在这里的查询语句中，两个表之间的关系通过<code>INNER JOIN</code>指定，连接的条件使用<code>ON</code>子句给出。</p>
<p>注意：当对多个表进行查询时，要在<code>SELECT</code>语句后面指定字段是来源于哪一张表。因此，在多表查询时，<code>SELECT</code>语句后面的写法是表名.列名。另外，如果表名非常长的话，也可以给表设置别名，这样就可以直接在<code>SELECT</code>语句后面写上表的别名.列名。</p>
<h1 id="LEFT-x2F-RIGHT-JOIN：外连接"><a href="#LEFT-x2F-RIGHT-JOIN：外连接" class="headerlink" title="LEFT&#x2F;RIGHT JOIN：外连接"></a>LEFT&#x2F;RIGHT JOIN：外连接</h1><p>内连接的查询结果都是符合连接条件的记录，而外连接会先将连接的表分为基表和参考表，再以基表为依据返回满足和不满足条件的记录。</p>
<p>外连接可以分为左外连接和右外连接。</p>
<h2 id="左连接"><a href="#左连接" class="headerlink" title="左连接"></a>左连接</h2><p>左外连接又称为左连接，使用<code>LEFT OUTER JOIN</code>关键字连接两个表，并使用<code>ON</code>子句来设置连接条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表<span class="number">1</span><span class="operator">&gt;</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="operator">&lt;</span>表<span class="number">2</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="keyword">ON</span>子句<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>字段名：需要查询的字段名称。</li>
<li>&lt;表1&gt;&lt;表2&gt;：需要左连接的表名。</li>
<li><code>LEFT OUTER JOIN</code>：左连接中可以省略<code>OUTER</code>关键字，只使用关键字<code>LEFT JOIN</code>。</li>
<li><code>ON</code>子句：用来设置左连接的连接条件，不能省略。</li>
</ul>
<p>上述语法中，“表1”为基表，“表2”为参考表。左连接查询时，可以查询出“表1”中的所有记录和“表2”中匹配连接条件的记录。如果“表1”的某行在“表2”中没有匹配行，那么在返回结果中，“表2”的字段值均为空值（<code>NULL</code>）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_course;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> course_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> HTML        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> course_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span> <span class="operator">|</span> LiMing <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">180</span> <span class="operator">|</span>         <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> s.name,c.course_name <span class="keyword">FROM</span> tb_students_info s <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> tb_course c </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> s.`course_id`<span class="operator">=</span>c.`id`;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> course_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> Python      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> LiMing <span class="operator">|</span> <span class="keyword">NULL</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>可以看到，运行结果显示了 12 条记录，<code>name</code>为<code>LiMing</code>的学生目前没有课程，因为对应的<code>tb_course</code>表中没有该学生的课程信息，所以该条记录只取出了<code>tb_students_info</code>表中相应的值，而从<code>tb_course</code>表中取出的值为<code>NULL</code>。</p>
<h2 id="右连接"><a href="#右连接" class="headerlink" title="右连接"></a>右连接</h2><p>右外连接又称为右连接，右连接是左连接的反向连接。使用<code>RIGHT OUTER JOIN</code>关键字连接两个表，并使用<code>ON</code>子句来设置连接条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表<span class="number">1</span><span class="operator">&gt;</span> <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="operator">&lt;</span>表<span class="number">2</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="keyword">ON</span>子句<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>字段名：需要查询的字段名称。</li>
<li>&lt;表1&gt;&lt;表2&gt;：需要右连接的表名。</li>
<li><code>RIGHT OUTER JOIN</code>：右连接中可以省略<code>OUTER</code>关键字，只使用关键字<code>RIGHT JOIN</code>。</li>
<li><code>ON</code>子句：用来设置右连接的连接条件，不能省略。</li>
</ul>
<p>与左连接相反，右连接以“表2”为基表，“表1”为参考表。右连接查询时，可以查询出“表2”中的所有记录和“表1”中匹配连接条件的记录。如果“表2”的某行在“表1”中没有匹配行，那么在返回结果中，“表1”的字段值均为空值（<code>NULL</code>）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> s.name,c.course_name <span class="keyword">FROM</span> tb_students_info s <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> tb_course c </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> s.`course_id`<span class="operator">=</span>c.`id`;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> course_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> Java        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> Python      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span> MySQL       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span> Go          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> C<span class="operator">+</span><span class="operator">+</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span> HTML        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>可以看到，结果显示了 11 条记录，名称为<code>HTML</code>的课程目前没有学生，因为对应的<code>tb_students_info</code>表中并没有该学生的信息，所以该条记录只取出了<code>tb_course</code>表中相应的值，而从<code>tb_students_info</code>表中取出的值为<code>NULL</code>。</p>
<p>多个表左&#x2F;右连接时，在<code>ON</code>子句后连续使用<code>LEFT/RIGHT OUTER JOIN</code>或<code>LEFT/RIGHT JOIN</code>即可。</p>
<p>使用外连接查询时，一定要分清需要查询的结果，是需要显示左表的全部记录还是右表的全部记录，然后选择相应的左连接和右连接。</p>
<h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><p>子查询是 MySQL 中比较常用的查询方法，通过子查询可以实现多表查询。子查询指将一个查询语句嵌套在另一个查询语句中。子查询可以在<code>SELECT、UPDATE</code>和<code>DELETE</code>语句中使用，而且可以进行多层嵌套。在实际开发时，子查询经常出现在<code>WHERE</code>子句中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHERE</span> <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span> <span class="operator">&lt;</span>操作符<span class="operator">&gt;</span> (子查询)</span><br></pre></td></tr></table></figure>
<p>其中，操作符可以是比较运算符和<code>IN、NOT IN、EXISTS、NOT EXISTS</code>等关键字。</p>
<ol>
<li><code>IN | NOT IN</code><br>当表达式与子查询返回的结果集中的某个值相等时，返回<code>TRUE</code>，否则返回<code>FALSE</code>；若使用关键字<code>NOT</code>，则返回值正好相反。</li>
<li><code>EXISTS | NOT EXISTS</code><br>用于判断子查询的结果集是否为空，若子查询的结果集不为空，返回<code>TRUE</code>，否则返回<code>FALSE</code>；若使用关键字<code>NOT</code>，则返回的值正好相反。</li>
</ol>
<p>使用子查询在<code>tb_students_info</code>表和<code>tb_course</code>表中查询学习 Java 课程的学生姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> course_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> course_name <span class="operator">=</span> <span class="string">&#x27;Java&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> Dany  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br></pre></td></tr></table></figure>
<p>上述查询过程也可以分为以下 2 步执行，实现效果是相同的。</p>
<p>1）首先单独执行内查询，查询出<code>tb_course</code>表中课程为 Java 的<code>id</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> course_name <span class="operator">=</span> <span class="string">&#x27;Java&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+</span></span><br></pre></td></tr></table></figure>
<p>2）然后执行外层查询，在<code>tb_students_info</code>表中查询<code>course_id</code>等于 1 的学生姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> course_id <span class="keyword">IN</span> (<span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> Dany  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br></pre></td></tr></table></figure>
<p>习惯上，外层的<code>SELECT</code>查询称为父查询，圆括号中嵌入的查询称为子查询（子查询必须放在圆括号内）。MySQL 在处理上例的<code>SELECT</code>语句时，执行流程为：先执行子查询，再执行父查询。</p>
<p>在<code>SELECT</code>语句中使用<code>NOT IN</code>关键字，查询没有学习 Java 课程的学生姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> course_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> course_name <span class="operator">=</span> <span class="string">&#x27;Java&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> LiMing <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">9</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>使用<code>=</code>运算符，在<code>tb_course</code>表和<code>tb_students_info</code>表中查询出所有学习 Python 课程的学生姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> course_id <span class="operator">=</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> course_name <span class="operator">=</span> <span class="string">&#x27;Python&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> Jane <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>使用<code>&lt;&gt;</code>运算符，在<code>tb_course</code>表和<code>tb_students_info</code>表中查询出没有学习 Python 课程的学生姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> course_id <span class="operator">&lt;&gt;</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> course_name <span class="operator">=</span> <span class="string">&#x27;Python&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> LiMing <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>查询<code>tb_course</code>表中是否存在<code>id=1</code>的课程，如果存在，就查询出<code>tb_students_info</code>表中的记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> course_name <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> course_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span>         <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span> <span class="operator">|</span> LiMing <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">180</span> <span class="operator">|</span>         <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+------+--------+-----------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，<code>tb_course</code>表中存在<code>id=1</code>的记录，因此<code>EXISTS</code>表达式返回<code>TRUE</code>，外层查询语句接收<code>TRUE</code>之后对表<code>tb_students_info</code>进行查询，返回所有的记录。</p>
<p><code>EXISTS</code>关键字可以和其它查询条件一起使用，条件表达式与<code>EXISTS</code>关键字之间用<code>AND</code>和<code>OR</code>连接。</p>
<p>查询<code>tb_course</code>表中是否存在<code>id=1</code>的课程，如果存在，就查询出<code>tb_students_info</code>表中<code>age</code>字段大于 24 的记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> age<span class="operator">&gt;</span><span class="number">24</span> <span class="keyword">AND</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> course_name <span class="keyword">FROM</span> tb_course <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> course_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+------+------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+------+------+--------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>结果显示，从<code>tb_students_info</code>表中查询出了一条记录，这条记录的<code>age</code>字段取值为 25。内层查询语句从<code>tb_course</code>表中查询到记录，返回<code>TRUE</code>。外层查询语句开始进行查询。根据查询条件，从<code>tb_students_info</code>表中查询<code>age</code>大于 24 的记录。</p>
<p>子查询的功能也可以通过表连接完成，但是子查询会使 SQL 语句更容易阅读和编写。</p>
<p>一般来说，表连接（内连接和外连接等）都可以用子查询替换，但反过来却不一定，有的子查询不能用表连接来替换。子查询比较灵活、方便、形式多样，适合作为查询的筛选条件，而表连接更适合于查看连接表的数据。</p>
<h2 id="子查询注意事项"><a href="#子查询注意事项" class="headerlink" title="子查询注意事项"></a>子查询注意事项</h2><h3 id="1-子查询语句可以嵌套在-SQL-语句中任何表达式出现的位置"><a href="#1-子查询语句可以嵌套在-SQL-语句中任何表达式出现的位置" class="headerlink" title="1. 子查询语句可以嵌套在 SQL 语句中任何表达式出现的位置"></a>1. 子查询语句可以嵌套在 SQL 语句中任何表达式出现的位置</h3><p>在<code>SELECT</code>语句中，子查询可以被嵌套在<code>SELECT</code>语句的列、表和查询条件中，即<code>SELECT</code>子句，<code>FROM</code>子句、<code>WHERE</code>子句、<code>GROUP BY</code>子句和<code>HAVING</code>子句。</p>
<p>嵌套在<code>SELECT</code>语句的<code>SELECT</code>子句中的子查询语法格式如下。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> (子查询) <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>
<p>提示：子查询结果为单行单列，但不必指定列别名。</p>
<p>嵌套在<code>SELECT</code>语句的<code>FROM</code>子句中的子查询语法格式如下。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (子查询) <span class="keyword">AS</span> 表的别名;</span><br></pre></td></tr></table></figure>
<p>注意：必须为表指定别名。一般返回多行多列数据记录，可以当作一张临时表。</p>
<h3 id="2-只出现在子查询中而没有出现在父查询中的表不能包含在输出列中"><a href="#2-只出现在子查询中而没有出现在父查询中的表不能包含在输出列中" class="headerlink" title="2. 只出现在子查询中而没有出现在父查询中的表不能包含在输出列中"></a>2. 只出现在子查询中而没有出现在父查询中的表不能包含在输出列中</h3><p>多层嵌套子查询的最终数据集只包含父查询（即最外层的查询）的<code>SELECT</code>子句中出现的字段，而子查询的输出结果通常会作为其外层子查询数据源或用于数据判断匹配。</p>
<p>常见错误如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">result</span>);</span><br></pre></td></tr></table></figure>
<p>这个子查询语句产生语法错误的原因在于主查询语句的<code>FROM</code>子句是一个子查询语句，因此应该为子查询结果集指定别名。正确代码如下。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">result</span>) <span class="keyword">AS</span> Temp;</span><br></pre></td></tr></table></figure>
<h2 id="子查询改写为表连接"><a href="#子查询改写为表连接" class="headerlink" title="子查询改写为表连接"></a>子查询改写为表连接</h2><p>子查询如递归函数一样，有时侯能达到事半功倍的效果，但是其执行效率较低。与表连接相比，子查询比较灵活，方便，形式多样，适合作为查询的筛选条件，而表连接更适合查看多表的数据。</p>
<p>一般情况下，子查询会产生笛卡儿积，表连接的效率要高于子查询。因此在编写 SQL 语句时应尽量使用连接查询。</p>
<p>表连接（内连接和外连接等）都可以用子查询替换，但反过来却不一定，有的子查询不能用表连接来替换。</p>
<p>哪些子查询的查询命令可以改写为表连接。</p>
<p>在检查那些倾向于编写成子查询的查询语句时，可以考虑将子查询替换为表连接，看看连接的效率是不是比子查询更好些。同样，如果某条使用子查询的<code>SELECT</code>语句需要花费很长时间才能执行完毕，那么可以尝试把它改写为表连接，看看执行效果是否有所改善。</p>
<h3 id="1-改写用来查询匹配值的子查询"><a href="#1-改写用来查询匹配值的子查询" class="headerlink" title="1. 改写用来查询匹配值的子查询"></a>1. 改写用来查询匹配值的子查询</h3><p>下面这条示例语句包含一个子查询，它会把<code>score</code>表里的考试成绩查询出来：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> score</span><br><span class="line"><span class="keyword">WHERE</span> grade_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> grade <span class="keyword">WHERE</span> category <span class="operator">=</span> <span class="string">&#x27;Java&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>在编写以上语句时，可以不使用子查询，而是把它转换为一个简单的连接：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> score.<span class="operator">*</span> <span class="keyword">FROM</span> score <span class="keyword">INNER</span> <span class="keyword">JOIN</span> grade</span><br><span class="line"><span class="keyword">ON</span> score.grade_id <span class="operator">=</span> grade.id <span class="keyword">WHERE</span> grade.category <span class="operator">=</span> <span class="string">&#x27;Java&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>再来看另一个示例。下面这条查询语句可以把所有女生的考试成绩查询出来：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> score</span><br><span class="line"><span class="keyword">WHERE</span> student_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> student_id <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> sex <span class="operator">=</span> <span class="string">&#x27;F&#x27;</span>) ;</span><br></pre></td></tr></table></figure>
<p>这条语句可以转换为以下连接：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> score.<span class="operator">*</span> <span class="keyword">FROM</span> score <span class="keyword">INNER</span> <span class="keyword">JOIN</span> student</span><br><span class="line"><span class="keyword">ON</span> score.student_id <span class="operator">=</span> student.student_id <span class="keyword">WHERE</span> student.sex <span class="operator">=</span> <span class="string">&#x27;F&#x27;</span> ;</span><br></pre></td></tr></table></figure>
<p>我们可以发现这些子查询语句都遵从这样一种形式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">WHERE</span> column1 <span class="keyword">IN</span> (<span class="keyword">SELECT</span> column2a <span class="keyword">FROM</span> table2 <span class="keyword">WHERE</span> column2b <span class="operator">=</span> <span class="keyword">value</span>);</span><br></pre></td></tr></table></figure>
<p>其中，<code>column1</code>代表<code>table1</code>中的字段，<code>column2a</code>和<code>column2b</code>代表<code>table2</code>表中的字段。这类查询都可以被转换为下面这种形式的连接查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> table1. <span class="operator">*</span> <span class="keyword">FROM</span> table1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1. column1 <span class="operator">=</span> table. column2a <span class="keyword">WHERE</span> table2. column2b <span class="operator">=</span> <span class="keyword">value</span>;</span><br></pre></td></tr></table></figure>
<p>在某些场合，子查询和关联查询可能会返回不同的结果。比如，当<code>table2</code>包含<code>column2a</code>的多个实例时，就会发生这种情况。这种形式的子查询只会为每个<code>column2a</code>值生成一个实例，而连接操作会为所有值生成实例，并且其输出会包含重复行。如果想要防止这种重复记录出现，就要在编写连接查询语句时使用<code>SELECT DISTINCT</code>，而不能使用<code>SELECT</code>。</p>
<h3 id="2-改写用来查询非匹配（缺失）值的子查询"><a href="#2-改写用来查询非匹配（缺失）值的子查询" class="headerlink" title="2. 改写用来查询非匹配（缺失）值的子查询"></a>2. 改写用来查询非匹配（缺失）值的子查询</h3><p>另一种常见的子查询语句类型是：把存在于某个表里，但在另一个表里并不存在的那些值查找出来。“哪些值不存在”有关的问题通常都可以用<code>LEFT JOIN</code>来解决。</p>
<p>如下语句用来测试哪些学生没有出现在<code>absence</code>表里（用于查找全勤学生）：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> student_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> student_id <span class="keyword">FROM</span> absence) ;</span><br></pre></td></tr></table></figure>
<p>以上查询语句可以使用<code>LEFT JOIN</code>来改写：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student.<span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> absence</span><br><span class="line"><span class="keyword">ON</span> student.student_id <span class="operator">=</span> absence.student_id <span class="keyword">WHERE</span> absence.student_ id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>通常情况下，如果子查询语句符合如下所示的形式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">WHERE</span> column1 <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> column2 <span class="keyword">FROM</span> table2) ;</span><br></pre></td></tr></table></figure>
<p>那么可以把它改写为下面这样的连接查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> table1.<span class="operator">*</span> <span class="keyword">FROM</span> table1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column1 <span class="operator">=</span> table2.column2 <span class="keyword">WHERE</span> table2.column2 <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>这里需要假设<code>table2.column2</code>被定义成了<code>NOT NULL</code>的。</p>
<p>与<code>LEFT JOIN</code>相比，子查询更加直观。大部分人都可以毫无困难地理解“没被包含在…里面”的含义，因为它不是数据库编程技术带来的新概念。而“左连接”有所不同，很难用自然语言直观地描述出它的含义。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL操作表中数据"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/25/MySQL/MySQL%E6%93%8D%E4%BD%9C%E8%A1%A8%E4%B8%AD%E6%95%B0%E6%8D%AE/"
    >MySQL 操作表中的数据</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/25/MySQL/MySQL%E6%93%8D%E4%BD%9C%E8%A1%A8%E4%B8%AD%E6%95%B0%E6%8D%AE/" class="article-date">
  <time datetime="2020-04-25T09:16:51.000Z" itemprop="datePublished">2020-04-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="INSERT：插入数据"><a href="#INSERT：插入数据" class="headerlink" title="INSERT：插入数据"></a>INSERT：插入数据</h1><p>数据库与表创建成功以后，需要向数据库的表中插入数据。在 MySQL 中可以使用<code>INSERT</code>语句向数据库已有的表中插入一行或者多行元组数据。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p><code>INSERT</code>语句有两种语法形式，分别是<code>INSERT…VALUES</code>语句和<code>INSERT…SET</code>语句。</p>
<h4 id="INSERT…VALUES语句"><a href="#INSERT…VALUES语句" class="headerlink" title="INSERT…VALUES语句"></a>INSERT…VALUES语句</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [ <span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span> [ , … <span class="operator">&lt;</span>列名n<span class="operator">&gt;</span>] ]</span><br><span class="line"><span class="keyword">VALUES</span> (值<span class="number">1</span>) [… , (值n) ];</span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>&lt;表名&gt;：指定被操作的表名。</li>
<li>&lt;列名&gt;：指定需要插入数据的列名。若向表中的所有列插入数据，则全部的列名均可以省略，直接采用<code>INSERT &lt;表名&gt; VALUES(…)</code>即可。</li>
<li><code>VALUES</code>或<code>VALUE</code>子句：该子句包含要插入的数据清单。数据清单中数据的顺序要和列的顺序相对应。</li>
</ul>
<h4 id="INSERT…SET语句"><a href="#INSERT…SET语句" class="headerlink" title="INSERT…SET语句"></a>INSERT…SET语句</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SET</span> <span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span> <span class="operator">=</span> <span class="operator">&lt;</span>值<span class="number">1</span><span class="operator">&gt;</span>,</span><br><span class="line">    <span class="operator">&lt;</span>列名<span class="number">2</span><span class="operator">&gt;</span> <span class="operator">=</span> <span class="operator">&lt;</span>值<span class="number">2</span><span class="operator">&gt;</span>,</span><br><span class="line">        …</span><br></pre></td></tr></table></figure>
<p>此语句用于直接给表中的某些列指定对应的列值，即要插入的数据的列名在<code>SET</code>子句中指定，<code>col_name</code>为指定的列名，等号后面为指定的数据，而对于未指定的列，列值会指定为该列的默认值。</p>
<p>由<code>INSERT</code>语句的两种形式可以看出：</p>
<ul>
<li>使用<code>INSERT…VALUES</code>语句可以向表中插入一行数据，也可以插入多行数据；</li>
<li>使用<code>INSERT…SET</code>语句可以指定插入行中每列的值，也可以指定部分列的值；</li>
<li><code>INSERT…SELECT</code>语句向表中插入其他表的数据；</li>
<li>采用<code>INSERT…SET</code>语句可以向表中插入部分列的值，这种方式更为灵活；</li>
<li><code>INSERT…VALUES</code>语句可以一次插入多条数据。</li>
</ul>
<p>在 MySQL 中，用单条<code>INSERT</code>语句处理多个插入要比使用多条<code>INSERT</code>语句更快。</p>
<p>当使用单条<code>INSERT</code>语句插入多行数据的时候，只需要将每行数据用圆括号括起来即可。</p>
<h2 id="向表中的全部字段添加值"><a href="#向表中的全部字段添加值" class="headerlink" title="向表中的全部字段添加值"></a>向表中的全部字段添加值</h2><p>在<code>test_db</code>数据库中创建一个课程信息表<code>tb_courses</code>，包含课程编号<code>course_id</code>、课程名称<code>course_name</code>、课程学分<code>course_grade</code>和课程备注<code>course_info</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_courses</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_name <span class="type">CHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_grade <span class="type">FLOAT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_info <span class="type">CHAR</span>(<span class="number">100</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY(course_id)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>向表中所有字段插入值的方法有两种：一种是指定所有字段名；另一种是完全不指定字段名。</p>
<p>在<code>tb_courses</code>表中插入一条新记录，<code>course_id</code>值为 1，<code>course_name</code>值为<code>Network</code>，<code>course_grade</code>值为 3，<code>info</code>值为<code>Computer Network</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_courses</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (course_id,course_name,course_grade,course_info)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Network&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;Computer Network&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>可以看到插入记录成功。在插入数据时，指定了<code>tb_courses</code>表的所有字段，因此将为每一个字段插入新的值。</p>
<p><code>INSERT</code>语句后面的列名称顺序可以不是<code>tb_courses</code>表定义时的顺序，即插入数据时，不需要按照表定义的顺序插入，只要保证值的顺序与列字段的顺序相同就可以。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_courses</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (course_name,course_info,course_id,course_grade)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;Database&#x27;</span>,<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> Database    <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>使用<code>INSERT</code>插入数据时，允许列名称列表<code>column_list</code>为空，此时值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_courses VLAUES(<span class="number">3</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">4</span>,<span class="string">&#x27;Java EE&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> Database    <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> Java        <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Java EE          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>INSERT</code>语句中没有指定插入列表，只有一个值列表。在这种情况下，值列表为每一个字段列指定插入的值，并且这些值的顺序必须和<code>tb_courses</code>表中字段定义的顺序相同。</p>
<blockquote>
<p>注意：虽然使用<code>INSERT</code>插入数据时可以忽略插入数据的列名称，若值不包含列名称，则<code>VALUES</code>关键字后面的值不仅要求完整，而且顺序必须和表定义时列的顺序相同。如果表的结构被修改，对列进行增加、删除或者位置改变操作，这些操作将使得用这种方式插入数据时的顺序也同时改变。如果指定列名称，就不会受到表结构改变的影响。</p>
</blockquote>
<h2 id="向表中指定字段添加值"><a href="#向表中指定字段添加值" class="headerlink" title="向表中指定字段添加值"></a>向表中指定字段添加值</h2><p>为表的指定字段插入数据，是在<code>INSERT</code>语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_courses</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (course_name,course_grade,course_info)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;System&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;Operation System&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> Database    <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> Java        <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Java EE          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span> <span class="keyword">System</span>      <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Operating <span class="keyword">System</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="使用-INSERT-INTO…FROM-语句复制表数据"><a href="#使用-INSERT-INTO…FROM-语句复制表数据" class="headerlink" title="使用 INSERT INTO…FROM 语句复制表数据"></a>使用 INSERT INTO…FROM 语句复制表数据</h2><p><code>INSERT INTO…SELECT…FROM</code>语句用于快速地从一个或多个表中取出数据，并将这些数据作为行数据插入另一个表中。</p>
<p><code>SELECT</code>子句返回的是一个查询到的结果集，<code>INSERT</code>语句将这个结果集插入指定表中，结果集中的每行数据的字段数、字段的数据类型都必须与被操作的表完全一致。</p>
<p>在数据库<code>test_db</code>中创建一个与<code>tb_courses</code>表结构相同的数据表<code>tb_courses_new</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_courses_new</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_name <span class="type">CHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_grade <span class="type">FLOAT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> course_info <span class="type">CHAR</span>(<span class="number">100</span>) <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY(course_id)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses_new;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>从<code>tb_courses</code>表中查询所有的记录，并将其插入<code>tb_courses_new</code>表中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_courses_new</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (course_id,course_name,course_grade,course_info)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">SELECT</span> course_id,course_name,course_grade,course_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.17</span> sec)</span><br><span class="line">Records: <span class="number">4</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses_new;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> Database    <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> Java        <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Java EE          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span> <span class="keyword">System</span>      <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Operating <span class="keyword">System</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="UPDATE：修改数据"><a href="#UPDATE：修改数据" class="headerlink" title="UPDATE：修改数据"></a>UPDATE：修改数据</h1><p>在 MySQL 中，可以使用<code>UPDATE</code>语句来修改、更新一个或多个表的数据。</p>
<h2 id="UPDATE-语句的基本语法"><a href="#UPDATE-语句的基本语法" class="headerlink" title="UPDATE 语句的基本语法"></a>UPDATE 语句的基本语法</h2><p>使用<code>UPDATE</code>语句修改单个表，语法格式为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">SET</span> 字段 <span class="number">1</span><span class="operator">=</span>值 <span class="number">1</span> [,字段 <span class="number">2</span><span class="operator">=</span>值 <span class="number">2</span>… ] [<span class="keyword">WHERE</span> 子句 ]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句] [LIMIT 子句]</span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>&lt;表名&gt;：用于指定要更新的表名称。</li>
<li><code>SET</code>子句：用于指定表中要修改的列名及其列值。其中，每个指定的列值可以是表达式，也可以是该列对应的默认值。如果指定的是默认值，可用关键字<code>DEFAULT</code>表示列值。</li>
<li><code>WHERE</code>子句：可选项。用于限定表中要修改的行。若不指定，则修改表中所有的行。</li>
<li><code>ORDER BY</code>子句：可选项。用于限定表中的行被修改的次序。</li>
<li><code>LIMIT</code>子句：可选项。用于限定被修改的行数。</li>
</ul>
<blockquote>
<p>注意：修改一行数据的多个列值时，<code>SET</code>子句的每个值用逗号分开即可。</p>
</blockquote>
<h2 id="修改表中的数据"><a href="#修改表中的数据" class="headerlink" title="修改表中的数据"></a>修改表中的数据</h2><p>在<code>tb_courses_new</code>表中，更新所有行的<code>course_grade</code>字段值为 4。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">UPDATE</span> tb_courses_new <span class="keyword">SET</span> course_grade<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line">Query OK, <span class="number">3</span> <span class="keyword">rows</span> affected (<span class="number">0.11</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">4</span>  Changed: <span class="number">3</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses_new;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> Database    <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> Java        <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Java EE          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span> <span class="keyword">System</span>      <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Operating <span class="keyword">System</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="根据条件修改表中的数据"><a href="#根据条件修改表中的数据" class="headerlink" title="根据条件修改表中的数据"></a>根据条件修改表中的数据</h2><p>在<code>tb_courses</code>表中，更新<code>course_id</code>值为 2 的记录，将<code>course_grade</code>字段值改为 3.5，将<code>course_name</code>字段值改为<code>DB</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">UPDATE</span> tb_courses_new</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">SET</span> course_name<span class="operator">=</span><span class="string">&#x27;DB&#x27;</span>,course_grade<span class="operator">=</span><span class="number">3.5</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> course_id<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.13</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses_new;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> DB          <span class="operator">|</span>          <span class="number">3.5</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> Java        <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Java EE          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">4</span> <span class="operator">|</span> <span class="keyword">System</span>      <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Operating <span class="keyword">System</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>注意：保证<code>UPDATE</code>以<code>WHERE</code>子句结束，通过<code>WHERE</code>子句指定被更新的记录所需要满足的条件，如果忽略<code>WHERE</code>子句，MySQL 将更新表中所有的行。</p>
<h1 id="DELETE：删除数据"><a href="#DELETE：删除数据" class="headerlink" title="DELETE：删除数据"></a>DELETE：删除数据</h1><p>在 MySQL 中，可以使用<code>DELETE</code>语句来删除表的一行或者多行数据。</p>
<h2 id="删除单个表中的数据"><a href="#删除单个表中的数据" class="headerlink" title="删除单个表中的数据"></a>删除单个表中的数据</h2><p>使用<code>DELETE</code>语句从单个表中删除数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [<span class="keyword">WHERE</span> 子句] [<span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句] [LIMIT 子句]</span><br></pre></td></tr></table></figure>
<p>语法说明：</p>
<ul>
<li>&lt;表名&gt;：指定要删除数据的表名。</li>
<li><code>ORDER BY</code>子句：可选项。表示删除时，表中各行将按照子句中指定的顺序进行删除。</li>
<li><code>WHERE</code>子句：可选项。表示为删除操作限定删除条件，若省略该子句，则代表删除该表中的所有行。</li>
<li><code>LIMIT</code>子句：可选项。用于告知服务器在控制命令被返回到客户端前被删除行的最大值。</li>
</ul>
<blockquote>
<p>注意：在不使用<code>WHERE</code>条件的时候，将删除所有数据。</p>
</blockquote>
<h2 id="删除表中的全部数据"><a href="#删除表中的全部数据" class="headerlink" title="删除表中的全部数据"></a>删除表中的全部数据</h2><p>删除<code>tb_courses_new</code>表中的全部数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_courses_new;</span><br><span class="line">Query OK, <span class="number">3</span> <span class="keyword">rows</span> affected (<span class="number">0.12</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses_new;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="根据条件删除表中的数据"><a href="#根据条件删除表中的数据" class="headerlink" title="根据条件删除表中的数据"></a>根据条件删除表中的数据</h2><p>在<code>tb_courses_new</code>表中，删除<code>course_id</code>为 4 的记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_courses <span class="keyword">WHERE</span> course_id<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_courses;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span> course_grade <span class="operator">|</span> course_info      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> Network     <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> Computer Network <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> Database    <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span> MySQL            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> Java        <span class="operator">|</span>            <span class="number">4</span> <span class="operator">|</span> Java EE          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+--------------+------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="TRUNCATE：清空表记录"><a href="#TRUNCATE：清空表记录" class="headerlink" title="TRUNCATE：清空表记录"></a>TRUNCATE：清空表记录</h1><p>MySQL 提供了<code>DELETE</code>和<code>TRUNCATE</code>关键字来删除表中的数据。<code>TRUNCATE</code>关键字用于完全清空一个表。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> [<span class="keyword">TABLE</span>] 表名</span><br></pre></td></tr></table></figure>
<p>其中，<code>TABLE</code>关键字可省略。</p>
<p>新建表<code>tb_student_course</code>，插入数据并查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_student_course` (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `id` <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_student_course(name) <span class="keyword">VALUES</span> (<span class="string">&#x27;Java&#x27;</span>),(<span class="string">&#x27;MySQL&#x27;</span>),(<span class="string">&#x27;Python&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">3</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">3</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_student_course;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Java   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> MySQL  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Python <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>使用<code>TRUNCATE</code>语句清空<code>tb_student_course</code>表中的记录：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> tb_student_course;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_student_course;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="TRUNCATE-和-DELETE-的区别"><a href="#TRUNCATE-和-DELETE-的区别" class="headerlink" title="TRUNCATE 和 DELETE 的区别"></a>TRUNCATE 和 DELETE 的区别</h2><p>从逻辑上说，<code>TRUNCATE</code>语句与<code>DELETE</code>语句作用相同，但是在某些情况下，两者在使用上有所区别。</p>
<ul>
<li><code>DELETE</code>是 DML 类型的语句；<code>TRUNCATE</code>是 DDL 类型的语句。它们都用来清空表中的数据。</li>
<li><code>DELETE</code>是逐行一条一条删除记录的；<code>TRUNCATE</code>则是直接删除原来的表，再重新创建一个一模一样的新表，而不是逐行删除表中的数据，执行数据比<code>DELETE</code>快。因此需要删除表中全部的数据行时，尽量使用<code>TRUNCATE</code>语句， 可以缩短执行时间。</li>
<li><code>DELETE</code>删除数据后，配合事件回滚可以找回数据；<code>TRUNCATE</code>不支持事务的回滚，数据删除后无法找回。</li>
<li><code>DELETE</code>删除数据后，系统不会重新设置自增字段的计数器；<code>TRUNCATE</code>清空表记录后，系统会重新设置自增字段的计数器。</li>
<li><code>DELETE</code>的使用范围更广，因为它可以通过<code>WHERE</code>子句指定条件来删除部分数据；而<code>TRUNCATE</code>不支持<code>WHERE</code>子句，只能删除整体。</li>
<li><code>DELETE</code>会返回删除数据的行数，但是<code>TRUNCATE</code>只会返回 0，没有任何意义。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>当不需要该表时，用<code>DROP</code>；当仍要保留该表，但要删除所有记录时，用<code>TRUNCATE</code>；当要删除部分记录时，用<code>DELETE</code>。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL查询"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/24/MySQL/MySQL%E6%9F%A5%E8%AF%A2/"
    >MySQL查询</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/24/MySQL/MySQL%E6%9F%A5%E8%AF%A2/" class="article-date">
  <time datetime="2020-04-24T09:16:51.000Z" itemprop="datePublished">2020-04-24</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="SELECT：数据表查询语句"><a href="#SELECT：数据表查询语句" class="headerlink" title="SELECT：数据表查询语句"></a>SELECT：数据表查询语句</h1><p>在 MySQL 中，可以使用<code>SELECT</code>语句来查询数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">&#123;<span class="operator">*</span> <span class="operator">|</span> <span class="operator">&lt;</span>字段列名<span class="operator">&gt;</span>&#125;</span><br><span class="line">[</span><br><span class="line">  <span class="keyword">FROM</span> <span class="operator">&lt;</span>表 <span class="number">1</span><span class="operator">&gt;</span>, <span class="operator">&lt;</span>表 <span class="number">2</span><span class="operator">&gt;</span>…</span><br><span class="line">  [<span class="keyword">WHERE</span> <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span></span><br><span class="line">  [<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span><span class="keyword">group</span> <span class="keyword">by</span> definition<span class="operator">&gt;</span></span><br><span class="line">  [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>expression<span class="operator">&gt;</span> [&#123;<span class="operator">&lt;</span>operator<span class="operator">&gt;</span> <span class="operator">&lt;</span>expression<span class="operator">&gt;</span>&#125;…]]</span><br><span class="line">  [<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span><span class="keyword">order</span> <span class="keyword">by</span> definition<span class="operator">&gt;</span>]</span><br><span class="line">  [LIMIT[<span class="operator">&lt;</span><span class="keyword">offset</span><span class="operator">&gt;</span>,] <span class="operator">&lt;</span><span class="type">row</span> count<span class="operator">&gt;</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>各条子句的含义如下：</p>
<ul>
<li><code>&#123;*|&lt;字段列名&gt;&#125;</code>包含星号通配符的字段列表，表示所要查询字段的名称。</li>
<li>&lt;表 1&gt;，&lt;表 2&gt;…，表 1 和表 2 表示查询数据的来源，可以是单个或多个。</li>
<li><code>WHERE &lt;表达式&gt;</code>是可选项，如果选择该项，将限定查询数据必须满足该查询条件。</li>
<li><code>GROUP BY&lt;字段&gt;</code>，该子句告诉 MySQL 如何显示查询出来的数据，并按照指定的字段分组。</li>
<li><code>[ORDER BY&lt;字段&gt;]</code>，该子句告诉 MySQL 按什么样的顺序显示查询出来的数据，可以进行的排序有升序（<code>ASC</code>）和降序（<code>DESC</code>），默认情况下是升序。</li>
<li><code>[LIMIT[&lt;offset&gt;，]&lt;row count&gt;]</code>，该子句告诉 MySQL 每次显示查询出来的数据条数。</li>
</ul>
<h2 id="查询表中所有字段"><a href="#查询表中所有字段" class="headerlink" title="查询表中所有字段"></a>查询表中所有字段</h2><p>查询所有字段是指查询表中所有字段的数据。MySQL 提供了以下 2 种方式查询表中的所有字段。</p>
<ul>
<li>使用<code>*</code>通配符查询所有字段</li>
<li>列出表的所有字段</li>
</ul>
<h3 id="使用-查询表的所有字段"><a href="#使用-查询表的所有字段" class="headerlink" title="使用 * 查询表的所有字段"></a>使用 * 查询表的所有字段</h3><p><code>SELECT</code>可以使用<code>*</code>查找表中所有字段的数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>
<p>使用<code>*</code>查询时，只能按照数据表中字段的顺序进行排列，不能改变字段的排列顺序。</p>
<blockquote>
<p>注意：一般情况下，除非需要使用表中所有的字段数据，否则最好不要使用通配符<code>*</code>。虽然使用通配符可以节省输入查询语句的时间，但是获取不需要的列数据通常会降低查询和所使用的应用程序的效率。使用<code>*</code>的优势是，当不知道所需列的名称时，可以通过<code>*</code>获取它们。</p>
</blockquote>
<h3 id="列出表的所有字段"><a href="#列出表的所有字段" class="headerlink" title="列出表的所有字段"></a>列出表的所有字段</h3><p><code>SELECT</code>关键字后面的字段名为需要查找的字段，因此可以将表中所有字段的名称跟在<code>SELECT</code>关键字后面。如果忘记了字段名称，可以使用<code>DESC</code>命令查看表的结构。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, dept_id, age,sex, height, login_date <span class="keyword">FROM</span> tb_students_info;</span><br></pre></td></tr></table></figure>
<p>这种查询方式比较灵活，如果需要改变字段显示的顺序，只需调整<code>SELECT</code>关键字后面的字段列表顺序即可。</p>
<h2 id="查询表中指定的字段"><a href="#查询表中指定的字段" class="headerlink" title="查询表中指定的字段"></a>查询表中指定的字段</h2><p>查询表中的某一个字段的语法格式为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br></pre></td></tr></table></figure>
<p>使用<code>SELECT</code>声明可以获取多个字段下的数据，只需要在关键字<code>SELECT</code>后面指定要查找的字段名称，不同字段名称之间用逗号<code>,</code>分隔开，最后一个字段后面不需要加逗号：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>字段名<span class="number">1</span><span class="operator">&gt;</span>, <span class="operator">&lt;</span>字段名<span class="number">2</span><span class="operator">&gt;</span>, …, <span class="operator">&lt;</span>字段名n<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> id, name, height <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+--------+</span></span><br></pre></td></tr></table></figure>
<h1 id="DISTINCT：过滤重复数据"><a href="#DISTINCT：过滤重复数据" class="headerlink" title="DISTINCT：过滤重复数据"></a>DISTINCT：过滤重复数据</h1><p>使用<code>SELECT</code>语句执行简单的数据查询时，返回的是所有匹配的记录。如果表中的某些字段没有唯一性约束，那么这些字段就可能存在重复值。为了实现查询不重复的数据，MySQL 提供了<code>DISTINCT</code>关键字。</p>
<p><code>DISTINCT</code>关键字的主要作用就是对数据表中一个或多个字段重复的数据进行过滤，只返回其中的一条数据给用户。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>其中，“字段名”为需要消除重复记录的字段名称，多个字段时用逗号隔开。</p>
<p>使用<code>DISTINCT</code>关键字时需要注意以下几点：</p>
<ul>
<li><code>DISTINCT</code>关键字只能在<code>SELECT</code>语句中使用。</li>
<li>在对一个或多个字段去重时，<code>DISTINCT</code>关键字必须在所有字段的最前面。</li>
<li>如果<code>DISTINCT</code>关键字后有多个字段，则会对多个字段进行组合去重，也就是说，只有多个字段组合起来完全是一样的情况下才会被去重。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test.student;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name     <span class="operator">|</span> age  <span class="operator">|</span> stuno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+------+-------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> lisi     <span class="operator">|</span>   <span class="number">19</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> wangwu   <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> zhaoliu  <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">27</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> wangwu   <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span>    <span class="number">28</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> age <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> name, age <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------+</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------+</span></span><br><span class="line"><span class="operator">|</span> zhangsan <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> lisi     <span class="operator">|</span>   <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> wangwu   <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> zhaoliu  <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> wangwu   <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name     <span class="operator">|</span> age  <span class="operator">|</span> stuno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+------+-------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> lisi     <span class="operator">|</span>   <span class="number">19</span> <span class="operator">|</span>    <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> wangwu   <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> zhaoliu  <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>   <span class="number">18</span> <span class="operator">|</span>    <span class="number">27</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> wangwu   <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span>    <span class="number">28</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+------+-------+</span></span><br></pre></td></tr></table></figure>
<p>因为<code>DISTINCT</code>只能返回它的目标字段，而无法返回其它字段，所以在实际情况中，我们经常使用<code>DISTINCT</code>关键字来返回不重复字段的条数。</p>
<p>查询<code>student</code>表中对<code>name</code>和<code>age</code>字段去重之后记录的条数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> name, age) <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> name,age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+</span></span><br><span class="line"><span class="operator">|</span>                        <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="AS：设置别名"><a href="#AS：设置别名" class="headerlink" title="AS：设置别名"></a>AS：设置别名</h1><p>为了查询方便，MySQL 提供了<code>AS</code>关键字来为表和字段指定别名。</p>
<h2 id="为表指定别名"><a href="#为表指定别名" class="headerlink" title="为表指定别名"></a>为表指定别名</h2><p>当表名很长或者执行一些特殊查询的时候，为了方便操作，可以为表指定一个别名，用这个别名代替表原来的名称。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;表名&gt; [AS] &lt;别名&gt;</span><br></pre></td></tr></table></figure>
<p><code>AS</code>关键字可以省略，省略后需要将表名和别名用空格隔开。</p>
<p>注意：表的别名不能与该数据库的其它表同名。字段的别名不能与该表的其它字段同名。在条件表达式中不能使用字段的别名，否则会出现<code>ERROR 1054 (42S22): Unknown column</code>这样的错误提示信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> stu.name,stu.height <span class="keyword">FROM</span> tb_students_info <span class="keyword">AS</span> stu;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br></pre></td></tr></table></figure>
<h2 id="为字段指定别名"><a href="#为字段指定别名" class="headerlink" title="为字段指定别名"></a>为字段指定别名</h2><p>在使用<code>SELECT</code>语句查询数据时，MySQL 会显示每个<code>SELECT</code>后面指定输出的字段。有时为了显示结果更加直观，我们可以为字段指定一个别名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span>] <span class="operator">&lt;</span>别名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>AS</code>关键字可以省略，省略后需要将字段名和别名用空格隔开。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">AS</span> student_name, age <span class="keyword">AS</span> student_age <span class="keyword">FROM</span> tb_students_info;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> student_name <span class="operator">|</span> student_age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> Dany         <span class="operator">|</span>          <span class="number">25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green        <span class="operator">|</span>          <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry        <span class="operator">|</span>          <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane         <span class="operator">|</span>          <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim          <span class="operator">|</span>          <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+</span></span><br></pre></td></tr></table></figure>
<p>注意：表别名只在执行查询时使用，并不在返回结果中显示。而字段定义别名之后，会返回给客户端显示，显示的字段为字段的别名。</p>
<h1 id="LIMIT：限制查询结果的条数"><a href="#LIMIT：限制查询结果的条数" class="headerlink" title="LIMIT：限制查询结果的条数"></a>LIMIT：限制查询结果的条数</h1><p><code>LIMIT</code>用于指定查询结果从哪条记录开始显示，一共显示多少条记录。</p>
<p><code>LIMIT</code>关键字有 3 种使用方式，即指定初始位置、不指定初始位置以及与<code>OFFSET</code>组合使用。</p>
<h2 id="指定初始位置"><a href="#指定初始位置" class="headerlink" title="指定初始位置"></a>指定初始位置</h2><p><code>LIMIT</code>关键字可以指定查询结果从哪条记录开始显示，显示多少条记录。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT 初始位置, 记录数</span><br></pre></td></tr></table></figure>
<p>其中，“初始位置”表示从哪条记录开始显示；“记录数”表示显示记录的条数。第一条记录的位置是 0，第二条记录的位置是 1。后面的记录依次类推。</p>
<p>注意：<code>LIMIT</code>后的两个参数必须都是正整数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info LIMIT <span class="number">3</span>,<span class="number">5</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane  <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John  <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily  <span class="operator">|</span>       <span class="number">6</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看到，该语句返回的是从第 4 条记录开始的之后的 5 条记录。<code>LIMIT</code>关键字后的第一个数字 3 表示从第 4 行开始（记录的位置从 0 开始，第 4 行的位置为 3），第二个数字 5 表示返回的行数。</p>
<h2 id="不指定初始位置"><a href="#不指定初始位置" class="headerlink" title="不指定初始位置"></a>不指定初始位置</h2><p><code>LIMIT</code>关键字不指定初始位置时，记录从第一条记录开始显示。显示记录的条数由<code>LIMIT</code>关键字指定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT 记录数</span><br></pre></td></tr></table></figure>
<p>其中，“记录数”表示显示记录的条数。如果“记录数”的值小于查询结果的总数，则会从第一条记录开始，显示指定条数的记录。如果“记录数”的值大于查询结果的总数，则会直接显示查询出来的所有记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info LIMIT <span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany  <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane  <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br></pre></td></tr></table></figure>
<p>带一个参数的<code>LIMIT</code>指定从查询结果的首行开始，唯一的参数表示返回的行数，即<code>LIMIT n</code>与<code>LIMIT 0, n</code>返回结果相同。带两个参数的<code>LIMIT</code>可返回从任何位置开始指定行数的数据。</p>
<h2 id="LIMIT和OFFSET组合使用"><a href="#LIMIT和OFFSET组合使用" class="headerlink" title="LIMIT和OFFSET组合使用"></a>LIMIT和OFFSET组合使用</h2><p><code>LIMIT</code>可以和<code>OFFSET</code>组合使用：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT 记录数 <span class="keyword">OFFSET</span> 初始位置</span><br></pre></td></tr></table></figure>
<p>参数和<code>LIMIT</code>语法中参数含义相同，“初始位置”指定从哪条记录开始显示；“记录数”表示显示记录的条数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info LIMIT <span class="number">5</span> <span class="keyword">OFFSET</span> <span class="number">3</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane  <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> John  <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> Lily  <span class="operator">|</span>       <span class="number">6</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> Susan <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+---------+------+------+--------+------------+</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看到，该语句返回的是从第 4 条记录开始的之后的 5 条记录。即<code>LIMIT 5 OFFSET 3</code>意思是获取从第 4 条记录开始的后面的 5 条记录，和<code>LIMIT 3,5</code>返回的结果相同。</p>
<h1 id="ORDER-BY：对查询结果排序"><a href="#ORDER-BY：对查询结果排序" class="headerlink" title="ORDER BY：对查询结果排序"></a>ORDER BY：对查询结果排序</h1><p>通过条件查询语句可以查询到符合用户需求的数据，但是查询到的数据一般都是按照数据最初被添加到表中的顺序来显示。为了使查询结果的顺序满足用户的要求，MySQL 提供了<code>ORDER BY</code>关键字来对查询结果进行排序。</p>
<p><code>ORDER BY</code>关键字主要用来将查询结果中的数据按照一定的顺序进行排序。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>字段名：表示需要排序的字段名称，多个字段时用逗号隔开。</li>
<li><code>ASC|DESC</code>：<code>ASC</code>表示字段按升序排序；<code>DESC</code>表示字段按降序排序。其中<code>ASC</code>为默认值。</li>
</ul>
<p>使用<code>ORDER BY</code>关键字应该注意以下几个方面：</p>
<ul>
<li><code>ORDER BY</code>关键字后可以跟子查询。</li>
<li>当排序的字段中存在空值时，<code>ORDER BY</code>会将该空值作为最小值来对待。</li>
<li><code>ORDER BY</code>指定多个字段进行排序时，MySQL 会按照字段的顺序从左到右依次进行排序。</li>
</ul>
<h2 id="单字段排序"><a href="#单字段排序" class="headerlink" title="单字段排序"></a>单字段排序</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_info <span class="keyword">ORDER</span> <span class="keyword">BY</span> height;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> dept_id <span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Green  <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-10</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dany   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-09</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> Jane   <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> F    <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-12</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> Jim    <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Henry  <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> M    <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-31</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+------+------+--------+------------+</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看到，MySQL 对查询的<code>height</code>字段的数据按数值的大小进行了升序排序。</p>
<h2 id="多字段排序"><a href="#多字段排序" class="headerlink" title="多字段排序"></a>多字段排序</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">ORDER</span> <span class="keyword">BY</span> height, name;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br></pre></td></tr></table></figure>
<p>注意：在对多个字段进行排序时，排序的第一个字段必须有相同的值，才会对第二个字段进行排序。如果第一个字段数据中所有的值都是唯一的，MySQL 将不再对第二个字段进行排序。</p>
<p>默认情况下，查询数据按字母升序进行排序（A～Z），但数据的排序并不仅限于此，还可以使用<code>ORDER BY</code>中的<code>DESC</code>对查询结果进行降序排序（Z～A）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, height <span class="keyword">FROM</span> tb_student_info <span class="keyword">ORDER</span> <span class="keyword">BY</span> height <span class="keyword">DESC</span>, name <span class="keyword">ASC</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br></pre></td></tr></table></figure>
<p><code>DESC</code>关键字只对前面的列进行降序排列，在这里只对<code>height</code>字段进行降序。因此，<code>height</code>按降序排序，而<code>name</code>仍按升序排序。如果想在多个列上进行降序排序，必须对每个列指定<code>DESC</code>关键字。</p>
<h1 id="WHERE：条件查询数据"><a href="#WHERE：条件查询数据" class="headerlink" title="WHERE：条件查询数据"></a>WHERE：条件查询数据</h1><p>如果需要有条件的从数据表中查询数据，可以使用<code>WHERE</code>关键字来指定查询条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHERE</span> 查询条件</span><br></pre></td></tr></table></figure>
<p>查询条件可以是：</p>
<ul>
<li>带比较运算符和逻辑运算符的查询条件</li>
<li>带<code>BETWEEN AND</code>关键字的查询条件</li>
<li>带<code>IS NULL</code>关键字的查询条件</li>
<li>带<code>IN</code>关键字的查询条件</li>
<li>带<code>LIKE</code>关键字的查询条件</li>
</ul>
<h2 id="单一条件的查询语句"><a href="#单一条件的查询语句" class="headerlink" title="单一条件的查询语句"></a>单一条件的查询语句</h2><p>单一条件指的是在<code>WHERE</code>关键字后只有一个查询条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> height<span class="operator">=</span><span class="number">170</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+</span></span><br><span class="line"><span class="operator">|</span> Susan <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+</span></span><br></pre></td></tr></table></figure>
<p>可以看到，查询结果中记录的<code>height</code>字段的值等于 170。如果根据指定的条件进行查询时，数据表中没有符合查询条件的记录，系统会提示<code>Empty set(0.00sec)</code>。</p>
<h2 id="多条件的查询语句"><a href="#多条件的查询语句" class="headerlink" title="多条件的查询语句"></a>多条件的查询语句</h2><p>在<code>WHERE</code>关键词后可以有多个查询条件。多个查询条件时用逻辑运算符<code>AND（&amp;&amp;）、OR（||）</code>或<code>XOR</code>隔开。</p>
<ul>
<li><code>AND</code>：记录满足所有查询条件时，才会被查询出来。</li>
<li><code>OR</code>：记录满足任意一个查询条件时，才会被查询出来。</li>
<li><code>XOR</code>：记录满足其中一个条件，并且不满足另一个条件时，才会被查询出来。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, age, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> age<span class="operator">&gt;</span><span class="number">21</span> <span class="keyword">AND</span> height<span class="operator">&gt;=</span><span class="number">175</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, age, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> age<span class="operator">&gt;</span><span class="number">21</span> <span class="keyword">OR</span> height<span class="operator">&gt;=</span><span class="number">175</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, age, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> age<span class="operator">&gt;</span><span class="number">21</span> XOR height<span class="operator">&gt;=</span><span class="number">175</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> age  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> Dany  <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane  <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily  <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom   <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+--------+</span></span><br></pre></td></tr></table></figure>
<p><code>OR、AND</code>和<code>XOR</code>可以一起使用，但是在使用时要注意运算符的优先级。</p>
<h1 id="LIKE：模糊查询"><a href="#LIKE：模糊查询" class="headerlink" title="LIKE：模糊查询"></a>LIKE：模糊查询</h1><p><code>LIKE</code>关键字主要用于搜索匹配字段中的指定内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[NOT] LIKE &#x27;字符串&#x27;</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li><code>NOT</code>：可选参数，字段中的内容与指定的字符串不匹配时满足条件。</li>
<li>字符串：指定用来匹配的字符串。“字符串”可以是一个很完整的字符串，也可以包含通配符。</li>
</ul>
<p><code>LIKE</code>关键字支持百分号<code>%</code>和下划线<code>_</code>通配符。</p>
<p>通配符是一种特殊语句，主要用来模糊查询。当不知道真正字符或者懒得输入完整名称时，可以使用通配符来代替一个或多个真正的字符。</p>
<h2 id="带有-通配符的查询"><a href="#带有-通配符的查询" class="headerlink" title="带有 % 通配符的查询"></a>带有 % 通配符的查询</h2><p><code>%</code>代表任何长度的字符串，字符串的长度可以为 0。例如，<code>a%b</code>表示以字母<code>a</code>开头，以字母<code>b</code>结尾的任意长度的字符串。该字符串可以代表<code>ab、acb、accb、accrb</code>等字符串。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;T%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br></pre></td></tr></table></figure>
<p>注意：匹配的字符串必须加单引号或双引号。</p>
<p><code>NOT LIKE</code>表示字符串不匹配时满足条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> NAME <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;T%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> NAME  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> Dany  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="带有“-”通配符的查询"><a href="#带有“-”通配符的查询" class="headerlink" title="带有“_”通配符的查询"></a>带有“_”通配符的查询</h2><p><code>_</code>只能代表单个字符，字符的长度不能为 0。例如，<code>a_b</code>可以代表<code>acb、adb、aub</code>等字符串。</p>
<p>在<code>tb_students_info</code>表中，查找所有以字母<code>y</code>结尾，且<code>y</code>前面只有 4 个字母的学生姓名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;____y&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> Henry <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="LIKE-区分大小写"><a href="#LIKE-区分大小写" class="headerlink" title="LIKE 区分大小写"></a>LIKE 区分大小写</h2><p>默认情况下，<code>LIKE</code>关键字匹配字符的时候是不区分大小写的。如果需要区分大小写，可以加入<code>BINARY</code>关键字。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;t%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="type">BINARY</span> <span class="string">&#x27;t%&#x27;</span>;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="使用通配符的注意事项和技巧"><a href="#使用通配符的注意事项和技巧" class="headerlink" title="使用通配符的注意事项和技巧"></a>使用通配符的注意事项和技巧</h2><p>下面是使用通配符的一些注意事项：</p>
<ul>
<li>注意大小写。MySQL 默认是不区分大小写的。如果区分大小写，像<code>Tom</code>这样的数据就不能被<code>t%</code>所匹配到。</li>
<li>注意尾部空格，尾部空格会干扰通配符的匹配。例如，<code>T% </code>就不能匹配到<code>Tom</code>。</li>
<li>注意<code>NULL</code>。<code>%</code>通配符可以到匹配任意字符，但是不能匹配<code>NULL</code>。也就是说<code>%</code>匹配不到数据表中值为<code>NULL</code>的记录。</li>
</ul>
<p>下面是一些使用通配符要记住的技巧。</p>
<ul>
<li>不要过度使用通配符，如果其它操作符能达到相同的目的，应该使用其它操作符。因为 MySQL 对通配符的处理一般会比其他操作符花费更长的时间。</li>
<li>在确定使用通配符后，除非绝对有必要，否则不要把它们用在字符串的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的。</li>
<li>仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。</li>
</ul>
<p>如果查询内容中包含通配符，可以使用<code>\</code>转义符。例如，在<code>tb_students_info</code>表中，将学生姓名<code>Dany</code>修改为<code>Dany%</code>后，查询以<code>%</code>结尾的学生姓名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> test.`tb_students_info` <span class="keyword">WHERE</span> NAME <span class="keyword">LIKE</span> <span class="string">&#x27;%\%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> NAME  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> Dany<span class="operator">%</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br></pre></td></tr></table></figure>
<h1 id="BETWEEN-AND：范围查询"><a href="#BETWEEN-AND：范围查询" class="headerlink" title="BETWEEN AND：范围查询"></a>BETWEEN AND：范围查询</h1><p><code>BETWEEN AND</code>关键字用来判断字段的数值是否在指定范围内。</p>
<p><code>BETWEEN AND</code>需要两个参数，即范围的起始值和终止值。如果字段值在指定的范围内，则这些记录被返回。如果不在指定范围内，则不会被返回。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">NOT</span>] <span class="keyword">BETWEEN</span> 取值<span class="number">1</span> <span class="keyword">AND</span> 取值<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li><code>NOT</code>：可选参数，表示指定范围之外的值。如果字段值不满足指定范围内的值，则这些记录被返回。</li>
<li>取值1：表示范围的起始值。</li>
<li>取值2：表示范围的终止值。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, age <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br></pre></td></tr></table></figure>
<p>查询结果中包含学生年龄为 20 和 23 的记录，这就说明，在 MySQL 中，<code>BETWEEN AND</code>能匹配指定范围内的所有值，包括起始值和终止值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, age <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> age <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> Dany <span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim  <span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br></pre></td></tr></table></figure>
<p>在表<code>tb_students_info</code>中查询注册日期在<code>2015-10-01</code>和<code>2016-05-01</code>之间的学生信息。SQL 语句和运行结果如下。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, login_date <span class="keyword">FROM</span> tb_students_info</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> login_date <span class="keyword">BETWEEN</span> <span class="string">&#x27;2015-10-01&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;2016-05-01&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------+</span></span><br><span class="line"><span class="operator">|</span> Jim   <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John  <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily  <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------+</span></span><br></pre></td></tr></table></figure>
<h1 id="IS-NULL：空值查询"><a href="#IS-NULL：空值查询" class="headerlink" title="IS NULL：空值查询"></a>IS NULL：空值查询</h1><p><code>IS NULL</code>关键字用来判断字段的值是否为空值（<code>NULL</code>）。空值不同于 0，也不同于空字符串。</p>
<p>如果字段的值是空值，则满足查询条件，该记录将被查询出来。如果字段的值不是空值，则不满足查询条件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IS [NOT] NULL</span><br></pre></td></tr></table></figure>
<p>其中，<code>NOT</code>是可选参数，表示字段值不是空值时满足条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> `name`, `login_date` <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> login_date <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="operator">|</span> NAME   <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br></pre></td></tr></table></figure>
<p><code>IS NOT NULL</code>表示查询字段值不为空的记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> `name`, login_date <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> login_date <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> login_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------+</span></span><br><span class="line"><span class="operator">|</span> Jim   <span class="operator">|</span> <span class="number">2016</span><span class="number">-01</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John  <span class="operator">|</span> <span class="number">2015</span><span class="number">-11</span><span class="number">-11</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily  <span class="operator">|</span> <span class="number">2016</span><span class="number">-02</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan <span class="operator">|</span> <span class="number">2015</span><span class="number">-10</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------+</span></span><br></pre></td></tr></table></figure>
<h1 id="GROUP-BY分组查询"><a href="#GROUP-BY分组查询" class="headerlink" title="GROUP BY分组查询"></a>GROUP BY分组查询</h1><p><code>GROUP BY</code>关键字可以根据一个或多个字段对查询结果进行分组。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span>  <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中，“字段名”表示需要分组的字段名称，多个字段时用逗号隔开。</p>
<h2 id="GROUP-BY单独使用"><a href="#GROUP-BY单独使用" class="headerlink" title="GROUP BY单独使用"></a>GROUP BY单独使用</h2><p>单独使用<code>GROUP BY</code>关键字时，查询结果会只显示每个分组的第一条记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> `name`, `sex` <span class="keyword">FROM</span> tb_students_info <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> sex  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+</span></span><br><span class="line"><span class="operator">|</span> Henry <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Dany  <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+</span></span><br></pre></td></tr></table></figure>
<p>结果中只显示了两条记录，这两条记录的<code>sex</code>字段的值分别为“女”和“男”。</p>
<h2 id="GROUP-BY-与-GROUP-CONCAT"><a href="#GROUP-BY-与-GROUP-CONCAT" class="headerlink" title="GROUP BY 与 GROUP_CONCAT()"></a>GROUP BY 与 GROUP_CONCAT()</h2><p><code>GROUP BY</code>关键字可以和<code>GROUP_CONCAT()</code>函数一起使用。<code>GROUP_CONCAT()</code>函数会把每个分组的字段值都显示出来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> `sex`, GROUP_CONCAT(name) <span class="keyword">FROM</span> tb_students_info <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> sex  <span class="operator">|</span> GROUP_CONCAT(name)         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> 女   <span class="operator">|</span> Henry,Jim,John,Thomas,Tom  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 男   <span class="operator">|</span> Dany,Green,Jane,Lily,Susan <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------------------------+</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看到，查询结果分为两组，<code>sex</code>字段值为“女”的是一组，值为“男”的是一组，且每组的学生姓名都显示出来了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> age, sex, GROUP_CONCAT(name) <span class="keyword">FROM</span> tb_students_info <span class="keyword">GROUP</span> <span class="keyword">BY</span> age, sex;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> age  <span class="operator">|</span> sex  <span class="operator">|</span> GROUP_CONCAT(name) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">21</span> <span class="operator">|</span> 女   <span class="operator">|</span> John               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 女   <span class="operator">|</span> Thomas             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span> 男   <span class="operator">|</span> Jane,Lily          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 女   <span class="operator">|</span> Henry,Tom          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">23</span> <span class="operator">|</span> 男   <span class="operator">|</span> Green,Susan        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">24</span> <span class="operator">|</span> 女   <span class="operator">|</span> Jim                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">25</span> <span class="operator">|</span> 男   <span class="operator">|</span> Dany               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+--------------------+</span></span><br></pre></td></tr></table></figure>
<p>上面实例在分组过程中，先按照<code>age</code>字段进行分组，当<code>age</code>字段值相等时，再把<code>age</code>字段值相等的记录按照<code>sex</code>字段进行分组。</p>
<p>多个字段分组查询时，会先按照第一个字段进行分组。如果第一个字段中有相同的值，MySQL 才会按照第二个字段进行分组。如果第一个字段中的数据都是唯一的，那么 MySQL 将不再对第二个字段进行分组。</p>
<h2 id="GROUP-BY-与聚合函数"><a href="#GROUP-BY-与聚合函数" class="headerlink" title="GROUP BY 与聚合函数"></a>GROUP BY 与聚合函数</h2><p>在数据统计时，<code>GROUP BY</code>关键字经常和聚合函数一起使用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> sex, <span class="built_in">COUNT</span>(sex) <span class="keyword">FROM</span> tb_students_info <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+</span></span><br><span class="line"><span class="operator">|</span> sex  <span class="operator">|</span> <span class="built_in">COUNT</span>(sex) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+</span></span><br><span class="line"><span class="operator">|</span> 女   <span class="operator">|</span>          <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 男   <span class="operator">|</span>          <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+</span></span><br></pre></td></tr></table></figure>
<h2 id="GROUP-BY-与-WITH-ROLLUP"><a href="#GROUP-BY-与-WITH-ROLLUP" class="headerlink" title="GROUP BY 与 WITH ROLLUP"></a>GROUP BY 与 WITH ROLLUP</h2><p><code>WITH POLLUP</code>关键字用来在所有记录的最后加上一条记录，这条记录是上面所有记录的总和，即统计记录数量。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> sex,GROUP_CONCAT(name) <span class="keyword">FROM</span> tb_students_info <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> sex  <span class="operator">|</span> GROUP_CONCAT(name)                                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> 女   <span class="operator">|</span> Henry,Jim,John,Thomas,Tom                            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 男   <span class="operator">|</span> Dany,Green,Jane,Lily,Susan                           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> Henry,Jim,John,Thomas,Tom,Dany,Green,Jane,Lily,Susan <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------------------------------------------------+</span></span><br></pre></td></tr></table></figure>
<p>查询结果显示，<code>GROUP_CONCAT(name)</code>显示了每个分组的<code>name</code>字段值。同时，最后一条记录的<code>GROUP_CONCAT(name)</code>字段的值刚好是上面分组<code>name</code>字段值的总和。</p>
<h1 id="HAVING：过滤分组"><a href="#HAVING：过滤分组" class="headerlink" title="HAVING：过滤分组"></a>HAVING：过滤分组</h1><p>可以使用<code>HAVING</code>关键字对分组后的数据进行过滤。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">HAVING</span> <span class="operator">&lt;</span>查询条件<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>HAVING</code>关键字和<code>WHERE</code>关键字都可以用来过滤数据，且<code>HAVING</code>支持<code>WHERE</code>关键字中所有的操作符和语法。</p>
<p>但是<code>WHERE</code>和<code>HAVING</code>关键字也存在以下几点差异：</p>
<ul>
<li>一般情况下，<code>WHERE</code>用于过滤数据行，而<code>HAVING</code>用于过滤分组。</li>
<li><code>WHERE</code>查询条件中不可以使用聚合函数，而<code>HAVING</code>查询条件中可以使用聚合函数。</li>
<li><code>WHERE</code>在数据分组前进行过滤，而<code>HAVING</code>在数据分组后进行过滤 。</li>
<li><code>WHERE</code>针对数据库文件进行过滤，而<code>HAVING</code>针对查询结果进行过滤。也就是说，<code>WHERE</code>根据数据表中的字段直接进行过滤，而<code>HAVING</code>是根据前面已经查询出的字段进行过滤。</li>
<li><code>WHERE</code>查询条件中不可以使用字段别名，而<code>HAVING</code>查询条件中可以使用字段别名。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, sex, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">HAVING</span> height<span class="operator">&gt;</span><span class="number">150</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, sex, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> height<span class="operator">&gt;</span><span class="number">150</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">160</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">158</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">162</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span> 男   <span class="operator">|</span>    <span class="number">170</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">165</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+--------+</span></span><br></pre></td></tr></table></figure>
<p>上述实例中，因为在<code>SELECT</code>关键字后已经查询出了<code>height</code>字段，所以<code>HAVING</code>和<code>WHERE</code>都可以使用。但是如果<code>SELECT</code>关键字后没有查询出<code>height</code>字段，MySQL 就会报错。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, sex <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> height<span class="operator">&gt;</span><span class="number">150</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> sex  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span> Dany   <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green  <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry  <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane   <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim    <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John   <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily   <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan  <span class="operator">|</span> 男   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom    <span class="operator">|</span> 女   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, sex <span class="keyword">FROM</span> tb_students_info <span class="keyword">HAVING</span> height<span class="operator">&gt;</span><span class="number">150</span>;</span><br><span class="line">ERROR <span class="number">1054</span> (<span class="number">42</span>S22): <span class="literal">Unknown</span> <span class="keyword">column</span> <span class="string">&#x27;height&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;having clause&#x27;</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看出，如果<code>SELECT</code>关键字后没有查询出<code>HAVING</code>查询条件中使用的<code>height</code>字段，MySQL 会提示错误信息：<code>having</code>子句中的列<code>height</code>未知”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> GROUP_CONCAT(name), sex, height <span class="keyword">FROM</span> tb_students_info </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> height <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(height)<span class="operator">&gt;</span><span class="number">170</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> GROUP_CONCAT(name) <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> John               <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">172</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim                <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">175</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas             <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">178</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry              <span class="operator">|</span> 女   <span class="operator">|</span>    <span class="number">185</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+------+--------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> GROUP_CONCAT(name), sex, height <span class="keyword">FROM</span> tb_students_info <span class="keyword">WHERE</span> <span class="built_in">AVG</span>(height)<span class="operator">&gt;</span><span class="number">170</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> height;</span><br><span class="line">ERROR <span class="number">1111</span> (HY000): Invalid use <span class="keyword">of</span> <span class="keyword">group</span> <span class="keyword">function</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看出，如果在<code>WHERE</code>查询条件中使用聚合函数，MySQL 会提示错误信息：无效使用组函数。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL常用函数汇总"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/21/MySQL/MySQL%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB/"
    >MySQL常用函数汇总</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/21/MySQL/MySQL%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB/" class="article-date">
  <time datetime="2020-04-21T08:41:23.000Z" itemprop="datePublished">2020-04-21</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>MySQL 内部函数可以帮助用户更加方便地处理表中的数据。</p>
<p><code>SELECT、INSERT、UPDATE</code>和<code>DELETE</code>语句及其子句（例如<code>WHERE、ORDER BY、HAVING</code>等）中都可以使用 MySQL 函数。</p>
<p>MySQL 函数包括数学函数、字符串函数、日期和时间函数、条件判断函数、系统信息函数和加密函数等。</p>
<h1 id="数值型函数"><a href="#数值型函数" class="headerlink" title="数值型函数"></a>数值型函数</h1><h2 id="ABS函数：求绝对值"><a href="#ABS函数：求绝对值" class="headerlink" title="ABS函数：求绝对值"></a>ABS函数：求绝对值</h2><p>绝对值函数<code>ABS(x)</code>返回<code>x</code>的绝对值。正数的绝对值是其本身，负数的绝对值为其相反数，0 的绝对值是 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">5</span>), <span class="built_in">ABS</span>(<span class="number">-2.4</span>), <span class="built_in">ABS</span>(<span class="number">-24</span>), <span class="built_in">ABS</span>(<span class="number">0</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ABS</span>(<span class="number">5</span>) <span class="operator">|</span> <span class="built_in">ABS</span>(<span class="number">-2.4</span>) <span class="operator">|</span> <span class="built_in">ABS</span>(<span class="number">-24</span>) <span class="operator">|</span> <span class="built_in">ABS</span>(<span class="number">0</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span>       <span class="number">2.4</span> <span class="operator">|</span>       <span class="number">24</span> <span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-----------+----------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.10</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="SQRT函数：求二次方根"><a href="#SQRT函数：求二次方根" class="headerlink" title="SQRT函数：求二次方根"></a>SQRT函数：求二次方根</h2><p>平方根函数<code>SQRT(x)</code>返回非负数<code>x</code>的二次方根。负数没有平方根，返回<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">SQRT</span>(<span class="number">25</span>), <span class="built_in">SQRT</span>(<span class="number">120</span>), <span class="built_in">SQRT</span>(<span class="number">-9</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">SQRT</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="built_in">SQRT</span>(<span class="number">120</span>)          <span class="operator">|</span> <span class="built_in">SQRT</span>(<span class="number">-9</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------+----------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span> <span class="number">10.954451150103322</span> <span class="operator">|</span>     <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.06</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="MOD函数：求余数"><a href="#MOD函数：求余数" class="headerlink" title="MOD函数：求余数"></a>MOD函数：求余数</h2><p>求余函数<code>MOD(x,y)</code>返回<code>x</code>被<code>y</code>除后的余数，<code>MOD()</code>对于带有小数部分的数值也起作用，它返回除法运算后的余数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">63</span>,<span class="number">8</span>), <span class="built_in">MOD</span>(<span class="number">120</span>,<span class="number">10</span>), <span class="built_in">MOD</span>(<span class="number">15.5</span>,<span class="number">3</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">MOD</span>(<span class="number">63</span>,<span class="number">8</span>) <span class="operator">|</span> <span class="built_in">MOD</span>(<span class="number">120</span>,<span class="number">10</span>) <span class="operator">|</span> <span class="built_in">MOD</span>(<span class="number">15.5</span>,<span class="number">3</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+-------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">7</span> <span class="operator">|</span>           <span class="number">0</span> <span class="operator">|</span>         <span class="number">0.5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="CEIL和CELING函数：向上取整"><a href="#CEIL和CELING函数：向上取整" class="headerlink" title="CEIL和CELING函数：向上取整"></a>CEIL和CELING函数：向上取整</h2><p>取整函数<code>CEIL(x)</code>和<code>CEILING(x)</code>的意义相同，返回不小于<code>x</code>的最小整数值，返回值转化为一个<code>BIGINT</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">-2.5</span>), <span class="built_in">CEILING</span>(<span class="number">2.5</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">CEIL</span>(<span class="number">-2.5</span>) <span class="operator">|</span> <span class="built_in">CEILING</span>(<span class="number">2.5</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">-2</span> <span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="FLOOR函数：向下取整"><a href="#FLOOR函数：向下取整" class="headerlink" title="FLOOR函数：向下取整"></a>FLOOR函数：向下取整</h2><p><code>FLOOR(x)</code>函数返回小于<code>x</code>的最大整数值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">5</span>), <span class="built_in">FLOOR</span>(<span class="number">5.66</span>), <span class="built_in">FLOOR</span>(<span class="number">-4</span>), <span class="built_in">FLOOR</span>(<span class="number">-4.66</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">FLOOR</span>(<span class="number">5</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span>(<span class="number">5.66</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span>(<span class="number">-4</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span>(<span class="number">-4.66</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span>        <span class="number">-4</span> <span class="operator">|</span>           <span class="number">-5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+-----------+--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="RAND函数：生成随机数"><a href="#RAND函数：生成随机数" class="headerlink" title="RAND函数：生成随机数"></a>RAND函数：生成随机数</h2><p><code>RAND()</code>函数可以产生一个在 0 和 1 之间的随机数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SELECT</span> RAND(), RAND(), RAND();</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> RAND()           <span class="operator">|</span> RAND()          <span class="operator">|</span> RAND()           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.45464584925645</span> <span class="operator">|</span> <span class="number">0.1824410643265</span> <span class="operator">|</span> <span class="number">0.54826780459682</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br></pre></td></tr></table></figure>
<p>当使用整数作为参数调用时，<code>RAND()</code>使用该值作为随机数的种子发生器。每次种子使用给定值生成，<code>RAND()</code>将产生一个可重复的系列数字：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> RAND(<span class="number">1</span>), RAND(), RAND(<span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> RAND(<span class="number">1</span>)             <span class="operator">|</span> RAND()             <span class="operator">|</span> RAND(<span class="number">1</span>)             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.40540353712197724</span> <span class="operator">|</span> <span class="number">0.7901452330780637</span> <span class="operator">|</span> <span class="number">0.40540353712197724</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+--------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可知，当向<code>RAND()</code>函数中传入一个整数作为参数是，<code>RAND()</code>函数产生的随机数可以重复。</p>
<h2 id="SIGN函数：返回参数的符号"><a href="#SIGN函数：返回参数的符号" class="headerlink" title="SIGN函数：返回参数的符号"></a>SIGN函数：返回参数的符号</h2><p>符号函数<code>SIGN(x)</code>返回参数的符号，<code>x</code>的值为负、零和正时返回结果依次为 -1、0 和 1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> SIGN(<span class="number">-6</span>), SIGN(<span class="number">0</span>), SIGN(<span class="number">34</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+---------+----------+</span></span><br><span class="line"><span class="operator">|</span> SIGN(<span class="number">-6</span>) <span class="operator">|</span> SIGN(<span class="number">0</span>) <span class="operator">|</span> SIGN(<span class="number">34</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+---------+----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">-1</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+---------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="POW和POWER函数：求次方"><a href="#POW和POWER函数：求次方" class="headerlink" title="POW和POWER函数：求次方"></a>POW和POWER函数：求次方</h2><p><code>POW(x,y)</code>函数和<code>POWER(x,y)</code>函数用于计算<code>x</code>的<code>y</code>次方。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> POW(<span class="number">5</span>,<span class="number">-2</span>), POW(<span class="number">10</span>,<span class="number">3</span>), POW(<span class="number">100</span>,<span class="number">0</span>), <span class="built_in">POWER</span>(<span class="number">4</span>,<span class="number">3</span>), <span class="built_in">POWER</span>(<span class="number">6</span>,<span class="number">-3</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-----------+------------+------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> POW(<span class="number">5</span>,<span class="number">-2</span>) <span class="operator">|</span> POW(<span class="number">10</span>,<span class="number">3</span>) <span class="operator">|</span> POW(<span class="number">100</span>,<span class="number">0</span>) <span class="operator">|</span> <span class="built_in">POWER</span>(<span class="number">4</span>,<span class="number">3</span>) <span class="operator">|</span> <span class="built_in">POWER</span>(<span class="number">6</span>,<span class="number">-3</span>)          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-----------+------------+------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">0.04</span> <span class="operator">|</span>      <span class="number">1000</span> <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span>         <span class="number">64</span> <span class="operator">|</span> <span class="number">0.004629629629629629</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-----------+------------+------------+----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="SIN函数：求正弦值"><a href="#SIN函数：求正弦值" class="headerlink" title="SIN函数：求正弦值"></a>SIN函数：求正弦值</h2><p>正弦函数<code>SIN(x)</code>返回<code>x</code>的正弦值，其中<code>x</code>为弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">SIN</span>(<span class="number">1</span>), <span class="built_in">SIN</span>(<span class="number">0.5</span><span class="operator">*</span>PI());</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">SIN</span>(<span class="number">1</span>)             <span class="operator">|</span> <span class="built_in">SIN</span>(<span class="number">0.5</span><span class="operator">*</span>PI()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.8414709848078965</span> <span class="operator">|</span>             <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.15</span> sec)</span><br></pre></td></tr></table></figure>
<p>提示：<code>PI()</code>函数返回圆周率（3.141593）。</p>
<h2 id="ASIN函数：求反正弦值"><a href="#ASIN函数：求反正弦值" class="headerlink" title="ASIN函数：求反正弦值"></a>ASIN函数：求反正弦值</h2><p>反正弦函数<code>ASIN(x)</code>返回<code>x</code>的反正弦值，若<code>x</code>不在 -1 到 1 的范围之内，则返回<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ASIN</span>(<span class="number">0.8414709848078965</span>), <span class="built_in">ASIN</span>(<span class="number">2</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ASIN</span>(<span class="number">0.8414709848078965</span>) <span class="operator">|</span> <span class="built_in">ASIN</span>(<span class="number">2</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span>                        <span class="number">1</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="COS函数：求余弦值"><a href="#COS函数：求余弦值" class="headerlink" title="COS函数：求余弦值"></a>COS函数：求余弦值</h2><p>余弦函数<code>COS(x)</code>返回<code>x</code>的余弦值，<code>x</code>为弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">COS</span>(<span class="number">1</span>), <span class="built_in">COS</span>(<span class="number">0</span>), <span class="built_in">COS</span>(PI());</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">COS</span>(<span class="number">1</span>)             <span class="operator">|</span> <span class="built_in">COS</span>(<span class="number">0</span>) <span class="operator">|</span> <span class="built_in">COS</span>(PI()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.5403023058681398</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>        <span class="number">-1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="ACOS函数：求反余弦值"><a href="#ACOS函数：求反余弦值" class="headerlink" title="ACOS函数：求反余弦值"></a>ACOS函数：求反余弦值</h2><p>反余弦函数<code>ACOS(x)</code>。<code>x</code>值的范围必须在 -1 和 1 之间，否则返回<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ACOS</span>(<span class="number">2</span>), <span class="built_in">ACOS</span>(<span class="number">1</span>), <span class="built_in">ACOS</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ACOS</span>(<span class="number">2</span>) <span class="operator">|</span> <span class="built_in">ACOS</span>(<span class="number">1</span>) <span class="operator">|</span> <span class="built_in">ACOS</span>(<span class="number">-1</span>)          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+-------------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span> <span class="number">3.141592653589793</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="TAN函数：求正切值"><a href="#TAN函数：求正切值" class="headerlink" title="TAN函数：求正切值"></a>TAN函数：求正切值</h2><p>正切函数<code>TAN(x)</code>返回<code>x</code>的正切值，<code>x</code>为给定的弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">TAN</span>(<span class="number">1</span>), <span class="built_in">TAN</span>(<span class="number">0</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">TAN</span>(<span class="number">1</span>)             <span class="operator">|</span> <span class="built_in">TAN</span>(<span class="number">0</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1.5574077246549023</span> <span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="ATAN函数：求反正切值"><a href="#ATAN函数：求反正切值" class="headerlink" title="ATAN函数：求反正切值"></a>ATAN函数：求反正切值</h2><p>反正切<code>ATAN(x)</code>返回<code>x</code>的反正切值，正切为<code>x</code>的值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ATAN</span>(<span class="number">1.5574077246549023</span>), <span class="built_in">ATAN</span>(<span class="number">0</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ATAN</span>(<span class="number">1.5574077246549023</span>) <span class="operator">|</span> <span class="built_in">ATAN</span>(<span class="number">0</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span>                        <span class="number">1</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="COT函数：求余切值"><a href="#COT函数：求余切值" class="headerlink" title="COT函数：求余切值"></a>COT函数：求余切值</h2><p>余切函数<code>COT(x)</code>返回<code>x</code>的余切值，<code>x</code>是给定的弧度值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> COT(<span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> COT(<span class="number">1</span>)             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.6420926159343306</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h1><h2 id="LENGTH函数：获取字符串长度"><a href="#LENGTH函数：获取字符串长度" class="headerlink" title="LENGTH函数：获取字符串长度"></a>LENGTH函数：获取字符串长度</h2><p><code>LENGTH(str)</code>函数的返回值为字符串的字节长度，使用<code>uft8</code>编码字符集时，一个汉字是 3 个字节，一个数字或字母是一个字节。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;name&#x27;</span>), LENGTH(<span class="string">&#x27;数据库&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span>LENGTH(<span class="string">&#x27;name&#x27;</span>)  <span class="operator">|</span> LENGTH(<span class="string">&#x27;数据库&#x27;</span>)    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span>                   <span class="number">9</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="CONCAT函数：字符串拼接"><a href="#CONCAT函数：字符串拼接" class="headerlink" title="CONCAT函数：字符串拼接"></a>CONCAT函数：字符串拼接</h2><p><code>CONCAT(sl, s2, ...)</code>函数返回结果为连接参数产生的字符串，或许有一个或多个参数。</p>
<p>若有任何一个参数为<code>NULL</code>，则返回值为<code>NULL</code>。若所有参数均为非二进制字符串，则结果为非二进制字符串。若自变量中含有任一二进制字符串，则结果为一个二进制字符串。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;MySQL&#x27;</span>,<span class="string">&#x27;5.7&#x27;</span>), CONCAT(<span class="string">&#x27;MySQL&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> CONCAT(<span class="string">&#x27;MySQL&#x27;</span>,<span class="string">&#x27;5.7&#x27;</span>) <span class="operator">|</span> CONCAT(<span class="string">&#x27;MySQL&#x27;</span>,<span class="keyword">NULL</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> MySQL5<span class="number">.7</span>              <span class="operator">|</span> <span class="keyword">NULL</span>                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="INSERT函数：替换字符串"><a href="#INSERT函数：替换字符串" class="headerlink" title="INSERT函数：替换字符串"></a>INSERT函数：替换字符串</h2><p>替换字符串函数<code>INSERT(s1，x，len，s2)</code>返回字符串<code>s1</code>，子字符串起始于<code>x</code>位置，并且用<code>len</code>个字符长的字符串代替<code>s2</code>。</p>
<p>若<code>x</code>超过字符串长度，则返回值为原始字符串。假如<code>len</code>的长度大于其他字符串的长度，则从位置<code>x</code>开始替换。若任何一个参数为<code>NULL</code>，则返回值为<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;Football&#x27;</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="string">&#x27;Play&#x27;</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;Football&#x27;</span>,<span class="number">-1</span>,<span class="number">4</span>,<span class="string">&#x27;Play&#x27;</span>) <span class="keyword">AS</span> col2,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;Football&#x27;</span>,<span class="number">3</span>,<span class="number">20</span>,<span class="string">&#x27;Play&#x27;</span>) <span class="keyword">AS</span> col3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> col1     <span class="operator">|</span> col2     <span class="operator">|</span> col3   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> FPlayall <span class="operator">|</span> Football <span class="operator">|</span> FoPlay <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可知：</p>
<ul>
<li>第一个函数<code>INSERT(&#39;Football&#39;，2，4，&#39;Play&#39;)</code>将<code>Football</code>从第 2 个字符开始长度为 4 的字符串替换为<code>Play</code>，结果为<code>FPlayall</code>；</li>
<li>第二个函数<code>(&#39;Football&#39;，-1，4，&#39;Play&#39;)</code>中的起始位置 -1 超出了字符串长度，直接返回原字符串；</li>
<li>第三个函数<code>INSERT(&#39;Football&#39;，3，20，&#39;Play&#39;)</code>替换长度超出了原字符串长度，则从第 3 个字符开始，截取后面所有的字符，并替换为指定字符<code>Play</code>，结果为<code>FoPlay</code>。</li>
</ul>
<h2 id="LOWER函数：将字母转换成小写"><a href="#LOWER函数：将字母转换成小写" class="headerlink" title="LOWER函数：将字母转换成小写"></a>LOWER函数：将字母转换成小写</h2><p>字母小写转换函数<code>LOWER(str)</code>可以将字符串<code>str</code>中的字母字符全部转换成小写。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;BLUE&#x27;</span>), <span class="built_in">LOWER</span>(<span class="string">&#x27;Blue&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;BLUE&#x27;</span>) <span class="operator">|</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;Blue&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> blue          <span class="operator">|</span> blue          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="UPPER函数：将字母转换成大写"><a href="#UPPER函数：将字母转换成大写" class="headerlink" title="UPPER函数：将字母转换成大写"></a>UPPER函数：将字母转换成大写</h2><p>字母大写转换函数<code>UPPER(str)</code>可以将字符串<code>str</code>中的字母字符全部转换成大写。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;green&#x27;</span>), <span class="built_in">UPPER</span>(<span class="string">&#x27;Green&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;green&#x27;</span>) <span class="operator">|</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;Green&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> GREEN          <span class="operator">|</span> GREEN          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="LEFT函数：从左侧截取字符串"><a href="#LEFT函数：从左侧截取字符串" class="headerlink" title="LEFT函数：从左侧截取字符串"></a>LEFT函数：从左侧截取字符串</h2><p><code>LEFT(s, n)</code>函数返回字符串<code>s</code>最左边的<code>n</code>个字符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">2</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> My              <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可知，返回字符串<code>MySQL</code>左边开始的长度为 2 的子字符串，结果为<code>My</code>。</p>
<h2 id="RIGHT函数：从右侧截取字符串"><a href="#RIGHT函数：从右侧截取字符串" class="headerlink" title="RIGHT函数：从右侧截取字符串"></a>RIGHT函数：从右侧截取字符串</h2><p><code>RIGHT(s, n)</code>函数返回字符串<code>s</code>最右边的<code>n</code>个字符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">3</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">SQL</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="TRIM函数：删除空格"><a href="#TRIM函数：删除空格" class="headerlink" title="TRIM函数：删除空格"></a>TRIM函数：删除空格</h2><p>删除空格函数<code>TRIM(s)</code>删除字符串<code>s</code>两侧的空格。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;[   mobile   ]&#x27;</span>, CONCAT(<span class="string">&#x27;[&#x27;</span>,<span class="built_in">TRIM</span>(<span class="string">&#x27;   mobile   &#x27;</span>),<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [   mobile   ] <span class="operator">|</span> CONCAT(<span class="string">&#x27;[&#x27;</span>,<span class="built_in">TRIM</span>(<span class="string">&#x27;   mobile   &#x27;</span>),<span class="string">&#x27;]&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [   mobile   ] <span class="operator">|</span> [mobile]                             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+--------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.07</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="REPLACE函数：字符串替换"><a href="#REPLACE函数：字符串替换" class="headerlink" title="REPLACE函数：字符串替换"></a>REPLACE函数：字符串替换</h2><p>替换函数<code>REPLACE(s，s1，s2)</code>使用字符串<code>s2</code>替换字符串<code>s</code>中所有的字符串<code>s1</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;aaa.mysql.com&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> REPLACE(<span class="string">&#x27;aaa.mysql.com&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> www.mysql.com                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="SUBSTRING函数：截取字符串"><a href="#SUBSTRING函数：截取字符串" class="headerlink" title="SUBSTRING函数：截取字符串"></a>SUBSTRING函数：截取字符串</h2><p>获取子串函数<code>SUBSTRING(s，n，len)</code>带有<code>len</code>参数的格式，从字符串<code>s</code>返回一个长度同<code>len</code>字符相同的子字符串，起始于位置<code>n</code>。</p>
<p>也可能对<code>n</code>使用一个负值。假若这样，则子字符串的位置起始于字符串结尾的第<code>n</code>个字符，即倒数第<code>n</code>个字符，而不是字符串的开头位置。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;computer&#x27;</span>,<span class="number">3</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;computer&#x27;</span>,<span class="number">3</span>,<span class="number">4</span>) <span class="keyword">AS</span> col2,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;computer&#x27;</span>,<span class="number">-3</span>) <span class="keyword">AS</span> col3,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;computer&#x27;</span>,<span class="number">-5</span>,<span class="number">3</span>) <span class="keyword">AS</span> col4;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> col1   <span class="operator">|</span> col2 <span class="operator">|</span> col3 <span class="operator">|</span> col4 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> mputer <span class="operator">|</span> mput <span class="operator">|</span> ter  <span class="operator">|</span> put  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="REVERSE函数：反转字符串"><a href="#REVERSE函数：反转字符串" class="headerlink" title="REVERSE函数：反转字符串"></a>REVERSE函数：反转字符串</h2><p>字符串逆序函数<code>REVERSE(s)</code>可以将字符串<code>s</code>反转，返回的字符串的顺序和<code>s</code>字符串的顺序相反。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> REVERSE(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> REVERSE(<span class="string">&#x27;hello&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> olleh            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h1><h2 id="MAX函数：查询指定列的最大值"><a href="#MAX函数：查询指定列的最大值" class="headerlink" title="MAX函数：查询指定列的最大值"></a>MAX函数：查询指定列的最大值</h2><p><code>MAX()</code>函数是用来返回指定列中的最大值。</p>
<p>为了方便理解，首先创建一个学生成绩表<code>tb_students_score</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> use test_db;</span><br><span class="line">Database changed</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> student_name <span class="operator">|</span> student_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> Dany         <span class="operator">|</span>            <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Green        <span class="operator">|</span>            <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Henry        <span class="operator">|</span>            <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jane         <span class="operator">|</span>            <span class="number">98</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Jim          <span class="operator">|</span>            <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> John         <span class="operator">|</span>            <span class="number">94</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Lily         <span class="operator">|</span>           <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Susan        <span class="operator">|</span>            <span class="number">96</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Thomas       <span class="operator">|</span>            <span class="number">93</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Tom          <span class="operator">|</span>            <span class="number">89</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+---------------+</span></span><br><span class="line"><span class="number">10</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.13</span> sec)</span><br></pre></td></tr></table></figure>
<p>在<code>tb_students_score</code>表中查找最高的成绩。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(student_score) <span class="keyword">AS</span> max_score <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> max_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.06</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>MAX()</code>函数不仅适用于查找数值类型，也可应用于字符类型。</p>
<p>在<code>tb_students_score</code>表中查找<code>student_name</code>的最大值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(student_name) <span class="keyword">AS</span> max_name <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> max_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> Tom      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<code>MAX()</code>函数还可以返回任意列中的最大值，包括返回字符类型的最大值。在对字符类型的数据进行比较时，按照字符的 ASCII 码值大小进行比较，从<code>a～z</code>，<code>a</code>的 ASCII 码最小，<code>z</code>的最大。在比较时，先比较第一个字符，如果相等，继续比较下一个字符，一直到两个字符不相等或者字符结束为止。例如，<code>b</code>与<code>t</code>比较时，<code>t</code>为最大值；<code>bcd</code>与<code>bca</code>比较时，<code>bcd</code>为最大值。</p>
</blockquote>
<h2 id="MIN函数：查询指定列的最小值"><a href="#MIN函数：查询指定列的最小值" class="headerlink" title="MIN函数：查询指定列的最小值"></a>MIN函数：查询指定列的最小值</h2><p><code>MIN()</code>函数是用来返回查询列中的最小值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(student_score) <span class="keyword">AS</span> min_score <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> min_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：<code>MIN()</code>函数与<code>MAX()</code>函数类似，不仅适用于查找数值类型，也可应用于字符类型。</p>
</blockquote>
<h2 id="COUNT函数：统计查询结果的行数"><a href="#COUNT函数：统计查询结果的行数" class="headerlink" title="COUNT函数：统计查询结果的行数"></a>COUNT函数：统计查询结果的行数</h2><p><code>COUNT()</code>函数统计数据表中包含的记录行的总数，或者根据查询结果返回列中包含的数据行数，使用方法有以下两种：</p>
<ul>
<li><code>COUNT(*)</code>计算表中总的行数，无论某列有数值或者为空值。</li>
<li><code>COUNT(字段名)</code>计算指定列下总的行数，计算时将忽略空值的行。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(student_name) <span class="keyword">AS</span> students_number <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> students_number <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>提示：在计算总数的时候对待<code>NULL</code>值的方式是，指定列的值为空的行被<code>COUNT()</code>函数忽略，但若不指定列，而在<code>COUNT()</code>函数中使用星号<code>*</code>，则所有记录都不忽略。</p>
<h2 id="SUM函数：求和"><a href="#SUM函数：求和" class="headerlink" title="SUM函数：求和"></a>SUM函数：求和</h2><p><code>SUM()</code>是一个求总和的函数，返回指定列值的总和。</p>
<p>如果在没有返回匹配行<code>SELECT</code>语句中使用<code>SUM</code>函数，则<code>SUM</code>函数返回<code>NULL</code>，而不是 0。</p>
<p><code>SUM</code>函数忽略计算中的<code>NULL</code>值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">SUM</span>(student_score) <span class="keyword">AS</span> score_sum <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> score_sum <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">942</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：<code>SUM()</code>函数在计算时，忽略列值为<code>NULL</code>的行。</p>
</blockquote>
<h2 id="AVG函数：求平均值"><a href="#AVG函数：求平均值" class="headerlink" title="AVG函数：求平均值"></a>AVG函数：求平均值</h2><p><code>AVG()</code>函数通过计算返回的行数和每一行数据的和，求得指定列数据的平均值。</p>
<p>在<code>tb_students_score</code>表中，查询所有学生成绩的平均值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(student_score) <span class="keyword">AS</span> score_avg <span class="keyword">FROM</span> tb_students_score;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> score_avg <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">94.2000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：使用<code>AVG()</code>函数时，参数为要计算的列名称，若要得到多个列的平均值，则需要在每一列都使用<code>AVG()</code>函数。</p>
</blockquote>
<h1 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h1><h2 id="CURDATE和CURRENT-DATE函数：获取系统当前日期"><a href="#CURDATE和CURRENT-DATE函数：获取系统当前日期" class="headerlink" title="CURDATE和CURRENT_DATE函数：获取系统当前日期"></a>CURDATE和CURRENT_DATE函数：获取系统当前日期</h2><p><code>CURDATE()</code>和<code>CURRENT_DATE()</code>函数的作用相同，将当前日期按照<code>YYYY-MM-DD</code>或<code>YYYYMMDD</code>格式的值返回，具体格式根据函数用在字符串或数字语境中而定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> CURDATE(), <span class="built_in">CURRENT_DATE</span>(), <span class="built_in">CURRENT_DATE</span>()<span class="operator">+</span><span class="number">0</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> CURDATE()  <span class="operator">|</span> <span class="built_in">CURRENT_DATE</span>() <span class="operator">|</span> <span class="built_in">CURRENT_DATE</span>()<span class="operator">+</span><span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-01</span>     <span class="operator">|</span>         <span class="number">20170401</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，两个函数的作用相同，返回了相同的系统当前日期，<code>CURDATE()+0</code>将当前日期值转换为数值型的。</p>
<h2 id="CURTIME和CURRENT-TIME函数：获取系统当前时间"><a href="#CURTIME和CURRENT-TIME函数：获取系统当前时间" class="headerlink" title="CURTIME和CURRENT_TIME函数：获取系统当前时间"></a>CURTIME和CURRENT_TIME函数：获取系统当前时间</h2><p><code>CURTIME()</code>和<code>CURRENT_TIME()</code>函数的作用相同，将当前时间以<code>HH:MM:SS</code>或<code>HHMMSS</code>格式返回，具体格式根据函数用在字符串或数字语境中而定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> CURTIME(),<span class="built_in">CURRENT_TIME</span>(),<span class="built_in">CURRENT_TIME</span>()<span class="operator">+</span><span class="number">0</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> CURTIME() <span class="operator">|</span> <span class="built_in">CURRENT_TIME</span>() <span class="operator">|</span> <span class="built_in">CURRENT_TIME</span>()<span class="operator">+</span><span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">19</span>:<span class="number">39</span>:<span class="number">51</span>  <span class="operator">|</span> <span class="number">19</span>:<span class="number">39</span>:<span class="number">51</span>       <span class="operator">|</span>           <span class="number">193951</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，两个函数返回的结果相同，都返回了当前的系统时间。<code>CURRENT_TIME()+0</code>是将当前日期值转换为数值型的。</p>
<h2 id="NOW和SYSDATE函数：获取当前时间日期"><a href="#NOW和SYSDATE函数：获取当前时间日期" class="headerlink" title="NOW和SYSDATE函数：获取当前时间日期"></a>NOW和SYSDATE函数：获取当前时间日期</h2><p><code>NOW()</code>和<code>SYSDATE()</code>函数的作用相同，都是返回当前日期和时间值，格式为<code>YYYY-MM-DD HH:MM:SS</code>或<code>YYYYMMDDHHMMSS</code>，具体格式根据函数用在字符串或数字语境中而定。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> NOW(),SYSDATE();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> NOW()               <span class="operator">|</span> SYSDATE()           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-01</span> <span class="number">19</span>:<span class="number">36</span>:<span class="number">52</span> <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-01</span> <span class="number">19</span>:<span class="number">36</span>:<span class="number">52</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>虽然在 MySQL 中<code>NOW()</code>和<code>SYSDATE()</code>都表示当前时间，但是<code>NOW()</code>取的是语句开始执行的时间，而<code>SYSDATE()</code>取的是语句执行过程中动态的实时时间。</p>
<p>先查询了<code>NOW()</code>和<code>SYSDATE()</code>，然后<code>sleep</code>了 3 秒，再查询<code>NOW()</code>和<code>SYSDATE()</code>，结果如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> now(), sysdate(), sleep(<span class="number">3</span>), now(), sysdate();</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+------------------------+-------------+-----------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> now()                 <span class="operator">|</span> sysdate()              <span class="operator">|</span> sleep(<span class="number">3</span>)    <span class="operator">|</span> now()                 <span class="operator">|</span> sysdate()           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+------------------------+-------------+------------------- ---+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span> <span class="number">10</span>:<span class="number">59</span>:<span class="number">39</span>   <span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span> <span class="number">10</span>:<span class="number">59</span>:<span class="number">39</span>    <span class="operator">|</span>        <span class="number">0</span>    <span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span> <span class="number">10</span>:<span class="number">59</span>:<span class="number">39</span>   <span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span> <span class="number">10</span>:<span class="number">59</span>:<span class="number">42</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+------------------------+-------------+-----------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">3.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，<code>NOW()</code>函数始终获取的是 SQL 语句开始执行的时间，而<code>SYSDATE()</code>函数则是动态获取的实时时间。</p>
<h2 id="UNIX-TIMESTAMP函数：获取UNIX时间戳"><a href="#UNIX-TIMESTAMP函数：获取UNIX时间戳" class="headerlink" title="UNIX_TIMESTAMP函数：获取UNIX时间戳"></a>UNIX_TIMESTAMP函数：获取UNIX时间戳</h2><p><code>UNIX_TIMESTAMP(date)</code>若无参数调用，返回一个无符号整数类型的<code>UNIX</code>时间戳（<code>1970-01-01 00:00:00 GMT</code>之后的秒数）。</p>
<p>若用<code>date</code>来调用<code>UNIX_TIMESTAMP()</code>，它会将参数值以<code>1970-01-01 00:00:00 GMT</code>后的秒数的形式返回。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> UNIX_TIMESTAMP(), UNIX_TIMESTAMP(NOW()), NOW();</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> UNIX_TIMESTAMP() <span class="operator">|</span> UNIX_TIMESTAMP(NOW()) <span class="operator">|</span> NOW()               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1551251270</span> <span class="operator">|</span>            <span class="number">1551251270</span> <span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span> <span class="number">15</span>:<span class="number">07</span>:<span class="number">50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="FROM-UNIXTIME函数：时间戳转日期"><a href="#FROM-UNIXTIME函数：时间戳转日期" class="headerlink" title="FROM_UNIXTIME函数：时间戳转日期"></a>FROM_UNIXTIME函数：时间戳转日期</h2><p><code>FROM_UNIXTIME(date)</code>函数把<code>UNIX</code>时间戳转换为普通格式的日期时间值，与<code>UNIX_TIMESTAMP()</code>函数互为反函数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> FROM_UNIXTIME(<span class="number">1150051270</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="operator">|</span> FROM_UNIXTIME(<span class="number">1150051270</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2006</span><span class="number">-06</span><span class="number">-12</span> <span class="number">02</span>:<span class="number">41</span>:<span class="number">10</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="MONTH函数：获取指定日期的月份"><a href="#MONTH函数：获取指定日期的月份" class="headerlink" title="MONTH函数：获取指定日期的月份"></a>MONTH函数：获取指定日期的月份</h2><p><code>MONTH(date)</code>函数返回指定<code>date</code>对应的月份，范围为 1～12。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="string">&#x27;2017-12-15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">MONTH</span>(<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">12</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="MONTHNAME函数：获取指定日期月份的英文名称"><a href="#MONTHNAME函数：获取指定日期月份的英文名称" class="headerlink" title="MONTHNAME函数：获取指定日期月份的英文名称"></a>MONTHNAME函数：获取指定日期月份的英文名称</h2><p><code>MONTHNAME(date)</code>函数返回日期<code>date</code>对应月份的英文全名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> MONTHNAME(<span class="string">&#x27;2017-12-15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> MONTHNAME(<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> December                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="DAYNAME函数：获取指定日期的星期名称"><a href="#DAYNAME函数：获取指定日期的星期名称" class="headerlink" title="DAYNAME函数：获取指定日期的星期名称"></a>DAYNAME函数：获取指定日期的星期名称</h2><p><code>DAYNAME(date)</code>函数返回<code>date</code>对应的工作日英文名称，例如<code>Sunday、Monday</code>等。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DAYNAME(<span class="string">&#x27;2006-06-12&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> DAYNAME(<span class="string">&#x27;2006-06-12&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> Monday                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="DAYOFWEEK函数：获取日期对应的周索引"><a href="#DAYOFWEEK函数：获取日期对应的周索引" class="headerlink" title="DAYOFWEEK函数：获取日期对应的周索引"></a>DAYOFWEEK函数：获取日期对应的周索引</h2><p><code>DAYOFWEEK(d)</code>函数返回<code>d</code>对应的一周中的索引（位置）。1 表示周日，2 表示周一，……，7 表示周六。这些索引值对应于 ODBC 标准。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DAYOFWEEK(<span class="string">&#x27;2017-12-15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> DAYOFWEEK(<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可知，2017 年 12 月 15 日为周五，因此返回其对应的索引值为 6。</p>
<h2 id="WEEK函数：获取指定日期是一年中的第几周"><a href="#WEEK函数：获取指定日期是一年中的第几周" class="headerlink" title="WEEK函数：获取指定日期是一年中的第几周"></a>WEEK函数：获取指定日期是一年中的第几周</h2><p><code>WEEK()</code>函数计算日期<code>date</code>是一年中的第几周。<code>WEEK(date,mode)</code>函数允许指定星期是否起始于周日或周一，以及返回值的范围是否为 0<del>52 或 1</del>53。</p>
<p><code>WEEK</code>函数接受两个参数：</p>
<ul>
<li><code>date</code>是要获取周数的日期。</li>
<li><code>mode</code>是一个可选参数，用于确定周数计算的逻辑。</li>
</ul>
<p>如果忽略<code>mode</code>参数，默认情况下<code>WEEK</code>函数将使用<code>default_week_format</code>系统变量的值。要获取<code>default_week_format</code>变量的当前值，请使用<code>SHOW VARIABLES</code>语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;default_week_format&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name       <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> default_week_format <span class="operator">|</span> <span class="number">0</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> WEEK(<span class="string">&#x27;2018-10-25&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> WEEK(<span class="string">&#x27;2018-10-25&#x27;</span>,<span class="number">1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span>                   <span class="number">43</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可知，2018-10-25 是一年中的第 43 周。</p>
<h2 id="DAYOFYEAR函数：获取指定日期在一年中的位置"><a href="#DAYOFYEAR函数：获取指定日期在一年中的位置" class="headerlink" title="DAYOFYEAR函数：获取指定日期在一年中的位置"></a>DAYOFYEAR函数：获取指定日期在一年中的位置</h2><p><code>DAYOFYEAR(d)</code>函数返回<code>d</code>是一年中的第几天，范围为 1~366。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DAYOFYEAR(<span class="string">&#x27;2017-12-15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> DAYOFYEAR(<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span>                     <span class="number">349</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="DAYOFMONTH函数：获取指定日期在一个月的位置"><a href="#DAYOFMONTH函数：获取指定日期在一个月的位置" class="headerlink" title="DAYOFMONTH函数：获取指定日期在一个月的位置"></a>DAYOFMONTH函数：获取指定日期在一个月的位置</h2><p><code>DAYOFMONTH(d)</code>函数返回<code>d</code>是一个月中的第几天，范围为 1~31。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DAYOFMONTH(<span class="string">&#x27;2017-12-15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+</span></span><br><span class="line"><span class="operator">|</span> DAYOFMONTH(<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="YEAR函数：获取年份"><a href="#YEAR函数：获取年份" class="headerlink" title="YEAR函数：获取年份"></a>YEAR函数：获取年份</h2><p><code>YEAR()</code>函数可以从指定日期值中来获取年份值。</p>
<p><code>YEAR()</code>函数需要接受<code>date</code>参数，并返回日期的年份。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">YEAR</span>(<span class="type">date</span>);</span><br></pre></td></tr></table></figure>
<p><code>YEAR()</code>函数返回的年份值范围为 1000 到 9999，如果日期为零，<code>YEAR()</code>函数返回 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(NOW());</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">YEAR</span>(NOW()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2019</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="TIME-TO-SEC函数：将时间转换为秒值"><a href="#TIME-TO-SEC函数：将时间转换为秒值" class="headerlink" title="TIME_TO_SEC函数：将时间转换为秒值"></a>TIME_TO_SEC函数：将时间转换为秒值</h2><p><code>TIME_TO_SEC(time)</code>函数返回将参数<code>time</code>转换为秒数的时间值，转换公式为“小时 ×3600+ 分钟 ×60+ 秒”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIME_TO_SEC(<span class="string">&#x27;15:15:15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> TIME_TO_SEC(<span class="string">&#x27;15:15:15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span>                   <span class="number">54915</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="SEC-TO-TIME函数：将秒值转换为时间格式"><a href="#SEC-TO-TIME函数：将秒值转换为时间格式" class="headerlink" title="SEC_TO_TIME函数：将秒值转换为时间格式"></a>SEC_TO_TIME函数：将秒值转换为时间格式</h2><p><code>SEC_TO_TIME(seconds)</code>函数返回将参数<code>seconds</code>转换为小时、分钟和秒数的时间值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> SEC_TO_TIME(<span class="string">&#x27;54925&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> SEC_TO_TIME(<span class="string">&#x27;54925&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">15</span>:<span class="number">15</span>:<span class="number">25</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="DATE-ADD和ADDDATE函数：向日期添加指定时间间隔"><a href="#DATE-ADD和ADDDATE函数：向日期添加指定时间间隔" class="headerlink" title="DATE_ADD和ADDDATE函数：向日期添加指定时间间隔"></a>DATE_ADD和ADDDATE函数：向日期添加指定时间间隔</h2><p><code>DATE_ADD(date,INTERVAL expr type)</code>和<code>ADDDATE(date,INTERVAL expr type)</code>两个函数的作用相同，都是用于执行日期的加运算。</p>
<p><code>DATE_ADD()</code>和<code>ADDDATE()</code>函数有两个参数：</p>
<ul>
<li><code>date</code>是<code>DATE</code>或<code>DATETIME</code>的起始值。</li>
<li><code>INTERVAL expr type</code>是要添加到起始日期值的间隔值。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DATE_ADD(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>) <span class="keyword">AS</span> C1,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> DATE_ADD(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="type">INTERVAL</span> <span class="string">&#x27;1:1&#x27;</span> MINUTE_SECOND) <span class="keyword">AS</span> C2,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ADDDATE(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>) <span class="keyword">AS</span> C3;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> C1                  <span class="operator">|</span> C2                  <span class="operator">|</span> C3                  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2018</span><span class="number">-11</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> <span class="number">2018</span><span class="number">-11</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">01</span>:<span class="number">00</span> <span class="operator">|</span> <span class="number">2018</span><span class="number">-11</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> ADDDATE(<span class="string">&#x27;2017-11-30 23:59:59&#x27;</span>, <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ADDDATE(<span class="string">&#x27;2017-11-30 23:59:59&#x27;</span>,<span class="type">INTERVAL</span> <span class="string">&#x27;1:1&#x27;</span> MINUTE_SECOND) <span class="keyword">AS</span> col2;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> col1                <span class="operator">|</span> col2                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">01</span>:<span class="number">00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="DATE-SUB和SUBDATE函数：日期减法运算"><a href="#DATE-SUB和SUBDATE函数：日期减法运算" class="headerlink" title="DATE_SUB和SUBDATE函数：日期减法运算"></a>DATE_SUB和SUBDATE函数：日期减法运算</h2><p><code>DATE_SUB(date,INTERVAL expr type)</code>和<code>SUBDATE(date,INTERVAL expr type)</code>两个函数作用相同，都是执行日期的减法运算。</p>
<p><code>DATE_SUB()</code>和<code>SUBDATE()</code>函数接受两个参数：</p>
<ul>
<li><code>date</code>是<code>DATE</code>或<code>DATETIME</code>的起始值。</li>
<li><code>expr</code>是一个字符串，用于确定从起始日期减去的间隔值。<code>type</code>是<code>expr</code>可解析的间隔单位，例如<code>DAY，HOUR</code>等。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DATE_SUB(<span class="string">&#x27;2018-01-02&#x27;</span>,<span class="type">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> C1,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> SUBDATE(<span class="string">&#x27;2018-01-02&#x27;</span>,<span class="type">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> C2,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> DATE_SUB(<span class="string">&#x27;2018-01-01 00:01:00&#x27;</span>,<span class="type">INTERVAL</span> <span class="string">&#x27;0 0:1:1&#x27;</span> DAY_SECOND) <span class="keyword">AS</span> C3;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> C1         <span class="operator">|</span> C2         <span class="operator">|</span> C3                  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2017</span><span class="number">-12</span><span class="number">-31</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：<code>DATE_ADD(date,INTERVAL expr type)</code>和<code>DATE_SUB(date,INTERVAL expr type)</code>函数在指定加减的时间段时也可以指定负值，加法的负值即返回原始时间之前的日期和时间，减法的负值即返回原始时间之后的日期和时间。</p>
</blockquote>
<h2 id="ADDTIME函数：时间加法运算"><a href="#ADDTIME函数：时间加法运算" class="headerlink" title="ADDTIME函数：时间加法运算"></a>ADDTIME函数：时间加法运算</h2><p><code>ADDTIME(time,expr)</code>函数用于执行时间的加法运算。添加<code>expr</code>到<code>time</code>并返回结果。</p>
<p>其中：<code>time</code>是一个时间或日期时间表达式，<code>expr</code>是一个时间表达式。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> ADDTIME(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="string">&#x27;0:1:1&#x27;</span>), ADDTIME(<span class="string">&#x27;10:30:59&#x27;</span>,<span class="string">&#x27;5:10:37&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> ADDTIME(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="string">&#x27;0:1:1&#x27;</span>) <span class="operator">|</span> ADDTIME(<span class="string">&#x27;10:30:59&#x27;</span>,<span class="string">&#x27;5:10:37&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2018</span><span class="number">-11</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">01</span>:<span class="number">00</span>                    <span class="operator">|</span> <span class="number">15</span>:<span class="number">41</span>:<span class="number">36</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="SUBTIME函数：时间减法运算"><a href="#SUBTIME函数：时间减法运算" class="headerlink" title="SUBTIME函数：时间减法运算"></a>SUBTIME函数：时间减法运算</h2><p><code>SUBTIME(time,expr)</code>函数用于执行时间的减法运算。</p>
<p>其中：函数返回<code>time</code>。<code>expr</code>表示的值和格式<code>time</code>相同。<code>time</code>是一个时间或日期时间表达式，<code>expr</code>是一个时间。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="string">&#x27;0:1:1&#x27;</span>), SUBTIME(<span class="string">&#x27;10:30:59&#x27;</span>,<span class="string">&#x27;5:12:37&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> SUBTIME(<span class="string">&#x27;2018-10-31 23:59:59&#x27;</span>,<span class="string">&#x27;0:1:1&#x27;</span>) <span class="operator">|</span> SUBTIME(<span class="string">&#x27;10:30:59&#x27;</span>,<span class="string">&#x27;5:12:37&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2018</span><span class="number">-10</span><span class="number">-31</span> <span class="number">23</span>:<span class="number">58</span>:<span class="number">58</span>                    <span class="operator">|</span> <span class="number">05</span>:<span class="number">18</span>:<span class="number">22</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------+-------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="DATEDIFF函数：获取两个日期的时间间隔"><a href="#DATEDIFF函数：获取两个日期的时间间隔" class="headerlink" title="DATEDIFF函数：获取两个日期的时间间隔"></a>DATEDIFF函数：获取两个日期的时间间隔</h2><p><code>DATEDIFF(date1，date2)</code>返回起始时间<code>date1</code>和结束时间<code>date2</code>之间的天数。<code>date1</code>和<code>date2</code>为日期或<code>date-and-time</code>表达式。计算时只用到这些值的日期部分。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DATEDIFF(<span class="string">&#x27;2017-11-30&#x27;</span>,<span class="string">&#x27;2017-11-29&#x27;</span>) <span class="keyword">AS</span> COL1, DATEDIFF(<span class="string">&#x27;2017-11-30&#x27;</span>,<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="keyword">AS</span> col2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> COL1 <span class="operator">|</span> col2 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可知，<code>DATEDIFF()</code>函数返回<code>date1-date2</code>后的值，因此<code>DATEDIFF(&#39;2017-11-30&#39;，&#39;2017-11-29&#39;)</code>的返回值为 1，<code>DATEDIFF(&#39;2017-11-30 23：59：59&#39;，&#39;2017-12-15&#39;)</code>的返回值为 -15。</p>
<h2 id="DATE-FORMAT函数：格式化指定的日期"><a href="#DATE-FORMAT函数：格式化指定的日期" class="headerlink" title="DATE_FORMAT函数：格式化指定的日期"></a>DATE_FORMAT函数：格式化指定的日期</h2><p><code>DATE_FORMAT(date，format)</code>函数是根据<code>format</code>指定的格式显示<code>date</code>值。</p>
<p><code>DATE_FORMAT()</code>函数接受两个参数：</p>
<ul>
<li><code>date</code>：是要格式化的有效日期值</li>
<li><code>format</code>：是由预定义的说明符组成的格式字符串，每个说明符前面都有一个百分比字符(%)。</li>
</ul>
<p>主要的<code>format</code>格式如下表所示。</p>
<table>
<thead>
<tr>
<th align="center">说明符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%a</td>
<td align="center">工作日的缩写名称(Sun~Sat)</td>
</tr>
<tr>
<td align="center">%b</td>
<td align="center">月份的缩写名称(Jan…Dec)</td>
</tr>
<tr>
<td align="center">%c</td>
<td align="center">月份，数字形式(0~12)</td>
</tr>
<tr>
<td align="center">%D</td>
<td align="center">带有英语后缀的该月日期(0th, 2st, 3nd,…）</td>
</tr>
<tr>
<td align="center">%d</td>
<td align="center">该月日期，数字形式（00~31)</td>
</tr>
<tr>
<td align="center">%e</td>
<td align="center">该月日期，数字形式（(0~31)</td>
</tr>
<tr>
<td align="center">%f</td>
<td align="center">微秒(000000 …999999)</td>
</tr>
<tr>
<td align="center">%H</td>
<td align="center">以 2 位数表示 24 小时(00~23)</td>
</tr>
<tr>
<td align="center">%h, %I</td>
<td align="center">以 2 位数表示 12 小时(01~12)</td>
</tr>
<tr>
<td align="center">%i</td>
<td align="center">分钟，数字形式(00~59)</td>
</tr>
<tr>
<td align="center">%j</td>
<td align="center">—年中的天数(001~366)</td>
</tr>
<tr>
<td align="center">%k</td>
<td align="center">以 24 小时(0~23)表示</td>
</tr>
<tr>
<td align="center">%l</td>
<td align="center">以12小时(1~12)表示</td>
</tr>
<tr>
<td align="center">%M</td>
<td align="center">月份名称(January~December)</td>
</tr>
<tr>
<td align="center">%m</td>
<td align="center">月份，数字形式(00~12)</td>
</tr>
<tr>
<td align="center">%p</td>
<td align="center">上午(AM) 或下午(PM)</td>
</tr>
<tr>
<td align="center">%r</td>
<td align="center">时间，12小时制(小时 (hh): 分钟 (mm) : 秒数 (ss) 后加 AM 或 PM)</td>
</tr>
<tr>
<td align="center">%S, %s</td>
<td align="center">以 2 位数形式表示秒(00~59)</td>
</tr>
<tr>
<td align="center">%T</td>
<td align="center">时间，24 小时制(小时 (hh): 分钟 (mm): 秒数 (ss))</td>
</tr>
<tr>
<td align="center">%U</td>
<td align="center">周(00~53)，其中周日为每周的第一天</td>
</tr>
<tr>
<td align="center">%u</td>
<td align="center">周(00~53)，其中周一为每周的第一天</td>
</tr>
<tr>
<td align="center">%V</td>
<td align="center">周(01~53)，其中周日为每周的第一天，和％X同时使用</td>
</tr>
<tr>
<td align="center">%v</td>
<td align="center">周(01~53)，其中周一为每周的第一天，和%x同时使用</td>
</tr>
<tr>
<td align="center">%W</td>
<td align="center">星期标识（周日、周一、周二…周六）</td>
</tr>
<tr>
<td align="center">%w</td>
<td align="center">—周中的每日（0&#x3D; 周日…6&#x3D; 周六）</td>
</tr>
<tr>
<td align="center">%X</td>
<td align="center">该周的年份，其中周日为每周的第一天，数字形式，4 位数，和％V同时使用</td>
</tr>
<tr>
<td align="center">%x</td>
<td align="center">该周的年份，其中周一为每周的第一天，数字形式，4位数，和%v同时使用</td>
</tr>
<tr>
<td align="center">%Y</td>
<td align="center">4 位数形式表示年份</td>
</tr>
<tr>
<td align="center">%y</td>
<td align="center">2 位数形式表示年份</td>
</tr>
<tr>
<td align="center">%%</td>
<td align="center">%一个文字字符</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DATE_FORMAT(<span class="string">&#x27;2017-11-15 21:45:00&#x27;</span>,<span class="string">&#x27;%W %M %D %Y&#x27;</span>) <span class="keyword">AS</span> col1,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> DATE_FORMAT(<span class="string">&#x27;2017-11-15 21:45:00&#x27;</span>,<span class="string">&#x27;%h:i% %p %M %D %Y&#x27;</span>) <span class="keyword">AS</span> col2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> col1                         <span class="operator">|</span> col2                       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> Wednesday November <span class="number">15</span>th <span class="number">2017</span> <span class="operator">|</span> <span class="number">09</span>:i PM November <span class="number">15</span>th <span class="number">2017</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------+----------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="WEEKDAY函数：获取指定日期在一周内的索引位置"><a href="#WEEKDAY函数：获取指定日期在一周内的索引位置" class="headerlink" title="WEEKDAY函数：获取指定日期在一周内的索引位置"></a>WEEKDAY函数：获取指定日期在一周内的索引位置</h2><p><code>WEEKDAY(d)</code>返回<code>d</code>对应的工作日索引。0 表示周一，1 表示周二，……，6 表示周日。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> WEEKDAY(<span class="string">&#x27;2017-12-15&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> WEEKDAY(<span class="string">&#x27;2017-12-15&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span>                     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，<code>WEEKDAY()</code>和<code>DAYOFWEEK()</code>函数都是返回指定日期在某一周内的位置，只是索引编号不同。</p>
<h1 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h1><h2 id="IF函数：判断"><a href="#IF函数：判断" class="headerlink" title="IF函数：判断"></a>IF函数：判断</h2><p><code>IF</code>语句允许您根据表达式的某个条件或值结果来执行一组 SQL 语句。</p>
<p>要在 MySQL 中形成一个表达式，可以结合文字，变量，运算符，甚至函数来组合。表达式可以返回<code>TRUE,FALSE</code>或<code>NULL</code>，这三个值之一。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IF(expr,v1,v2)</span><br></pre></td></tr></table></figure>
<p>其中：表达式<code>expr</code>得到不同的结果，当<code>expr</code>为真是返回<code>v1</code>的值，否则返回<code>v2</code>。</p>
<p>使用<code>IF(expr,v1,v2)</code>函数根据<code>expr</code>表达式结果返回相应值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> IF(<span class="number">1</span><span class="operator">&lt;</span><span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>) c1, IF(<span class="number">1</span><span class="operator">&gt;</span><span class="number">5</span>,<span class="string">&#x27;√&#x27;</span>,<span class="string">&#x27;×&#x27;</span>) c2, IF(STRCMP(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;ab&#x27;</span>),<span class="string">&#x27;yes&#x27;</span>,<span class="string">&#x27;no&#x27;</span>) c3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----+-----+</span></span><br><span class="line"><span class="operator">|</span> c1 <span class="operator">|</span> c2 <span class="operator">|</span> c3  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----+-----+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> × <span class="operator">|</span> yes <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----+-----+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">2</span> warnings (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>在<code>c3</code>中，先用<code>STRCMP(s1,s2)</code>函数比较两个字符串的大小，字符串<code>&#39;abc&#39;</code>和<code>&#39;ab&#39;</code>比较结果的返回值为 1，也就是表达式<code>expr</code>的返回结果不等于 0 且不等于<code>NULL</code>，则返回值为<code>v1</code>，即字符串<code>&#39;yes&#39;</code>。</p>
<h2 id="IFNULL函数：判断是否为空"><a href="#IFNULL函数：判断是否为空" class="headerlink" title="IFNULL函数：判断是否为空"></a>IFNULL函数：判断是否为空</h2><p><code>IFNULL</code>函数是 MySQL 控制流函数之一，它接受两个参数，如果不是<code>NULL</code>，则返回第一个参数。 否则，<code>IFNULL</code>函数返回第二个参数。两个参数可以是文字值或表达式。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(v1,v2);</span><br></pre></td></tr></table></figure>
<p>其中：如果<code>v1</code>不为<code>NULL</code>，则<code>IFNULL</code>函数返回<code>v1</code>; 否则返回<code>v2</code>的结果。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> IFNULL(<span class="number">5</span>,<span class="number">8</span>), IFNULL(<span class="keyword">NULL</span>,<span class="string">&#x27;OK&#x27;</span>), IFNULL(<span class="built_in">SQRT</span>(<span class="number">-8</span>),<span class="string">&#x27;FALSE&#x27;</span>), <span class="built_in">SQRT</span>(<span class="number">-8</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------------+--------------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> IFNULL(<span class="number">5</span>,<span class="number">8</span>) <span class="operator">|</span> IFNULL(<span class="keyword">NULL</span>,<span class="string">&#x27;OK&#x27;</span>) <span class="operator">|</span> IFNULL(<span class="built_in">SQRT</span>(<span class="number">-8</span>),<span class="string">&#x27;FALSE&#x27;</span>) <span class="operator">|</span> <span class="built_in">SQRT</span>(<span class="number">-8</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------------+--------------------------+----------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">5</span> <span class="operator">|</span> OK                <span class="operator">|</span> <span class="literal">FALSE</span>                    <span class="operator">|</span>     <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-------------------+--------------------------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="CASE函数：搜索语句"><a href="#CASE函数：搜索语句" class="headerlink" title="CASE函数：搜索语句"></a>CASE函数：搜索语句</h2><p>除了<code>IF</code>函数，MySQL 还提供了一个替代的条件语句<code>CASE</code>。<code>CASE</code>语句有两种形式：简单的和可搜索<code>CASE</code>语句。</p>
<h2 id="简单的-CASE-语句"><a href="#简单的-CASE-语句" class="headerlink" title="简单的 CASE 语句"></a>简单的 CASE 语句</h2><p>简单的<code>CASE</code>语句就是指使用简单<code>CASE</code>语句来检查表达式的值与一组唯一值的匹配。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CASE</span>  <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span></span><br><span class="line">   <span class="keyword">WHEN</span> <span class="operator">&lt;</span>值<span class="number">1</span><span class="operator">&gt;</span> <span class="keyword">THEN</span> <span class="operator">&lt;</span>操作<span class="operator">&gt;</span></span><br><span class="line">   <span class="keyword">WHEN</span> <span class="operator">&lt;</span>值<span class="number">2</span><span class="operator">&gt;</span> <span class="keyword">THEN</span> <span class="operator">&lt;</span>操作<span class="operator">&gt;</span></span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">ELSE</span> <span class="operator">&lt;</span>操作<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure>
<p>其中：&lt;表达式&gt; 可以是任何有效的表达式。我们将 &lt;表达式&gt; 的值与每个<code>WHEN</code>子句中的值进行比较，例如 &lt;值1&gt;，&lt;值2&gt; 等。如果 &lt;表达式&gt; 和 &lt;值n&gt; 的值相等，则执行相应的<code>WHEN</code>分支中的命令 &lt;操作&gt;。如果<code>WHEN</code>子句中的 &lt;值n&gt; 没有与 &lt;表达式&gt; 的值匹配，则<code>ELSE</code>子句中的命令将被执行。<code>ELSE</code>子句是可选的。 如果省略<code>ELSE</code>子句，并且找不到匹配项，MySQL 将引发错误。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CASE</span> WEEKDAY(NOW())</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期一&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期二&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期三&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期四&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期五&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期六&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;星期天&#x27;</span></span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">AS</span> COLUMN1,NOW(), WEEKDAY(NOW()), DAYNAME(NOW());</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> COLUMN1 <span class="operator">|</span> NOW()               <span class="operator">|</span> WEEKDAY(NOW()) <span class="operator">|</span> DAYNAME(NOW()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> 星期四  <span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-28</span> <span class="number">13</span>:<span class="number">45</span>:<span class="number">43</span> <span class="operator">|</span>              <span class="number">3</span> <span class="operator">|</span> Thursday       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">7</span> warnings (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由执行结果可以看出，<code>NOW()</code>函数得到当前系统时间是 2019 年 2 月 28 日，<code>DAYNAME(NOW())</code>得到当天是<code>&#39;Thursday&#39;</code>，<code>WEEKDAY(NOW())</code>函数返回当前时间的工作日索引是 3，即对应的是星期四。</p>
<h2 id="可搜索的-CASE-语句"><a href="#可搜索的-CASE-语句" class="headerlink" title="可搜索的 CASE 语句"></a>可搜索的 CASE 语句</h2><p>简单<code>CASE</code>语句仅允许将表达式的值与一组不同的值进行匹配。 为了执行更复杂的匹配，如范围，则可以使用可搜索<code>CASE</code>语句。 可搜索<code>CASE</code>语句等同于<code>IF</code>语句，但是它的构造更加可读。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="operator">&lt;</span>条件<span class="number">1</span><span class="operator">&gt;</span> <span class="keyword">THEN</span> <span class="operator">&lt;</span>命令<span class="operator">&gt;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="operator">&lt;</span>条件<span class="number">2</span><span class="operator">&gt;</span> <span class="keyword">THEN</span> <span class="operator">&lt;</span>命令<span class="operator">&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">ELSE</span> commands</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure>
<p>MySQL 分别计算<code>WHEN</code>子句中的每个条件，直到找到一个值为<code>TRUE</code>的条件，然后执行<code>THEN</code>子句中的相应 &lt;命令&gt;。如果没有一个条件为<code>TRUE</code>，则执行<code>ELSE</code>子句中的 &lt;命令&gt;。如果不指定<code>ELSE</code>子句，并且没有一个条件为<code>TRUE</code>，MySQL 将发出错误消息。MySQL 不允许在<code>THEN</code>或<code>ELSE</code>子句中使用空的命令。 如果您不想处理<code>ELSE</code>子句中的逻辑，同时又要防止 MySQL 引发错误，则可以在<code>ELSE</code>子句中放置一个空的<code>BEGIN END</code>块。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> WEEKDAY(NOW())<span class="operator">=</span><span class="number">0</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期一&#x27;</span> <span class="keyword">WHEN</span> WEEKDAY(NOW())<span class="operator">=</span><span class="number">1</span> THE</span><br><span class="line">N <span class="string">&#x27;星期二&#x27;</span>  <span class="keyword">WHEN</span> WEEKDAY(NOW())<span class="operator">=</span><span class="number">2</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期三&#x27;</span> <span class="keyword">WHEN</span> WEEKDAY(NOW())<span class="operator">=</span><span class="number">3</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期</span></span><br><span class="line"><span class="string">四&#x27;</span> <span class="keyword">WHEN</span> WEEKDAY(NOW())<span class="operator">=</span><span class="number">4</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期五&#x27;</span> <span class="keyword">WHEN</span> WEEKDAY(NOW())<span class="operator">=</span><span class="number">5</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期六&#x27;</span> <span class="keyword">WHEN</span></span><br><span class="line">WEEKDAY(NOW())<span class="operator">=</span><span class="number">6</span> <span class="keyword">THEN</span> <span class="string">&#x27;星期天&#x27;</span> <span class="keyword">END</span> <span class="keyword">AS</span> COLUMN1,NOW(),WEEKDAY(NOW()),DAYNAME(NOW(</span><br><span class="line">));</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> COLUMN1 <span class="operator">|</span> NOW()               <span class="operator">|</span> WEEKDAY(NOW()) <span class="operator">|</span> DAYNAME(NOW()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> 星期四  <span class="operator">|</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-28</span> <span class="number">14</span>:<span class="number">08</span>:<span class="number">00</span> <span class="operator">|</span>              <span class="number">3</span> <span class="operator">|</span> Thursday       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------------------+----------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">7</span> warnings (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>此例跟上例的返回结果一样，只是使用了<code>CASE</code>函数的不同写法，<code>WHEN</code>后面为表达式，当表达式的返回结果为<code>TRUE</code>时取<code>THEN</code>后面的值，如果都不是，则返回<code>ELSE</code>后面的值。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL运算符"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/19/MySQL/MySQL%E8%BF%90%E7%AE%97%E7%AC%A6/"
    >MySQL运算符</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/19/MySQL/MySQL%E8%BF%90%E7%AE%97%E7%AC%A6/" class="article-date">
  <time datetime="2020-04-19T06:59:13.000Z" itemprop="datePublished">2020-04-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>MySQL 所提供的运算符可以直接对表中数据或字段进行运算，进而实现用户的新需求，增强了 MySQL 的功能。</p>
<p>MySQL 支持 4 种运算符：</p>
<ol>
<li>算术运算符：加、减、乘、除和取余运算。</li>
<li>比较运算符：包括大于、小于、等于或不等于、等等。主要用于数值的比较、字符串的匹配等方面。</li>
<li>逻辑运算符：包括与、或、非和异或、等逻辑运算符。其返回值为布尔型，真值（1 或<code>true</code>）和假值（0 或<code>false</code>）。</li>
<li>位运算符：包括按位与、按位或、按位取反、按位异或、按位左移和按位右移等位运算符。位运算必须先将数据转换为补码，然后在根据数据的补码进行操作。运算完成后，将得到的值转换为原来的类型（十进制数），返回给用户。</li>
</ol>
<h1 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h1><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">作用</th>
<th align="center">使用方法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">+</td>
<td align="center">加法运算</td>
<td align="center">用于获得一个或多个值的和</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">减法运算</td>
<td align="center">用于从一个值中减去另一个值</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">乘法运算</td>
<td align="center">使数字相乘，得到两个或多个值的乘积</td>
</tr>
<tr>
<td align="center">&#x2F;</td>
<td align="center">除法运算，返回商</td>
<td align="center">用一个值除以另一个值得到商</td>
</tr>
<tr>
<td align="center">%，MOD</td>
<td align="center">求余运算，返回余数</td>
<td align="center">用一个值除以另一个值得到余数</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> temp(num <span class="type">INT</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp <span class="keyword">VALUE</span> (<span class="number">64</span>);</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> num, num<span class="operator">+</span><span class="number">10</span>, num<span class="number">-3</span><span class="operator">+</span><span class="number">5</span>, num<span class="operator">+</span><span class="number">36.5</span> <span class="keyword">FROM</span> temp;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------+----------+</span></span><br><span class="line"><span class="operator">|</span> num  <span class="operator">|</span> num<span class="operator">+</span><span class="number">10</span> <span class="operator">|</span> num<span class="number">-3</span><span class="operator">+</span><span class="number">5</span> <span class="operator">|</span> num<span class="operator">+</span><span class="number">36.5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------+----------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">64</span> <span class="operator">|</span>     <span class="number">74</span> <span class="operator">|</span>      <span class="number">66</span> <span class="operator">|</span>    <span class="number">100.5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+---------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> num, num<span class="operator">*</span><span class="number">2</span>, num<span class="operator">/</span><span class="number">2</span>, num<span class="operator">/</span><span class="number">3</span>, num<span class="operator">%</span><span class="number">3</span> <span class="keyword">FROM</span> temp;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+---------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> num  <span class="operator">|</span> num<span class="operator">*</span><span class="number">2</span> <span class="operator">|</span> num<span class="operator">/</span><span class="number">2</span>   <span class="operator">|</span> num<span class="operator">/</span><span class="number">3</span>   <span class="operator">|</span> num<span class="operator">%</span><span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+---------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">64</span> <span class="operator">|</span>   <span class="number">128</span> <span class="operator">|</span> <span class="number">32.0000</span> <span class="operator">|</span> <span class="number">21.3333</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+---------+---------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由上面计算结果可以看出，对<code>num</code>进行除法运算时，由于 64 无法被 3 整除，因此 MySQL 对<code>num/3</code>求商的结果保存到了小数点后面四位，结果为 21.3333；64 除以 3 的余数为 1，因此取余运算<code>num%3</code>的结果为 1。</p>
<p>对于取余运算，还可以使用<code>MOD(a, b)</code>函数，<code>MOD(a, b)</code>相当于<code>a%b</code>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MOD</span>(num,<span class="number">3</span>) <span class="keyword">FROM</span> temp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">MOD</span>(num,<span class="number">3</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>数学运算中，除数为 0 的除法是没有意义的。所以在除法运算和取余运算中，如果除数为 0，那么返回结果为<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> num, num<span class="operator">/</span><span class="number">0</span>, num<span class="operator">%</span><span class="number">0</span> <span class="keyword">FROM</span> temp;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+-------+</span></span><br><span class="line"><span class="operator">|</span> num  <span class="operator">|</span> num<span class="operator">/</span><span class="number">0</span> <span class="operator">|</span> num<span class="operator">%</span><span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+-------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">64</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h1><p>逻辑运算符又称为布尔运算符，用来确定表达式的真和假。</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">NOT 或者 !</td>
<td align="center">逻辑非</td>
</tr>
<tr>
<td align="center">AND 或者 &amp;&amp;</td>
<td align="center">逻辑与</td>
</tr>
<tr>
<td align="center">OR 和 <code>||</code></td>
<td align="center">逻辑或</td>
</tr>
<tr>
<td align="center">XOR</td>
<td align="center">逻辑异或</td>
</tr>
</tbody></table>
<h2 id="逻辑非运算（NOT-或者-）"><a href="#逻辑非运算（NOT-或者-）" class="headerlink" title="逻辑非运算（NOT 或者 !）"></a>逻辑非运算（NOT 或者 !）</h2><p><code>NOT</code>和<code>!</code>都是逻辑非运算符，返回和操作数相反的结果：</p>
<ul>
<li>当操作数为 0（假）时，返回值为 1；</li>
<li>当操作数为非零值时，返回值为 0；</li>
<li>当操作数为<code>NULL</code>时，返回值为<code>NULL</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">NOT</span> <span class="number">10</span>, <span class="keyword">NOT</span>(<span class="number">1</span><span class="number">-1</span>), <span class="keyword">NOT</span><span class="number">-5</span>, <span class="keyword">NOT</span> <span class="keyword">NULL</span>, <span class="keyword">NOT</span> <span class="number">1</span><span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-------+----------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NOT</span> <span class="number">10</span> <span class="operator">|</span> <span class="keyword">NOT</span>(<span class="number">1</span><span class="number">-1</span>) <span class="operator">|</span> <span class="keyword">NOT</span><span class="number">-5</span> <span class="operator">|</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NOT</span> <span class="number">1</span><span class="operator">+</span><span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-------+----------+---------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span>     <span class="number">0</span> <span class="operator">|</span>     <span class="keyword">NULL</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+-------+----------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">!</span><span class="number">10</span>, <span class="operator">!</span>(<span class="number">1</span><span class="number">-1</span>), <span class="operator">!</span><span class="number">-5</span>, <span class="operator">!</span><span class="keyword">NULL</span>, <span class="operator">!</span><span class="number">1</span><span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+--------+-----+-------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">!</span><span class="number">10</span> <span class="operator">|</span> <span class="operator">!</span>(<span class="number">1</span><span class="number">-1</span>) <span class="operator">|</span> <span class="operator">!</span><span class="number">-5</span> <span class="operator">|</span> <span class="operator">!</span><span class="keyword">NULL</span> <span class="operator">|</span> <span class="operator">!</span><span class="number">1</span><span class="operator">+</span><span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+--------+-----+-------+------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+--------+-----+-------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">!</span><span class="number">1</span><span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">!</span><span class="number">1</span><span class="operator">+</span><span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，<code>NOT 1+1</code>和<code>!1+1</code>的返回值不同，这是因为<code>NOT</code>与<code>!</code>的优先级不同：</p>
<ul>
<li><code>NOT</code>的优先级低于<code>+</code>，因此<code>NOT 1+1</code>相当于<code>NOT(1+1)</code>，先计算<code>1+1</code>，然后再进行<code>NOT</code>运算，由于操作数不为 0，因此<code>NOT 1+1</code>的结果是 0；</li>
<li>相反，<code>!</code>的优先级别要高于<code>+</code>，因此<code>! 1+1</code>相当于<code>(!1)+1</code>，先计算<code>!1</code>结果为 0，再加 1，最后结果为 1。</li>
</ul>
<p>在使用运算符运算时，一定要注意运算符的优先级，如果不能确定计算顺序，最好使用括号，以保证运算结果的正确。</p>
<h2 id="逻辑与运算符（AND-或者-amp-amp-）"><a href="#逻辑与运算符（AND-或者-amp-amp-）" class="headerlink" title="逻辑与运算符（AND 或者 &amp;&amp;）"></a>逻辑与运算符（AND 或者 &amp;&amp;）</h2><p><code>AND</code>和<code>&amp;&amp;</code>都是逻辑与运算符：</p>
<ul>
<li>当所有操作数都为非零值并且不为<code>NULL</code>时，返回值为 1；</li>
<li>当一个或多个操作数为 0 时，返回值为 0；</li>
<li>操作数中有任何一个为<code>NULL</code>时，返回值为<code>NULL</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">-1</span>, <span class="number">1</span> <span class="keyword">AND</span> <span class="number">0</span>, <span class="number">1</span> <span class="keyword">AND</span> <span class="keyword">NULL</span>, <span class="number">0</span> <span class="keyword">AND</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+---------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">-1</span> <span class="operator">|</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">0</span> <span class="operator">|</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">0</span> <span class="keyword">AND</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+---------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span>          <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+---------+------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> <span class="number">-1</span>, <span class="number">1</span><span class="operator">&amp;&amp;</span><span class="number">0</span>, <span class="number">1</span><span class="operator">&amp;&amp;</span><span class="keyword">NULL</span>, <span class="number">0</span><span class="operator">&amp;&amp;</span><span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> <span class="number">-1</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&amp;&amp;</span><span class="number">0</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&amp;&amp;</span><span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">0</span><span class="operator">&amp;&amp;</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------+---------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，<code>AND</code>和<code>&amp;&amp;</code>的作用相同。<code>1 AND -1</code>中没有 0 或者<code>NULL</code>，所以返回值为 1；<code>1 AND 0</code>中有操作数 0，所以返回值为 0；<code>1 AND NULL</code>有<code>NULL</code>，所以返回值为<code>NULL</code>。</p>
<blockquote>
<p>注意：<code>AND</code>运算符可以有多个操作数，但要注意多个操作数运算时，<code>AND</code>两边一定要使用空格隔开，不然会影响结果的正确性。</p>
</blockquote>
<h2 id="逻辑或运算符（OR-或者-）"><a href="#逻辑或运算符（OR-或者-）" class="headerlink" title="逻辑或运算符（OR 或者 ||）"></a>逻辑或运算符（OR 或者 ||）</h2><p><code>OR</code>和<code>||</code>都是逻辑或运算符：</p>
<ul>
<li>当两个操作数都为非<code>NULL</code>值时，如果有任意一个操作数为非零值，则返回值为 1，否则结果为 0；</li>
<li>当有一个操作数为<code>NULL</code>时，如果另一个操作数为非零值，则返回值为 1，否则结果为<code>NULL</code>；</li>
<li>假如两个操作数均为<code>NULL</code>时，则返回值为<code>NULL</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">OR</span> <span class="number">-1</span> <span class="keyword">OR</span> <span class="number">0</span>,<span class="number">1</span> <span class="keyword">OR</span> <span class="number">2</span>,<span class="number">1</span> <span class="keyword">OR</span> <span class="keyword">NULL</span>, <span class="number">0</span> <span class="keyword">OR</span> <span class="keyword">NULL</span>, <span class="keyword">NULL</span> <span class="keyword">OR</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------+-----------+-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="keyword">OR</span> <span class="number">-1</span> <span class="keyword">OR</span> <span class="number">0</span> <span class="operator">|</span> <span class="number">1</span> <span class="keyword">OR</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">1</span> <span class="keyword">OR</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">0</span> <span class="keyword">OR</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="keyword">OR</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------+-----------+-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span>         <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------+-----------+-----------+--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">||</span> <span class="number">-1</span> <span class="operator">||</span> <span class="number">0</span>, <span class="number">1</span><span class="operator">||</span><span class="number">2</span>, <span class="number">1</span><span class="operator">||</span><span class="keyword">NULL</span>, <span class="number">0</span><span class="operator">||</span><span class="keyword">NULL</span>, <span class="keyword">NULL</span><span class="operator">||</span><span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+------+---------+---------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">||</span> <span class="number">-1</span> <span class="operator">||</span> <span class="number">0</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">||</span><span class="number">2</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">||</span><span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">0</span><span class="operator">||</span><span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">||</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+------+---------+---------+------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+------+---------+---------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，<code>OR</code>和<code>||</code>的作用相同。下面是对各个结果的解析：</p>
<ul>
<li><code>1 OR -1 OR 0</code>含有 0，但同时包含有非 0 的值 1 和 -1，所以返回结果为 1；</li>
<li><code>1 OR 2</code>中没有操作数 0，所以返回结果为 1；</li>
<li><code>1 OR NULL</code>虽然有<code>NULL</code>，但是有操作数 1，所以返回结果为 1；</li>
<li><code>0 OR NULL</code>中没有非 0 值，并且有<code>NULL</code>，所以返回值为<code>NULL</code>；</li>
<li><code>NULL OR NULL</code>中只有<code>NULL</code>，所以返回值为<code>NULL</code>。</li>
</ul>
<h2 id="异或运算（XOR-运算符）"><a href="#异或运算（XOR-运算符）" class="headerlink" title="异或运算（XOR 运算符）"></a>异或运算（XOR 运算符）</h2><p><code>XOR</code>表示逻辑异或：</p>
<ul>
<li>当任意一个操作数为<code>NULL</code>时，返回值为<code>NULL</code>；</li>
<li>对于非<code>NULL</code>的操作数，如果两个操作数都是非 0 值或者都是 0 值，则返回值为 0；</li>
<li>如果一个为 0 值，另一个为非 0 值，返回值为 1。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span> XOR <span class="number">1</span>, <span class="number">0</span> XOR <span class="number">0</span>, <span class="number">1</span> XOR <span class="number">0</span>, <span class="number">1</span> XOR <span class="keyword">NULL</span>, <span class="number">1</span> XOR <span class="number">1</span> XOR <span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+---------+------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> XOR <span class="number">1</span> <span class="operator">|</span> <span class="number">0</span> XOR <span class="number">0</span> <span class="operator">|</span> <span class="number">1</span> XOR <span class="number">0</span> <span class="operator">|</span> <span class="number">1</span> XOR <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1</span> XOR <span class="number">1</span> XOR <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+---------+------------+---------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span>       <span class="number">0</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span>             <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+---------+---------+------------+---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到：</p>
<ul>
<li><code>1 XOR 1</code>和<code>0 XOR 0</code>中运算符两边的操作数都为非零值，或者都是零值，因此返回 0；</li>
<li><code>1 XOR 0</code>中两边的操作数，一个为 0 值，另一个为非 0 值，所以返回值为 1；</li>
<li><code>1 XOR NULL</code>中有一个操作数为<code>NULL</code>，所以返回值为<code>NULL</code>；</li>
<li><code>1 XOR 1 XOR 1</code>中有多个操作数，运算符相同，因此运算顺序从左到右依次计算，<code>1 XOR 1</code>的结果为 0，再与 1 进行异或运算，所以返回值为 1。</li>
</ul>
<blockquote>
<p>提示：<code>a XOR b</code>的计算等同于<code>(a AND (NOT b))</code>或者<code>((NOT a) AND b)</code>。</p>
</blockquote>
<h1 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h1><p>当使用<code>SELECT</code>语句进行查询时，MySQL 允许用户对表达式的左边操作数和右边操作数进行比较，比较结果为真，则返回 1，为假则返回 0，比较结果不确定则返回<code>NULL</code>。</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x3D;</td>
<td align="center">等于</td>
</tr>
<tr>
<td align="center">&lt;&#x3D;&gt;</td>
<td align="center">安全的等于</td>
</tr>
<tr>
<td align="center">&lt;&gt; 或者 !&#x3D;</td>
<td align="center">不等于</td>
</tr>
<tr>
<td align="center">&lt;&#x3D;</td>
<td align="center">小于等于</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">小于</td>
</tr>
<tr>
<td align="center">&gt;&#x3D;</td>
<td align="center">大于等于</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">大于</td>
</tr>
<tr>
<td align="center">IS NULL 或者 ISNULL</td>
<td align="center">判断一个值是否为空</td>
</tr>
<tr>
<td align="center">IS NOT NULL</td>
<td align="center">判断一个值是否不为空</td>
</tr>
<tr>
<td align="center">BETWEEN AND</td>
<td align="center">判断一个值是否落在两个值之间</td>
</tr>
</tbody></table>
<p>比较运算符可以用于比较数字、字符串和表达式的值。注意，字符串的比较是不区分大小写的。</p>
<h2 id="等于运算（-x3D-）"><a href="#等于运算（-x3D-）" class="headerlink" title="等于运算（&#x3D;）"></a>等于运算（&#x3D;）</h2><p><code>=</code>运算符用来比较两边的操作数是否相等，相等的话返回 1，不相等的话返回 0：</p>
<ul>
<li>若有一个或两个操作数为<code>NULL</code>，则比较运算的结果为<code>NULL</code>。</li>
<li>若两个操作数都是字符串，则按照字符串进行比较。</li>
<li>若两个操作数均为整数，则按照整数进行比较。</li>
<li>若一个操作数为字符串，另一个操作数为数字，则 MySQL 可以自动将字符串转换为数字。</li>
</ul>
<blockquote>
<p>注意：<code>NULL</code>不能用于<code>=</code>比较。如果字符串转换数值不成功则转成 0。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span><span class="operator">=</span><span class="number">0</span>, <span class="string">&#x27;2&#x27;</span><span class="operator">=</span><span class="number">2</span>, <span class="number">2</span><span class="operator">=</span><span class="number">2</span>, <span class="string">&#x27;0.02&#x27;</span><span class="operator">=</span><span class="number">0</span>, <span class="string">&#x27;b&#x27;</span><span class="operator">=</span><span class="string">&#x27;b&#x27;</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">2</span>), <span class="keyword">NULL</span><span class="operator">=</span><span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-------+-----+----------+---------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">=</span><span class="number">0</span> <span class="operator">|</span> <span class="string">&#x27;2&#x27;</span><span class="operator">=</span><span class="number">2</span> <span class="operator">|</span> <span class="number">2</span><span class="operator">=</span><span class="number">2</span> <span class="operator">|</span> <span class="string">&#x27;0.02&#x27;</span><span class="operator">=</span><span class="number">0</span> <span class="operator">|</span> <span class="string">&#x27;b&#x27;</span><span class="operator">=</span><span class="string">&#x27;b&#x27;</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">2</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">=</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-------+-----+----------+---------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>        <span class="number">0</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-------+-----+----------+---------+-------------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="安全等于运算符（-lt-x3D-gt-）"><a href="#安全等于运算符（-lt-x3D-gt-）" class="headerlink" title="安全等于运算符（&lt;&#x3D;&gt;）"></a>安全等于运算符（&lt;&#x3D;&gt;）</h2><p><code>&lt;=&gt;</code>操作符和<code>=</code>操作符类似，不过<code>&lt;=&gt;</code>可以用来判断<code>NULL</code>值：</p>
<ul>
<li>当两个操作数均为<code>NULL</code>时，其返回值为 1 而不为<code>NULL</code>；</li>
<li>而当一个操作数为<code>NULL</code>时，其返回值为 0 而不为<code>NULL</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span><span class="operator">&lt;=&gt;</span><span class="number">0</span>,<span class="string">&#x27;2&#x27;</span><span class="operator">&lt;=&gt;</span><span class="number">2</span>, <span class="number">2</span><span class="operator">&lt;=&gt;</span><span class="number">2</span>, <span class="string">&#x27;0.02&#x27;</span><span class="operator">&lt;=&gt;</span><span class="number">0</span>, <span class="string">&#x27;b&#x27;</span><span class="operator">&lt;=&gt;</span><span class="string">&#x27;b&#x27;</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>) <span class="operator">&lt;=&gt;</span> (<span class="number">2</span><span class="operator">+</span><span class="number">1</span>), <span class="keyword">NULL</span><span class="operator">&lt;=&gt;</span><span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+-------+------------+-----------+-----------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">&lt;=&gt;</span><span class="number">0</span> <span class="operator">|</span> <span class="string">&#x27;2&#x27;</span><span class="operator">&lt;=&gt;</span><span class="number">2</span> <span class="operator">|</span> <span class="number">2</span><span class="operator">&lt;=&gt;</span><span class="number">2</span> <span class="operator">|</span> <span class="string">&#x27;0.02&#x27;</span><span class="operator">&lt;=&gt;</span><span class="number">0</span> <span class="operator">|</span> <span class="string">&#x27;b&#x27;</span><span class="operator">&lt;=&gt;</span><span class="string">&#x27;b&#x27;</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>) <span class="operator">&lt;=&gt;</span> (<span class="number">2</span><span class="operator">+</span><span class="number">1</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">&lt;=&gt;</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+-------+------------+-----------+-----------------+-------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">0</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>          <span class="number">0</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span>               <span class="number">0</span> <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+-------+------------+-----------+-----------------+-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，<code>&lt;=&gt;</code>在执行比较操作时和<code>=</code>的作用是相似的，唯一的区别是<code>&lt;=&gt;</code>可以用来对<code>NULL</code>进行判断，两者都为<code>NULL</code>时返回值为 1。</p>
<h2 id="不等于运算符（-lt-gt-或者-x3D-）"><a href="#不等于运算符（-lt-gt-或者-x3D-）" class="headerlink" title="不等于运算符（&lt;&gt; 或者 !&#x3D;）"></a>不等于运算符（&lt;&gt; 或者 !&#x3D;）</h2><p>与<code>=</code>的作用相反，<code>&lt;&gt;</code>和<code>!=</code>用于判断数字、字符串、表达式是否不相等。对于<code>&lt;&gt;</code>和<code>!=</code>，如果两侧操作数不相等，返回值为 1，否则返回值为 0；如果两侧操作数有一个是<code>NULL</code>，那么返回值也是<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&lt;&gt;</span><span class="string">&#x27;god&#x27;</span>, <span class="number">1</span><span class="operator">&lt;&gt;</span><span class="number">2</span>, <span class="number">4</span><span class="operator">!=</span><span class="number">4</span>, <span class="number">5.5</span><span class="operator">!=</span><span class="number">5</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">!=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>), <span class="keyword">NULL</span><span class="operator">&lt;&gt;</span><span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&lt;&gt;</span><span class="string">&#x27;god&#x27;</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&lt;&gt;</span><span class="number">2</span> <span class="operator">|</span> <span class="number">4</span><span class="operator">!=</span><span class="number">4</span> <span class="operator">|</span> <span class="number">5.5</span><span class="operator">!=</span><span class="number">5</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">!=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">&lt;&gt;</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">1</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，两个不等于运算符作用相同，都可以进行数字、字符串、表达式的比较判断。</p>
<h2 id="小于等于运算符（-lt-x3D-）"><a href="#小于等于运算符（-lt-x3D-）" class="headerlink" title="小于等于运算符（&lt;&#x3D;）"></a>小于等于运算符（&lt;&#x3D;）</h2><p><code>&lt;=</code>是小于等于运算符，用来判断左边的操作数是否小于或者等于右边的操作数；如果小于或者等于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是<code>NULL</code>，那么返回值也是<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&lt;=</span><span class="string">&#x27;god&#x27;</span>, <span class="number">1</span><span class="operator">&lt;=</span><span class="number">2</span>, <span class="number">4</span><span class="operator">&lt;=</span><span class="number">4</span>, <span class="number">5.5</span><span class="operator">&lt;=</span><span class="number">5</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&lt;=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>), <span class="keyword">NULL</span><span class="operator">&lt;=</span><span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&lt;=</span><span class="string">&#x27;god&#x27;</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&lt;=</span><span class="number">2</span> <span class="operator">|</span> <span class="number">4</span><span class="operator">&lt;=</span><span class="number">4</span> <span class="operator">|</span> <span class="number">5.5</span><span class="operator">&lt;=</span><span class="number">5</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&lt;=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">&lt;=</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">0</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span>            <span class="number">0</span> <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="小于运算符（-lt-）"><a href="#小于运算符（-lt-）" class="headerlink" title="小于运算符（&lt;）"></a>小于运算符（&lt;）</h2><p><code>&lt;</code>是小于运算符，用来判断左边的操作数是否小于右边的操作数；如果小于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是<code>NULL</code>，那么返回值也是<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&lt;</span><span class="string">&#x27;god&#x27;</span>, <span class="number">1</span><span class="operator">&lt;</span><span class="number">2</span>, <span class="number">4</span><span class="operator">&lt;</span><span class="number">4</span>, <span class="number">5.5</span><span class="operator">&lt;</span><span class="number">5</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&lt;</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>), <span class="keyword">NULL</span><span class="operator">&lt;</span><span class="keyword">NULL</span>；</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----+-----+-------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&lt;</span><span class="string">&#x27;god&#x27;</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&lt;</span><span class="number">2</span> <span class="operator">|</span> <span class="number">4</span><span class="operator">&lt;</span><span class="number">4</span> <span class="operator">|</span> <span class="number">5.5</span><span class="operator">&lt;</span><span class="number">5</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&lt;</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">&lt;</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----+-----+-------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">0</span> <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>     <span class="number">0</span> <span class="operator">|</span>           <span class="number">0</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----+-----+-------+-------------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="大于等于运算符（-gt-x3D-）"><a href="#大于等于运算符（-gt-x3D-）" class="headerlink" title="大于等于运算符（&gt;&#x3D;）"></a>大于等于运算符（&gt;&#x3D;）</h2><p><code>&gt;=</code>是大于等于运算符，用来判断左边的操作数是否大于或者等于右边的操作数；如果大于或者等于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是<code>NULL</code>，那么返回值也是<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&gt;=</span><span class="string">&#x27;god&#x27;</span>, <span class="number">1</span><span class="operator">&gt;=</span><span class="number">2</span>, <span class="number">4</span><span class="operator">&gt;=</span><span class="number">4</span>, <span class="number">5.5</span><span class="operator">&gt;=</span><span class="number">5</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&gt;=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>), <span class="keyword">NULL</span><span class="operator">&gt;=</span><span class="keyword">NULL</span>；</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&gt;=</span><span class="string">&#x27;god&#x27;</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&gt;=</span><span class="number">2</span> <span class="operator">|</span> <span class="number">4</span><span class="operator">&gt;=</span><span class="number">4</span> <span class="operator">|</span> <span class="number">5.5</span><span class="operator">&gt;=</span><span class="number">5</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&gt;=</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">&gt;=</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">1</span> <span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------+------+--------+--------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="大于运算符（-gt-）"><a href="#大于运算符（-gt-）" class="headerlink" title="大于运算符（&gt;）"></a>大于运算符（&gt;）</h2><p><code>&gt;</code>是大于运算符，用来判断左边的操作数是否大于右边的操作数；如果大于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是<code>NULL</code>，那么返回值也是<code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&gt;</span><span class="string">&#x27;god&#x27;</span>, <span class="number">1</span><span class="operator">&gt;</span><span class="number">2</span>, <span class="number">4</span><span class="operator">&gt;</span><span class="number">4</span>, <span class="number">5.5</span><span class="operator">&gt;</span><span class="number">5</span>, (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&gt;</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>), <span class="keyword">NULL</span><span class="operator">&gt;</span><span class="keyword">NULL</span>；</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----+-----+-------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="string">&#x27;good&#x27;</span><span class="operator">&gt;</span><span class="string">&#x27;god&#x27;</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">&gt;</span><span class="number">2</span> <span class="operator">|</span> <span class="number">4</span><span class="operator">&gt;</span><span class="number">4</span> <span class="operator">|</span> <span class="number">5.5</span><span class="operator">&gt;</span><span class="number">5</span> <span class="operator">|</span> (<span class="number">1</span><span class="operator">+</span><span class="number">3</span>)<span class="operator">&gt;</span>(<span class="number">2</span><span class="operator">+</span><span class="number">1</span>) <span class="operator">|</span> <span class="keyword">NULL</span><span class="operator">&gt;</span><span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----+-----+-------+-------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----+-----+-------+-------------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="IS-NULL-ISNULL-和-IS-NOT-NULL-运算符"><a href="#IS-NULL-ISNULL-和-IS-NOT-NULL-运算符" class="headerlink" title="IS NULL(ISNULL) 和 IS NOT NULL 运算符"></a>IS NULL(ISNULL) 和 IS NOT NULL 运算符</h2><p><code>IS NULL</code>或<code>ISNULL</code>运算符用来检测一个值是否为<code>NULL</code>，如果为<code>NULL</code>，返回值为 1，否则返回值为 0。<code>ISNULL</code>可以认为是<code>IS NULL</code>的简写，去掉了一个空格而已，两者的作用和用法都是完全相同的。</p>
<p><code>IS NOT NULL</code>运算符用来检测一个值是否为非<code>NULL</code>，如果是非<code>NULL</code>，返回值为 1，否则返回值为 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span> <span class="keyword">IS</span> <span class="keyword">NULL</span>, ISNULL(<span class="keyword">NULL</span>), ISNULL(<span class="number">10</span>), <span class="number">10</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="operator">|</span> ISNULL(<span class="keyword">NULL</span>) <span class="operator">|</span> ISNULL(<span class="number">10</span>) <span class="operator">|</span> <span class="number">10</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>            <span class="number">1</span> <span class="operator">|</span>          <span class="number">0</span> <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+--------------+------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，<code>IS NULL</code>和<code>ISNULL</code>的作用相同，只是写法略有不同。<code>ISNULL</code>和<code>IS NOT NULL</code>的返回值正好相反。</p>
<h2 id="BETWEEN-AND-运算符"><a href="#BETWEEN-AND-运算符" class="headerlink" title="BETWEEN AND 运算符"></a>BETWEEN AND 运算符</h2><p><code>BETWEEN AND</code>运算符用来判断表达式的值是否位于两个数之间，或者说是否位于某个范围内。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr BETWEEN min AND max</span><br></pre></td></tr></table></figure>
<p><code>expr</code>表示要判断的表达式，<code>min</code>表示最小值，<code>max</code>表示最大值。如果<code>expr</code>大于等于<code>min</code>并且小于等于<code>max</code>，那么返回值为 1，否则返回值为 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">4</span> <span class="keyword">BETWEEN</span> <span class="number">2</span> <span class="keyword">AND</span> <span class="number">5</span>, <span class="number">4</span> <span class="keyword">BETWEEN</span> <span class="number">4</span> <span class="keyword">AND</span> <span class="number">6</span>, <span class="number">12</span> <span class="keyword">BETWEEN</span> <span class="number">9</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+-------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="keyword">BETWEEN</span> <span class="number">2</span> <span class="keyword">AND</span> <span class="number">5</span> <span class="operator">|</span> <span class="number">4</span> <span class="keyword">BETWEEN</span> <span class="number">4</span> <span class="keyword">AND</span> <span class="number">6</span> <span class="operator">|</span> <span class="number">12</span> <span class="keyword">BETWEEN</span> <span class="number">9</span> <span class="keyword">AND</span> <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+-------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span>                 <span class="number">1</span> <span class="operator">|</span>                 <span class="number">1</span> <span class="operator">|</span>                   <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+-------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>对于字符串类型的比较，按字母表中字母顺序进行比较，<code>x</code>不在指定的字母区间内，因此返回值为 0，而<code>b</code>位于指定字母区间内，因此返回值为 1。</p>
<p>使用比较运算符时需要注意空值<code>NULL</code>，大部分比较运算符遇到<code>NULL</code>时也会返回<code>NULL</code>。</p>
<h1 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h1><p>所谓位运算，就是按照内存中的比特位（<code>Bit</code>）进行操作，这是计算机能够支持的最小单位的运算。程序中所有的数据在内存中都是以二进制形式存储的，位运算就是对这些二进制数据进行操作。</p>
<p>位运算一般用于操作整数，对整数进行位运算才有实际的意义。整数在内存中是以补码形式存储的，正数的补码形式和原码形式相同，而负数的补码形式和它的原码形式是不一样的，这一点大家要特别注意；这意味着，对负数进行位运算时，操作的是它的补码，而不是它的原码。</p>
<p>MySQL 中的整数字面量（常量整数，也就是直接书写出来的整数）默认以 8 个字节（<code>Byte</code>）来表示，也就是 64 位（<code>Bit</code>）。例如，5 的二进制形式为：<code>0000 0000 ... 0000 0101</code></p>
<p>省略号部分都是 0，101 前面总共有 61 个 0。</p>
<p>MySQL 中的位运算符：</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">说明   使用形式</th>
<th align="center">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#96;</td>
<td align="center">&#96;</td>
<td align="center">位或    a</td>
</tr>
<tr>
<td align="center">&amp;</td>
<td align="center">位与    a &amp; b</td>
<td align="center">5 &amp; 8</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">位异或  a ^ b</td>
<td align="center">5 ^ 8</td>
</tr>
<tr>
<td align="center">~</td>
<td align="center">位取反  ~a</td>
<td align="center">~5</td>
</tr>
<tr>
<td align="center">&lt;&lt;</td>
<td align="center">位左移  a &lt;&lt; b</td>
<td align="center">5 &lt;&lt; 2，表示整数 5 按位左移 2 位</td>
</tr>
<tr>
<td align="center">&gt;&gt;</td>
<td align="center">位右移  a &gt;&gt; b</td>
<td align="center">5 &gt;&gt; 2，表示整数 5 按位右移 2 位</td>
</tr>
</tbody></table>
<p>位运算中的<code>&amp;、|、~</code>和逻辑运算中的<code>&amp;&amp;、||、!</code>非常相似。</p>
<h2 id="位或运算符"><a href="#位或运算符" class="headerlink" title="位或运算符 |"></a>位或运算符 |</h2><p>参与<code>|</code>运算的两个二进制位有一个为 1 时，结果就为 1，两个都为 0 时结果才为 0。例如<code>1|1</code>结果为 1，<code>0|0</code>结果为0，<code>1|0</code>结果为1，这和逻辑运算中的<code>||</code>非常类似。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">10</span><span class="operator">|</span><span class="number">15</span>, <span class="number">9</span><span class="operator">|</span><span class="number">4</span><span class="operator">|</span><span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span><span class="operator">|</span><span class="number">15</span> <span class="operator">|</span> <span class="number">9</span><span class="operator">|</span><span class="number">4</span><span class="operator">|</span><span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">15</span> <span class="operator">|</span>    <span class="number">15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>10 的补码为 1010，15 的补码为 1111，按位或运算之后，结果为 1111，即整数 15；9 的补码为 1001，4 的补码为 0100，2 的补码为 0010，按位或运算之后，结果为 111，即整数 15。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">-7</span><span class="operator">|</span><span class="number">-1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-7</span><span class="operator">|</span><span class="number">-1</span>                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">18446744073709551615</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>-7 的补码为 60 个 1 加 1001，-1 的补码为 64 个 1，按位或运算之后，结果为 64 个 1，即整数<code>18446744073709551615</code>。</p>
<p>可以发现，任何数和 -1 进行位或运算时，最终结果都是 -1 的十进制数。</p>
<h2 id="位与运算符-amp"><a href="#位与运算符-amp" class="headerlink" title="位与运算符 &amp;"></a>位与运算符 &amp;</h2><p>参与<code>&amp;</code>运算的两个二进制位都为 1 时，结果就为 1，否则为 0。例如<code>1&amp;1</code>结果为 1，<code>0&amp;0</code>结果为 0，<code>1&amp;0</code>结果为 0，这和逻辑运算中的&amp;&amp;非常类似。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">10</span> <span class="operator">&amp;</span> <span class="number">15</span>, <span class="number">9</span> <span class="operator">&amp;</span> <span class="number">4</span> <span class="operator">&amp;</span> <span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">&amp;</span> <span class="number">15</span> <span class="operator">|</span> <span class="number">9</span> <span class="operator">&amp;</span> <span class="number">4</span> <span class="operator">&amp;</span> <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">10</span> <span class="operator">|</span>         <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br></pre></td></tr></table></figure>
<p>10 的补码为 1010，15 的补码为 1111，按位与运算之后，结果为 1010，即整数 10；9 的补码为 1001，4 的补码为 0100，2 的补码为 0010，按位与运算之后，结果为 0000，即整数 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">-7</span><span class="operator">&amp;</span><span class="number">-1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-7</span><span class="operator">&amp;</span><span class="number">-1</span>                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">18446744073709551609</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>-7 的补码为 60 个 1 加 1001，-1 的补码为 64 个 1，按位与运算之后，结果为 60 个 1 加 1001，即整数<code>18446744073709551609</code>。</p>
<p>可以发现，任何数和 -1 进行位与运算时，最终结果都为任何数本身的十进制数。</p>
<h2 id="位异或运算符"><a href="#位异或运算符" class="headerlink" title="位异或运算符 ^"></a>位异或运算符 ^</h2><p>参与<code>^</code>运算的两个二进制位不同时，结果为 1，相同时，结果为 0。例如<code>1^1</code>结果为 0，<code>0^0</code>结果为 0，<code>1^0</code>结果为 1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">10</span><span class="operator">^</span><span class="number">15</span>, <span class="number">1</span><span class="operator">^</span><span class="number">0</span>, <span class="number">1</span><span class="operator">^</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-----+-----+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span><span class="operator">^</span><span class="number">15</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">^</span><span class="number">0</span> <span class="operator">|</span> <span class="number">1</span><span class="operator">^</span><span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-----+-----+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">5</span> <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-----+-----+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br></pre></td></tr></table></figure>
<p>10 的补码为 1010，15 的补码为 111，按位异或运算之后，结果为 0101，即整数 5；1 的补码为 0001，0 的补码为 0000，按位异或运算之后，结果为 0001；1 和 1 本身二进制位完全相同，因此结果为 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">-7</span><span class="operator">^</span><span class="number">-1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-7</span><span class="operator">^</span><span class="number">-1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br></pre></td></tr></table></figure>
<p>-7 的补码为 60 个 1 加 1001，-1 的补码为 64 个 1，按位异或运算之后，结果为 110，即整数 6。</p>
<h2 id="位左移运算符-lt-lt"><a href="#位左移运算符-lt-lt" class="headerlink" title="位左移运算符 &lt;&lt;"></a>位左移运算符 &lt;&lt;</h2><p>位左移是按指定值的补码形式进行左移，左移指定位数之后，左边高位的数值被移出并丢弃，右边低位空出的位置用 0 补齐。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr &lt;&lt; n</span><br></pre></td></tr></table></figure>
<p>其中，<code>n</code>指定值<code>expr</code>要移位的位数，<code>n</code>必须为非负数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span><span class="operator">&lt;&lt;</span><span class="number">2</span>, <span class="number">4</span><span class="operator">&lt;&lt;</span><span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">&lt;&lt;</span><span class="number">2</span> <span class="operator">|</span> <span class="number">4</span><span class="operator">&lt;&lt;</span><span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>   <span class="number">16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br></pre></td></tr></table></figure>
<p>1 的补码为 0000 0001，左移两位之后变成 0000 0100，即整数 4；4 的补码为 0000 0100，左移两位之后变成 0001 0000，即整数 16。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">-7</span><span class="operator">&lt;&lt;</span><span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-7</span><span class="operator">&lt;&lt;</span><span class="number">2</span>                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">18446744073709551588</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>-7 的补码为 60 个 1 加 1001，左移两位之后变成 56 个 1 加 1110 0100，即整数<code>18446744073709551588</code>。</p>
<h2 id="位右移运算符-gt-gt"><a href="#位右移运算符-gt-gt" class="headerlink" title="位右移运算符 &gt;&gt;"></a>位右移运算符 &gt;&gt;</h2><p>位右移是按指定值的补码形式进行右移，右移指定位数之后，右边低位的数值被移出并丢弃，左边高位空出的位置用 0 补齐。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr &gt;&gt; n</span><br></pre></td></tr></table></figure>
<p>其中，<code>n</code>指定值<code>expr</code>要移位的位数，<code>n</code>必须为非负数。 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span><span class="operator">&gt;&gt;</span><span class="number">1</span>, <span class="number">16</span><span class="operator">&gt;&gt;</span><span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span><span class="operator">&gt;&gt;</span><span class="number">1</span> <span class="operator">|</span> <span class="number">16</span><span class="operator">&gt;&gt;</span><span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>1 的补码为 0000 0001，右移 1 位之后变成 0000 0000，即整数 0；16 的补码为 0001 0000，右移两位之后变成 0000 0100，即整数 4。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">-7</span><span class="operator">&gt;&gt;</span><span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-7</span><span class="operator">&gt;&gt;</span><span class="number">2</span>               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4611686018427387902</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>-7 的补码为 60 个 1 加 1001，右移两位之后变成 0011 加 56 个 1 加 1110，即整数<code>4611686018427387902</code>。</p>
<h2 id="位取反运算符"><a href="#位取反运算符" class="headerlink" title="位取反运算符 ~"></a>位取反运算符 ~</h2><p>位取反是将参与运算的数据按对应的补码进行反转，也就是做<code>NOT</code>操作，即 1 取反后变 0，0 取反后变为 1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">~</span><span class="number">1</span>, <span class="operator">~</span><span class="number">18446744073709551614</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">~</span><span class="number">1</span>                   <span class="operator">|</span> <span class="operator">~</span><span class="number">18446744073709551614</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">18446744073709551614</span> <span class="operator">|</span>                     <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>常量 1 的补码为 63 个 0 加 1 个 1，位取反后就是 63 个 1 加一个 0，转换为二进制后就是<code>18446744073709551614</code>。</p>
<p>可以使用<code>BIN()</code>函数查看 1 取反之后的结果，<code>BIN()</code>函数的作用是将一个十进制数转换为二进制数:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> BIN(<span class="operator">~</span><span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> BIN(<span class="operator">~</span><span class="number">1</span>)                                                          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1111111111111111111111111111111111111111111111111111111111111110</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>1 的补码表示为最右边位为 1，其他位均为 0，取反操作之后，除了最低位，其他位均变为 1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">5</span> <span class="operator">&amp;</span> <span class="operator">~</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">&amp;</span> <span class="operator">~</span><span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br></pre></td></tr></table></figure>
<p>逻辑运算<code>5&amp;~1</code>中，由于位取反运算符<code>~</code>的级别高于位与运算符<code>&amp;</code>，因此先对 1 进行取反操作，结果为 63 个 1 加一个 0，然后再与整数 5 进行与运算，结果为 0100，即整数 4。</p>
<h1 id="运算符的优先级"><a href="#运算符的优先级" class="headerlink" title="运算符的优先级"></a>运算符的优先级</h1><p>运算符的优先级决定了不同的运算符在表达式中计算的先后顺序，下表列出了 MySQL 中的各类运算符及其优先级。</p>
<table>
<thead>
<tr>
<th align="center">优先级由低到高排列</th>
<th align="center">运算符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">&#x3D;(赋值运算)、:&#x3D;</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">II、OR</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">XOR</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">&amp;&amp;、AND</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">NOT</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">BETWEEN、CASE、WHEN、THEN、ELSE</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">&#x3D;(比较运算)、&lt;&#x3D;&gt;、&gt;&#x3D;、&gt;、&lt;&#x3D;、&lt;、&lt;&gt;、!&#x3D;、 IS、LIKE、REGEXP、IN</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">&amp;</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">&lt;&lt;、&gt;&gt;</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">-(减号)、+</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">*、&#x2F;、%</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">^</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">-(负号)、〜（位反转）</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">!</td>
</tr>
</tbody></table>
<p>可以看出，不同运算符的优先级是不同的。一般情况下，级别高的运算符优先进行计算，如果级别相同，MySQL 按表达式的顺序从左到右依次计算。</p>
<p>另外，在无法确定优先级的情况下，可以使用圆括号<code>()</code>来改变优先级，并且这样会使计算过程更加清晰。</p>
<h1 id="IN和NOT-IN用法"><a href="#IN和NOT-IN用法" class="headerlink" title="IN和NOT IN用法"></a>IN和NOT IN用法</h1><p>MySQL 中的<code>IN</code>运算符用来判断表达式的值是否位于给出的列表中；如果是，返回值为 1，否则返回值为 0。</p>
<p><code>NOT IN</code>的作用和<code>IN</code>恰好相反，<code>NOT IN</code>用来判断表达式的值是否不存在于给出的列表中；如果不是，返回值为 1，否则返回值为 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">expr <span class="keyword">IN</span> ( value1, value2, value3 ... valueN )</span><br><span class="line">expr <span class="keyword">NOT</span> <span class="keyword">IN</span> ( value1, value2, value3 ... valueN )</span><br></pre></td></tr></table></figure>
<p><code>expr</code>表示要判断的表达式，<code>value1, value2, value3 ... valueN</code>表示列表中的值。MySQL 会将<code>expr</code>的值和列表中的值逐一对比。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>), <span class="string">&#x27;thks&#x27;</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>, <span class="string">&#x27;thks&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span> <span class="string">&#x27;thks&#x27;</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>, <span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span>                   <span class="number">0</span> <span class="operator">|</span>                         <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">2</span> warnings (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>), <span class="string">&#x27;thks&#x27;</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>, <span class="string">&#x27;thks&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span> <span class="string">&#x27;thks&#x27;</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>, <span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span>                             <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">2</span> warnings (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由结果可以看到，<code>IN</code>和<code>NOT IN</code>的返回值正好相反。</p>
<h2 id="对空值-NULL-的处理"><a href="#对空值-NULL-的处理" class="headerlink" title="对空值 NULL 的处理"></a>对空值 NULL 的处理</h2><p>当<code>IN</code>运算符的两侧有一个为空值<code>NULL</code>时，如果找不到匹配项，则返回值为<code>NULL</code>；如果找到了匹配项，则返回值为 1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>), <span class="number">10</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+-------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span> <span class="number">10</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+-------------------------+</span></span><br><span class="line"><span class="operator">|</span>                   <span class="keyword">NULL</span> <span class="operator">|</span>                    <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SELECT</span> <span class="keyword">NULL</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>), <span class="number">10</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">10</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span> <span class="number">10</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">10</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span>                   <span class="keyword">NULL</span> <span class="operator">|</span>                        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>NOT IN</code>恰好相反，当<code>NOT IN</code>运算符的两侧有一个为空值<code>NULL</code>时，如果找不到匹配项，则返回值为<code>NULL</code>；如果找到了匹配项，则返回值为 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SELECT</span> <span class="keyword">NULL</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>), <span class="number">10</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">0</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-----------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span> <span class="number">10</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">0</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-----------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="keyword">NULL</span> <span class="operator">|</span>                        <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-----------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SELECT</span> <span class="keyword">NULL</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>), <span class="number">10</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">10</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span> <span class="number">10</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">10</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;thks&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="keyword">NULL</span> <span class="operator">|</span>                            <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL约束"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/15/MySQL/MySQL%E7%BA%A6%E6%9D%9F/"
    >MySQL约束</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/15/MySQL/MySQL%E7%BA%A6%E6%9D%9F/" class="article-date">
  <time datetime="2020-04-15T10:21:53.000Z" itemprop="datePublished">2020-04-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>在 MySQL 中，约束是指对表中数据的一种约束，能够帮助数据库管理员更好地管理数据库，并且能够确保数据库中数据的正确性和有效性。</p>
<p>在 MySQL 中，主要支持以下 6 种约束：</p>
<ol>
<li>主键约束<br>在设计数据表时，一般情况下，都会要求表中设置一个主键。主键是表的一个特殊字段，该字段能唯一标识该表中的每条信息。</li>
<li>外键约束<br>外键约束经常和主键约束一起使用，用来确保数据的一致性。</li>
<li>唯一约束<br>唯一约束与主键约束有一个相似的地方，就是它们都能够确保列的唯一性。与主键约束不同的是，唯一约束在一个表中可以有多个，并且设置唯一约束的列是允许有空值的，虽然只能有一个空值。</li>
<li>检查约束<br>检查约束是用来检查数据表中，字段值是否有效的一个手段。</li>
<li>非空约束<br>非空约束用来约束表中的字段不能为空。</li>
<li>默认值约束<br>默认值约束用来约束当数据表中某个字段不输入值时，自动为其添加一个已经设置好的值。<br>默认值约束通常用在已经设置了非空约束的列，这样能够防止数据表在录入数据时出现错误。</li>
</ol>
<p>以上 6 种约束中，一个数据表中只能有一个主键约束，其它约束可以有多个。</p>
<h1 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h1><p>主键分为单字段主键和多字段联合主键。</p>
<p>使用主键应注意以下几点：</p>
<ul>
<li>每个表只能定义一个主键。</li>
<li>主键值必须唯一标识表中的每一行，且不能为<code>NULL</code>，即表中不可能存在有相同主键值的两行数据。这是唯一性原则。</li>
<li>一个字段名只能在联合主键字段表中出现一次。</li>
<li>联合主键不能包含不必要的多余字段。当把联合主键的某一字段删除后，如果剩下的字段构成的主键仍然满足唯一性原则，那么这个联合主键是不正确的。这是最小化原则。</li>
</ul>
<h2 id="在创建表时设置主键约束"><a href="#在创建表时设置主键约束" class="headerlink" title="在创建表时设置主键约束"></a>在创建表时设置主键约束</h2><p>在创建数据表时设置主键约束，既可以为表中的一个字段设置主键，也可以为表中多个字段设置联合主键。但是不论使用哪种方法，在一个表中主键只能有一个。</p>
<h3 id="设置单字段主键"><a href="#设置单字段主键" class="headerlink" title="设置单字段主键"></a>设置单字段主键</h3><p>在<code>CREATE TABLE</code>语句中，通过<code>PRIMARY KEY</code>关键字来指定主键。</p>
<p>在定义字段的同时指定主键：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY [默认值]</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp3;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<p>或者是在定义完所有字段之后指定主键：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>约束名<span class="operator">&gt;</span>] <span class="keyword">PRIMARY</span> KEY [字段名]</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp4</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp4;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<h3 id="在创建表时设置联合主键"><a href="#在创建表时设置联合主键" class="headerlink" title="在创建表时设置联合主键"></a>在创建表时设置联合主键</h3><p>所谓的联合主键，就是这个主键是由一张表中多个字段组成的。</p>
<p>比如，设置学生选课数据表时，如果用学生编号做主键，那么一个学生就只能选择一门课程。如果用课程编号做主键，那么一门课程只能有一个学生来选。显然，这两种情况都是不符合实际情况的。</p>
<p>实际上设计学生选课表，要限定的是一个学生只能选择同一课程一次。因此，学生编号和课程编号可以放在一起共同作为主键，这也就是联合主键了。</p>
<p>主键由多个字段联合组成：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">PRIMARY</span> KEY [字段<span class="number">1</span>，字段<span class="number">2</span>，…,字段n]</span><br></pre></td></tr></table></figure>
<p>注意：当主键是由多个字段组成时，不能直接在字段名后面声明主键约束。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp5</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY(name,deptId)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp5;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="在修改表时添加主键约束"><a href="#在修改表时添加主键约束" class="headerlink" title="在修改表时添加主键约束"></a>在修改表时添加主键约束</h2><p>主键约束不仅可以在创建表的同时创建，也可以在修改表时添加。但是需要注意的是，设置成主键约束的每个字段都不允许有空值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp2;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">30</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.14</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp2 <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(id);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.94</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp2;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">30</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.12</span> sec)</span><br></pre></td></tr></table></figure>
<p>通常情况下，当在修改表时要设置表中某个字段的主键约束时，要确保设置成主键约束的字段中值不能够有重复的，并且要保证是非空的。否则，无法设置主键约束。</p>
<h2 id="删除主键约束"><a href="#删除主键约束" class="headerlink" title="删除主键约束"></a>删除主键约束</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp2 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.94</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>由于主键约束在一个表中只能有一个，因此不需要指定主键名就可以删除一个表中的主键约束。</p>
<h1 id="主键自增长"><a href="#主键自增长" class="headerlink" title="主键自增长"></a>主键自增长</h1><p>在 MySQL 中，当主键定义为自增长后，这个主键的值就不再需要用户输入数据了，而由数据库系统根据定义自动赋值。每增加一条记录，主键会自动以相同的步长进行增长。</p>
<p>通过给字段添加<code>AUTO_INCREMENT</code>属性来实现主键自增长。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 数据类型 AUTO_INCREMENT</span><br></pre></td></tr></table></figure>
<ul>
<li>默认情况下，<code>AUTO_INCREMENT</code>的初始值是 1，每新增一条记录，字段值自动加 1。</li>
<li>一个表中只能有一个字段使用<code>AUTO_INCREMENT</code>约束，且该字段必须有唯一索引，以避免序号重复（即为主键或主键的一部分）。</li>
<li><code>AUTO_INCREMENT</code>约束的字段必须具备<code>NOT NULL</code>属性。</li>
<li><code>AUTO_INCREMENT</code>约束的字段只能是整数类型（<code>TINYINT、SMALLINT、INT、BIGINT</code>等）。</li>
<li><code>AUTO_INCREMENT</code>约束字段的最大值受该字段的数据类型约束，如果达到上限，<code>AUTO_INCREMENT</code>就会失效。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student(</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br></pre></td></tr></table></figure>
<p>加上<code>AUTO_INCREMENT</code>约束条件后，字段中的每个值都是自动增加的。因此，这个字段不可能出现相同的值。通常情况下，<code>AUTO_INCREMENT</code>都是作为<code>id</code>字段的约束条件，并且将<code>id</code>字段作为表的主键。</p>
<h2 id="指定自增字段初始值"><a href="#指定自增字段初始值" class="headerlink" title="指定自增字段初始值"></a>指定自增字段初始值</h2><p>如果第一条记录设置了该字段的初始值，那么新增加的记录就从这个初始值开始自增。例如，如果表中插入的第一条记录的<code>id</code>值设置为 5，那么再插入记录时，<code>id</code>值就会从 5 开始往上增加。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student2 (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">PRIMARY</span> KEY(ID)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ) AUTO_INCREMENT<span class="operator">=</span><span class="number">100</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_student2 (name) <span class="keyword">VALUES</span>(<span class="string">&#x27;Java&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_student2;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span> Java <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+------+</span></span><br></pre></td></tr></table></figure>
<p>由结果可以看出，<code>id</code>值从 100 开始自动增长。</p>
<h2 id="自增字段值不连续"><a href="#自增字段值不连续" class="headerlink" title="自增字段值不连续"></a>自增字段值不连续</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student3(</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_student3 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>此时，表<code>tb_student3</code>中已经有了<code>(1,1,1)</code>这条记录，这时再执行一条插入数据命令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_student3 <span class="keyword">VALUES</span>(<span class="keyword">null</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;name&#x27;</span></span><br></pre></td></tr></table></figure>
<p>由于表中已经存在<code>name=1</code>的记录，所以报<code>Duplicate key error</code>（唯一键冲突）。在这之后，再插入新的数据时，自增<code>id</code>就是 3，这样就出现了自增字段值不连续的情况。</p>
<h1 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h1><p>MySQL 外键约束（<code>FOREIGN KEY</code>）是表的一个特殊字段，经常与主键约束一起使用。对于两个具有关联关系的表而言，相关联字段中主键所在的表就是主表（父表），外键所在的表就是从表（子表）。</p>
<p>外键用来建立主表与从表的关联关系，为两个表的数据建立连接，约束两个表中数据的一致性和完整性。</p>
<p>主表删除某条记录时，从表中与之对应的记录也必须有相应的改变。一个表可以有一个或多个外键，外键可以为空值，若不为空值，则每一个外键的值必须等于主表中主键的某个值。</p>
<p>定义外键时，需要遵守下列规则：</p>
<ul>
<li>主表必须已经存在于数据库中，或者是当前正在创建的表。如果是后一种情况，则主表与从表是同一个表，这样的表称为自参照表，这种结构称为自参照完整性。</li>
<li>必须为主表定义主键。</li>
<li>主键不能包含空值，但允许在外键中出现空值。也就是说，只要外键的每个非空值出现在指定的主键中，这个外键的内容就是正确的。</li>
<li>在主表的表名后面指定列名或列名的组合。这个列或列的组合必须是主表的主键或候选键。</li>
<li>外键中列的数目必须和主表的主键中列的数目相同。</li>
<li>外键中列的数据类型必须和主表主键中对应列的数据类型相同。</li>
</ul>
<h2 id="在创建表时设置外键约束"><a href="#在创建表时设置外键约束" class="headerlink" title="在创建表时设置外键约束"></a>在创建表时设置外键约束</h2><p>在<code>CREATE TABLE</code>语句中，通过<code>FOREIGN KEY</code>关键字来指定外键：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>外键名<span class="operator">&gt;</span>] <span class="keyword">FOREIGN</span> KEY(字段名[,字段名<span class="number">2</span>,…])</span><br><span class="line"><span class="keyword">REFERENCES</span> <span class="operator">&lt;</span>主表名<span class="operator">&gt;</span>(主键列<span class="number">1</span>[,主键列<span class="number">2</span>,…])</span><br></pre></td></tr></table></figure>
<p>为了展现表与表之间的外键关系，在<code>test_db</code>数据库中创建一个部门表<code>tb_dept1</code>，表结构如下表所示。</p>
<table>
<thead>
<tr>
<th align="center">字段名称</th>
<th align="center">数据类型</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id</td>
<td align="center">INT(11)</td>
<td align="center">部门编号</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">VARCHAR(22)</td>
<td align="center">部门名称</td>
</tr>
<tr>
<td align="center">location</td>
<td align="center">VARCHAR(22)</td>
<td align="center">部门位置</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_dept1</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">22</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br></pre></td></tr></table></figure>
<p>创建数据表<code>tb_emp6</code>，并在表<code>tb_emp6</code>上创建外键约束，让它的键<code>deptId</code>作为外键关联到表<code>tb_dept1</code>的主键<code>id</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp6</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">CONSTRAINT</span> fk_emp_dept1</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FOREIGN</span> KEY(deptId) <span class="keyword">REFERENCES</span> tb_dept1(id)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp6;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span> MUL <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<p>以上语句执行成功之后，在表<code>tb_emp6</code>上添加了名称为<code>fk_emp_dept1</code>的外键约束，外键名称为<code>deptId</code>，其依赖于表<code>tb_dept1</code>的主键<code>id</code>。</p>
<blockquote>
<p>注意：从表的外键关联的必须是主表的主键，且主键和外键的数据类型必须一致。例如，两者都是<code>INT</code>类型，或者都是<code>CHAR</code>类型。如果不满足这样的要求，在创建从表时，就会出现<code>ERROR 1005(HY000): Can&#39;t create table</code>错误。</p>
</blockquote>
<h2 id="在修改表时添加外键约束"><a href="#在修改表时添加外键约束" class="headerlink" title="在修改表时添加外键约束"></a>在修改表时添加外键约束</h2><p>外键约束也可以在修改表时添加，但是添加外键约束的前提是：从表中外键列中的数据必须与主表中主键列中的数据一致或者是没有数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>外键名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>) <span class="keyword">REFERENCES</span> <span class="operator">&lt;</span>主表名<span class="operator">&gt;</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure>
<p>修改数据表<code>tb_emp2</code>，将字段<code>deptId</code>设置为外键，与数据表<code>tb_dept1</code>的主键<code>id</code>进行关联，SQL 语句和运行结果如下所示。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp2</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_tb_dept1</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FOREIGN</span> KEY(deptId)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">REFERENCES</span> tb_dept1(id);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">1.38</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp2\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: tb_emp2</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp2` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `deptId` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `fk_tb_dept1` (`deptId`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fk_tb_dept1` <span class="keyword">FOREIGN</span> KEY (`deptId`) <span class="keyword">REFERENCES</span> `tb_dept1` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.12</span> sec)</span><br></pre></td></tr></table></figure>
<p>注意：在为已经创建好的数据表添加外键约束时，要确保添加外键约束的列的值全部来源于主键列，并且外键列不能为空。</p>
<h2 id="删除外键约束"><a href="#删除外键约束" class="headerlink" title="删除外键约束"></a>删除外键约束</h2><p>当一个表中不需要外键约束时，就需要从表中将其删除。外键一旦删除，就会解除主表和从表间的关联关系。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY <span class="operator">&lt;</span>外键约束名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp2 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY fk_tb_dept1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.19</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp2\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: tb_emp2</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp2` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `deptId` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `fk_tb_dept1` (`deptId`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>可以看到，<code>tb_emp2</code>中已经不存在<code>FOREIGN KEY</code>，原有的名称为<code>fk_emp_dept</code>的外键约束删除成功。</p>
<h1 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h1><p>MySQL 唯一约束是指所有记录中字段的值不能重复出现。例如，为<code>id</code>字段加上唯一性约束后，每条记录的<code>id</code>值都是唯一的，不能出现重复的情况。</p>
<p>唯一约束与主键约束相似的是它们都可以确保列的唯一性。不同的是，唯一约束在一个表中可有多个，并且设置唯一约束的列允许有空值(<code>NULL</code>)，且可以有<strong>多个空值</strong>。而主键约束在一个表中只能有一个，且不允许有空值。比如，在用户信息表中，为了避免表中用户名重名，可以把用户名设置为唯一约束。</p>
<h2 id="在创建表时设置唯一约束"><a href="#在创建表时设置唯一约束" class="headerlink" title="在创建表时设置唯一约束"></a>在创建表时设置唯一约束</h2><p>唯一约束可以在创建表时直接设置，通常设置在除了主键以外的其它列上。</p>
<p>在定义完列之后直接使用<code>UNIQUE</code>关键字指定唯一约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 行级约束设置方法</span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">UNIQUE</span></span><br><span class="line"># 表级约束设置方法</span><br><span class="line">[<span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span>] <span class="keyword">UNIQUE</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_dept2</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">22</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line"># 或者</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_dept2</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">22</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">CONSTRAINT</span> uk_dept <span class="keyword">UNIQUE</span>(name)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line"></span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept2;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">40</span>) <span class="operator">|</span> YES  <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="在修改表时添加唯一约束"><a href="#在修改表时添加唯一约束" class="headerlink" title="在修改表时添加唯一约束"></a>在修改表时添加唯一约束</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span>] <span class="keyword">UNIQUE</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_dept1 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> unique_name <span class="keyword">UNIQUE</span>(name);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.63</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept1;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="删除唯一约束"><a href="#删除唯一约束" class="headerlink" title="删除唯一约束"></a>删除唯一约束</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> INDEX <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_dept1 <span class="keyword">DROP</span> INDEX unique_name;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.20</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept1;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="检查约束"><a href="#检查约束" class="headerlink" title="检查约束"></a>检查约束</h1><p>MySQL 检查约束（<code>CHECK</code>）是用来检查数据表中字段值有效性的一种手段，可以通过<code>CREATE TABLE</code>或<code>ALTER TABLE</code>语句实现。设置检查约束时要根据实际情况进行设置，这样能够减少无效数据的输入。</p>
<h2 id="选取设置检查约束的字段"><a href="#选取设置检查约束的字段" class="headerlink" title="选取设置检查约束的字段"></a>选取设置检查约束的字段</h2><p>检查约束使用<code>CHECK</code>关键字：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CHECK</span> <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中，“表达式”指的就是 SQL 表达式，用于指定需要检查的限定条件。</p>
<p>若将<code>CHECK</code>约束子句置于表中某个列的定义之后，则这种约束也称为基于列的<code>CHECK</code>约束。</p>
<p>在更新表数据的时候，系统会检查更新后的数据行是否满足<code>CHECK</code>约束中的限定条件。MySQL 可以使用简单的表达式来实现<code>CHECK</code>约束，也允许使用复杂的表达式作为限定条件，例如在限定条件中加入子查询。</p>
<blockquote>
<p>注意：若将 CHECK 约束子句置于所有列的定义以及主键约束和外键定义之后，则这种约束也称为基于表的 CHECK 约束。该约束可以同时对表中多个列设置限定条件。</p>
</blockquote>
<h2 id="在创建表时设置检查约束"><a href="#在创建表时设置检查约束" class="headerlink" title="在创建表时设置检查约束"></a>在创建表时设置检查约束</h2><p>一般情况下，如果系统的表结构已经设计完成，那么在创建表时就可以为字段设置检查约束了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CHECK</span>(<span class="operator">&lt;</span>检查约束<span class="operator">&gt;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp7</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">CHECK</span>(salary<span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">AND</span> salary<span class="operator">&lt;</span><span class="number">100</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FOREIGN</span> KEY(deptId) <span class="keyword">REFERENCES</span> tb_dept1(id)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="在修改表时添加检查约束"><a href="#在修改表时添加检查约束" class="headerlink" title="在修改表时添加检查约束"></a>在修改表时添加检查约束</h2><p>如果一个表创建完成，可以通过修改表的方式为表添加检查约束。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp7 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>检查约束名<span class="operator">&gt;</span> <span class="keyword">CHECK</span>(<span class="operator">&lt;</span>检查约束<span class="operator">&gt;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp7</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> check_id</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">CHECK</span>(id<span class="operator">&gt;</span><span class="number">0</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.19</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="删除检查约束"><a href="#删除检查约束" class="headerlink" title="删除检查约束"></a>删除检查约束</h2><p>修改表时删除检查约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>检查约束名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp7 <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> check_id;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.19</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h1 id="默认值约束"><a href="#默认值约束" class="headerlink" title="默认值约束"></a>默认值约束</h1><p>默认值约束用来指定某列的默认值。在表中插入一条新记录时，如果没有为某个字段赋值，系统就会自动为这个字段插入默认值。</p>
<p>默认值约束通常用在已经设置了非空约束的列，这样能够防止数据表在录入数据时出现错误。</p>
<h2 id="在创建表时设置默认值约束"><a href="#在创建表时设置默认值约束" class="headerlink" title="在创建表时设置默认值约束"></a>在创建表时设置默认值约束</h2><p>创建表时可以使用<code>DEFAULT</code>关键字设置默认值约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>其中，“默认值”为该字段设置的默认值，如果是字符类型的，要用单引号括起来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_dept3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">22</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;Beijing&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> Beijing <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<p>以上语句执行成功之后，表<code>tb_dept3</code>上的字段<code>location</code>拥有了一个默认值<code>Beijing</code>，新插入的记录如果没有指定部门位置，则默认都为<code>Beijing</code>。</p>
<p>注意：在创建表时为列添加默认值，可以一次为多个列添加默认值，需要注意不同列的数据类型。</p>
<h2 id="在修改表时添加默认值约束"><a href="#在修改表时添加默认值约束" class="headerlink" title="在修改表时添加默认值约束"></a>在修改表时添加默认值约束</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span>;</span><br><span class="line"># 或</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> MODIFY <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_dept3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> location</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;Shanghai&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span>  <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> Shanghai <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="删除默认值约束"><a href="#删除默认值约束" class="headerlink" title="删除默认值约束"></a>删除默认值约束</h2><p>当一个表中的列不需要设置默认值时，就需要从表中将其删除。</p>
<p>修改表时删除默认值约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br><span class="line"># 或</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> MODIFY <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_dept3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> location</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span>  <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br></pre></td></tr></table></figure>
<h1 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h1><p>MySQL 非空约束（<code>NOT NULL</code>）指字段的值不能为空。对于使用了非空约束的字段，如果用户在添加数据时没有指定值，数据库系统就会报错。可以通过<code>CREATE TABLE</code>或<code>ALTER TABLE</code>语句实现。在表中某个列的定义后加上关键字<code>NOT NULL</code>作为限定词，来约束该列的取值不能为空。</p>
<blockquote>
<p>注意：空字符串<code>&#39;&#39;</code>不等于<code>NULL</code>，0 也不等于<code>NULL</code>。</p>
</blockquote>
<h2 id="在创建表时设置非空约束"><a href="#在创建表时设置非空约束" class="headerlink" title="在创建表时设置非空约束"></a>在创建表时设置非空约束</h2><p>创建表时可以使用<code>NOT NULL</code>关键字设置非空约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_dept4</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">22</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="在修改表时添加非空约束"><a href="#在修改表时添加非空约束" class="headerlink" title="在修改表时添加非空约束"></a>在修改表时添加非空约束</h2><p>如果在创建表时忘记了为字段设置非空约束，也可以通过修改表进行非空约束的添加。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"># 或</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> MODIFY <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_dept4</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> location</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept4;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span>  <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="删除非空约束"><a href="#删除非空约束" class="headerlink" title="删除非空约束"></a>删除非空约束</h2><p>修改表时删除非空约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NULL</span>;</span><br><span class="line"># 或</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> MODIFY <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_dept4</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> CHANGE <span class="keyword">COLUMN</span> location</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> location <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_dept4;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span>  <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">22</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> location <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+----------+-------+</span></span><br></pre></td></tr></table></figure>
<h1 id="查看表中的约束"><a href="#查看表中的约束" class="headerlink" title="查看表中的约束"></a>查看表中的约束</h1><p>在 MySQL 中可以使用<code>SHOW CREATE TABLE</code>语句来查看表中的约束。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp8</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">22</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">CHECK</span>(salary<span class="operator">&gt;</span><span class="number">0</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FOREIGN</span> KEY(deptId) <span class="keyword">REFERENCES</span> tb_dept1(id)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp8 \G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: tb_emp8</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp8` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">22</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `deptId` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `name` (`name`),</span><br><span class="line">  KEY `deptId` (`deptId`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `tb_emp8_ibfk_1` <span class="keyword">FOREIGN</span> KEY (`deptId`) <span class="keyword">REFERENCES</span> `tb_dept1` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-vue/vue生命周期深入"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/14/vue/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B7%B1%E5%85%A5/"
    >vue生命周期深入</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/14/vue/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B7%B1%E5%85%A5/" class="article-date">
  <time datetime="2020-04-14T03:42:05.000Z" itemprop="datePublished">2020-04-14</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="生命周期钩子函数"><a href="#生命周期钩子函数" class="headerlink" title="生命周期钩子函数"></a>生命周期钩子函数</h1><p>生命周期：Vue实例从开始创建、初始化数据、编译模板、挂载Dom→渲染、更新→渲染、卸载等一系列过程，我们称这是Vue的生命周期，各个阶段有相对应的事件钩子。</p>
<table>
<thead>
<tr>
<th align="center">生命周期钩子</th>
<th align="center">组件状态</th>
<th align="center">最佳实践</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>beforeCreate</code>(创建前)</td>
<td align="center">实例初始化之后，<code>this</code>指向创建的实例，不能访问到<code>data、computed、watch、methods</code>上的方法和数据</td>
<td align="center">常用于初始化非响应式变量</td>
</tr>
<tr>
<td align="center"><code>created</code>(创建后)</td>
<td align="center">实例创建完成，可访问<code>data、computed、watch、methods</code>上的方法和数据，未挂载到DOM，不能访问<code>$el</code>属性，<code>$refs</code>属性内容为空数组</td>
<td align="center">常用于简单的ajax请求，页面的初始化</td>
</tr>
<tr>
<td align="center"><code>beforeMount</code>(挂载前)</td>
<td align="center">在挂载开始之前被调用，相关的<code>render</code>函数首次被调用，实例已完成以下的配置：编译模板，把<code>data</code>里面的数据和模板生成html，注意此时还没有挂载html到页面上</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>mounted</code>(挂载后)</td>
<td align="center">实例挂载到DOM上，此时可以通过DOM API获取到DOM节点，<code>$refs</code>属性可以访问</td>
<td align="center">常用于获取VNode信息和操作，ajax请求</td>
</tr>
<tr>
<td align="center"><code>beforeUpdate</code>(更新前)</td>
<td align="center">响应式数据更新前调用，发生在虚拟DOM重新渲染和打补丁之前</td>
<td align="center">适合在更新前访问现有的DOM，比如手动移除已添加的事件监听器</td>
</tr>
<tr>
<td align="center"><code>updated</code>(更新后)</td>
<td align="center">虚拟DOM重新渲染和打补丁之后，组件DOM已经更新，可执行依赖于DOM的操作</td>
<td align="center">避免在这个钩子函数中操作数据，可能陷入死循环</td>
</tr>
<tr>
<td align="center"><code>beforeDestroy</code>(销毁前)</td>
<td align="center">实例销毁之前调用，实例仍然完全可用</td>
<td align="center">常用于销毁定时器，解绑全局事件，销毁插件对象等</td>
</tr>
<tr>
<td align="center"><code>destroyed</code>(销毁后)</td>
<td align="center">实例销毁后调用，调用后，所有的事件监听器会被移除，所有的子实例也会被销毁</td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="单个组件的生命周期"><a href="#单个组件的生命周期" class="headerlink" title="单个组件的生命周期"></a>单个组件的生命周期</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>单组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dataVar += 1&quot;</span>&gt;</span>更新 &#123;&#123;dataVar&#125;&#125;<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;handleDestroy&quot;</span>&gt;</span>销毁<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">dataVar</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;single&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--beforeCreate`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--created`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--beforeMount`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--mounted`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--beforeUpdate`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--updated`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--beforeDestroy`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">destroyed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;<span class="variable language_">this</span>.compName&#125;</span>--destroyed`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$destroy()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>初始化组件时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--single--beforeCreate</span><br><span class="line">--single--created</span><br><span class="line">--single--beforeMount</span><br><span class="line">--single--mounted</span><br></pre></td></tr></table></figure>
<p>当<code>data</code>中的值变化时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--single--beforeUpdate</span><br><span class="line">--single--updated</span><br></pre></td></tr></table></figure>
<p>当组件销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--single--beforeDestroy</span><br><span class="line">--single--destroyed</span><br></pre></td></tr></table></figure>
<p>从打印结果可以看出:</p>
<ul>
<li>初始化组件时，仅执行了<code>beforeCreate/Created/beforeMount/mounted</code>四个钩子函数。</li>
<li>当改变<code>data</code>中定义的变量（响应式变量）时，会执行<code>beforeUpdate/updated</code>钩子函数。</li>
<li>当切换组件（当前组件未缓存）时，会执行<code>beforeDestory/destroyed</code>钩子函数。</li>
<li>初始化和销毁时的生命钩子函数均只会执行一次，<code>beforeUpdate/updated</code>可多次执行。</li>
</ul>
<h1 id="父子组件的生命周期"><a href="#父子组件的生命周期" class="headerlink" title="父子组件的生命周期"></a>父子组件的生命周期</h1><p>将单组件作为基础组件（由于<code>props</code>在<code>beforeCreate()</code>中未初始化），需要做如下更改：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">compName</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&#x27;single&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// this.compName = &#x27;single&#x27;</span></span><br><span class="line">  <span class="comment">// console.log(`--$&#123;this.compName&#125;--beforeCreate`)</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">` --data未初始化--beforeCreate`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>父组件代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;complex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>复杂组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">lifecycle-single</span> <span class="attr">compName</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">lifecycle-single</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">COMPONENT_NAME</span> = <span class="string">&#x27;complex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">LifecycleSingle</span> <span class="keyword">from</span> <span class="string">&#x27;./LifeCycleSingle&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeCreate`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--created`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeMount`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--mounted`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeUpdate`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--updated`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeDestroy`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">destroyed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--destroyed`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">LifecycleSingle</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>初始化组件时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--complex--beforeCreate</span><br><span class="line">--complex--created</span><br><span class="line">--complex--beforeMount</span><br><span class="line">  --data未初始化--beforeCreate</span><br><span class="line">  --child--created</span><br><span class="line">  --child--beforeMount</span><br><span class="line">  --child--mounted</span><br><span class="line">--complex--mounted</span><br><span class="line">--complex--beforeUpdate</span><br><span class="line">--complex--updated</span><br></pre></td></tr></table></figure>
<p>当子组件<code>data</code>中的值变化时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--child--beforeUpdate</span><br><span class="line">--child--updated</span><br></pre></td></tr></table></figure>
<p>当父组件<code>data</code>中的值变化时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--complex--beforeUpdate</span><br><span class="line">--complex--updated</span><br></pre></td></tr></table></figure>
<p>当<code>props</code>改变时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--complex--beforeUpdate</span><br><span class="line">  --child--beforeUpdate</span><br><span class="line">  --child--updated</span><br><span class="line">--complex-updated</span><br></pre></td></tr></table></figure>
<p>当子组件销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--child--beforeDestroy</span><br><span class="line">--child--destroyed</span><br></pre></td></tr></table></figure>
<p>当父组件销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--complex--beforeDestroy</span><br><span class="line">  --child--beforeDestroy</span><br><span class="line">  --child--destroyed</span><br><span class="line">--complex--destroyed</span><br></pre></td></tr></table></figure>
<p>从打印结果可以看出：</p>
<ul>
<li>仅当子组件完成挂载后，父组件才会挂载。</li>
<li>当子组件完成挂载后，父组件会主动执行一次<code>beforeUpdate/updated</code>钩子函数（仅首次）。</li>
<li>父子组件在<code>data</code>变化中是分别监控的，但是在更新<code>props</code>中的数据是关联的。</li>
<li>销毁父组件时，先将子组件销毁后才会销毁父组件。</li>
</ul>
<h1 id="兄弟组件的生命周期"><a href="#兄弟组件的生命周期" class="headerlink" title="兄弟组件的生命周期"></a>兄弟组件的生命周期</h1><p>在上面的基础上，复杂组件做如下更改：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;complex&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>复杂组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lifecycle-single</span> <span class="attr">compName</span>=<span class="string">&quot;cihld1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">lifecycle-single</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lifecycle-single</span> <span class="attr">compName</span>=<span class="string">&quot;child2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">lifecycle-single</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dataVar += 1&quot;</span>&gt;</span>complex更新 &#123;&#123;dataVar&#125;&#125;<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;handleDestroy&quot;</span>&gt;</span>complex销毁<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>初始化组件时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--complex--beforeCreate</span><br><span class="line">--complex--created</span><br><span class="line">--complex--beforeMount</span><br><span class="line">  --data未初始化--beforeCreate</span><br><span class="line">  --child1--created</span><br><span class="line">  --child1--beforeMount</span><br><span class="line">  --data未初始化--beforeCreate</span><br><span class="line">  --child2--created</span><br><span class="line">  --child2--beforeMount</span><br><span class="line">  --child1--mounted</span><br><span class="line">  --child2--mounted</span><br><span class="line">--complex--mounted</span><br><span class="line">--complex--beforeUpdate</span><br><span class="line">--complex--updated</span><br></pre></td></tr></table></figure>
<p>当<code>child1</code>更新和销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--child1--beforeUpdate</span><br><span class="line">--child1--updated</span><br><span class="line">--child1--beforeDestroy</span><br><span class="line">--child1--destroyed</span><br></pre></td></tr></table></figure>
<p>当<code>child2</code>更新和销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--child2--beforeUpdate</span><br><span class="line">--child2--updated</span><br><span class="line">--child2--beforeDestroy</span><br><span class="line">--child2--destroyed</span><br></pre></td></tr></table></figure>
<p>当父组件销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--complex--beforeDestroy</span><br><span class="line">  --child1--beforeDestroy</span><br><span class="line">  --child1--destroyed</span><br><span class="line">  --child2--beforeDestroy</span><br><span class="line">  --child2--destroyed</span><br><span class="line">--complex--destroyed</span><br></pre></td></tr></table></figure>
<p>从打印结果可以看出:</p>
<ul>
<li>组件的初始化（<code>mounted</code>之前）分开进行，挂载是从上到下依次进行</li>
<li>当没有数据关联时，兄弟组件之间的更新和销毁是互不关联的</li>
</ul>
<h1 id="mixin的生命周期"><a href="#mixin的生命周期" class="headerlink" title="mixin的生命周期"></a>mixin的生命周期</h1><p>在上面的基础上，添加一个mixin.js文件，内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">COMPONENT_NAME</span> = <span class="string">&#x27;lifecycleMixin&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="variable constant_">COMPONENT_NAME</span>,</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeCreate`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--created`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeMount`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--mounted`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeUpdate`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--updated`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--beforeDestroy`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">destroyed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`--<span class="subst">$&#123;COMPONENT_NAME&#125;</span>--destroyed`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同样的，复杂组件做如下更改：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lifecycleMixin <span class="keyword">from</span> <span class="string">&#x27;./mixin&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">mixins</span>: [lifecycleMixin],</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组件初始化时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">--lifecycleMixin--beforeCreate</span><br><span class="line">--complex--beforeCreate</span><br><span class="line">--lifecycleMixin--created</span><br><span class="line">--complex--created</span><br><span class="line">--lifecycleMixin--beforeMount</span><br><span class="line">--complex--beforeMount</span><br><span class="line">  --data未初始化--beforeCreate</span><br><span class="line">  --child1--created</span><br><span class="line">  --child1--beforeMount</span><br><span class="line">  --data未初始化--beforeCreate</span><br><span class="line">  --child2--created</span><br><span class="line">  --child2--beforeMount</span><br><span class="line">  --child1--mounted</span><br><span class="line">  --child2--mounted</span><br><span class="line">--lifecycleMixin--mounted</span><br><span class="line">--complex--mounted</span><br><span class="line">--lifecycleMixin--beforeUpdate</span><br><span class="line">--complex--beforeUpdate</span><br><span class="line">--lifecycleMixin--updated</span><br><span class="line">--complex--updated</span><br></pre></td></tr></table></figure>
<p>组件销毁时，打印：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--lifecycleMixin--beforeDestroy</span><br><span class="line">--complex--beforeDestroy</span><br><span class="line">  --child1--beforeDestroy</span><br><span class="line">  --child1--destroyed</span><br><span class="line">  --child2--beforeDestroy</span><br><span class="line">  --child2--destroyed</span><br><span class="line">--lifecycleMixin--destroyed</span><br><span class="line">--complex--destroyed</span><br></pre></td></tr></table></figure>
<p>从打印结果可以看出:</p>
<ul>
<li><code>mixin</code>中的生命周期与引入该组件的生命周期是仅仅关联的，且<code>mixin</code>的生命周期优先执行。</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-前端/js/进阶/JS深入理解原型和原型链"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/"
    >JS深入理解原型和原型链</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/" class="article-date">
  <time datetime="2020-04-13T01:22:50.000Z" itemprop="datePublished">2020-04-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a> / <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/JS/">JS</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h1><h2 id="原型对象的理解"><a href="#原型对象的理解" class="headerlink" title="原型对象的理解"></a>原型对象的理解</h2><h4 id="函数对象的-prototype-属性"><a href="#函数对象的-prototype-属性" class="headerlink" title="函数对象的 prototype 属性"></a>函数对象的 prototype 属性</h4><p>我们创建的每一个函数都有一个<code>prototype</code>属性，这个属性是一个指针，指向一个对象。这个对象的用途是包含可以由特定类型的所有实例共享的属性和方法，简单来说，该函数实例化的所有对象的<code>__proto__</code>的属性指向这个对象，它是该函数所有实例化对象的原型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为原型对象添加方法</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img1.png" class="">
<h4 id="constructor-属性"><a href="#constructor-属性" class="headerlink" title="constructor 属性"></a>constructor 属性</h4><p>当函数创建，<code>prototype</code>属性指向一个原型对象时，在默认情况下，这个原型对象将会获得一个<code>constructor</code>属性，这个属性是一个指针，指向<code>prototype</code>所在的函数对象。<br>也就是<code>Person.prototype.constructor</code>指向<code>Person</code>函数对象。</p>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img2.png" class="">
<h4 id="对象的-proto-属性"><a href="#对象的-proto-属性" class="headerlink" title="对象的__proto__属性"></a>对象的<code>__proto__</code>属性</h4><p>当我们调用构造函数创建一个新实例后，在这个实例的内部将包含一个指针，指向构造函数的原型对象，这个指针叫<code>[[Prototype]]</code>。所有的对象都含有<code>[[Prototype]]</code>属性，指向它们的原型对象。可以通过对象的<code>__proto__</code>属性来访问。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student.<span class="property">__proto__</span> === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>从上面我们可以看出，这个连接是存在于实例与构造函数的原型对象之间的，而不是存在于实例和构造函数之间的。</p>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img3.png" class="">

<h4 id="prototype和-proto-的区别"><a href="#prototype和-proto-的区别" class="headerlink" title="prototype和__proto__的区别"></a>prototype和__proto__的区别</h4><img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/8.png" class="">

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property"><span class="keyword">prototype</span></span>);  <span class="comment">//undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span>);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property"><span class="keyword">prototype</span></span>);  <span class="comment">//b &#123;&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">__proto__</span>);  <span class="comment">//function() &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="proto-属性指向谁"><a href="#proto-属性指向谁" class="headerlink" title="__proto__属性指向谁"></a>__proto__属性指向谁</h4><p><code>__proto__</code>的指向取决于对象创建时的实现方式。</p>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/9.png" class="">

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*1、字面量方式*/</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span>);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span> === a.<span class="property">constructor</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*2、构造器方式*/</span></span><br><span class="line"><span class="keyword">var</span> A = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span>); <span class="comment">//A &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span> === a.<span class="property">constructor</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*3、Object.create()方式*/</span></span><br><span class="line"><span class="keyword">var</span> a1 = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> a2 = <span class="title class_">Object</span>.<span class="title function_">create</span>(a1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a2.<span class="property">__proto__</span>); <span class="comment">//Object &#123;a: 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a2.<span class="property">__proto__</span> === a1.<span class="property">constructor</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<h2 id="原型属性"><a href="#原型属性" class="headerlink" title="原型属性"></a>原型属性</h2><h4 id="属性访问"><a href="#属性访问" class="headerlink" title="属性访问"></a>属性访问</h4><p>每当代码读取对象的某个属性时，首先会在对象本身搜索这个属性，如果找到该属性就返回该属性的值，如果没有找到，则继续搜索该对象对应的原型对象，以此类推下去。<br>因为这样的搜索过程，因此我们如果在实例中添加一个属性时，这个属性就会屏蔽原型对象中保存的同名属性，因为在实例中搜索到该属性后就不会再向后搜索了。</p>
<h4 id="属性判断"><a href="#属性判断" class="headerlink" title="属性判断"></a>属性判断</h4><p>在属性确认存在的情况下，我们可以使用<code>hasOwnProperty()</code>方法来判断一个属性是存在于实例中，还是存在于原型中。这个方法只有在给定属性存在于实例中时，才会返回<code>true</code>。<br>判断一个属性是否存在，我们可以使用<code>in</code>操作符，它会在对象能够访问给定属性时返回<code>true</code>，无论该属性存在于实例还是原型中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hasPrototypeProperty</span>(<span class="params">object, name</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> !object.<span class="title function_">hasOwnProperty</span>(name) &amp;&amp; (name <span class="keyword">in</span> object);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;laker&quot;</span> ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student.<span class="property">name</span>); <span class="comment">// laker</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">hasPrototypeProperty</span>(student, <span class="string">&quot;name&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">student.<span class="property">name</span> = <span class="string">&quot;xiaoming&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student.<span class="property">name</span>); <span class="comment">//xiaoming 屏蔽了原型对象中的 name 属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">hasPrototypeProperty</span>(student, <span class="string">&quot;name&quot;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h4 id="for-in-循环"><a href="#for-in-循环" class="headerlink" title="for-in 循环"></a>for-in 循环</h4><p>在使用<code>for-in</code>循环时，返回的是所有能够通过对象访问的、可枚举的属性，其中包括了存在于实例中的属性，也包括了存在于原型中的属性。<br>需要注意的一点是，屏蔽了实例中不可枚举属性的实例属性也会在<code>for-in</code>循环中返回。</p>
<h4 id="所有属性获取"><a href="#所有属性获取" class="headerlink" title="所有属性获取"></a>所有属性获取</h4><p>如果想要获得对象上所有可枚举的实例属性，可以使用<code>Object.keys()</code>方法，这个方法接收一个对象作为参数，返回一个包含所有可枚举属性的字符串数组。<br>如果想要获取所有的实例属性，无论它是否可以枚举，我们可以使用<code>Object.getOwnPropertyNames()</code>方法。</p>
<h1 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h1><h2 id="原型链理解"><a href="#原型链理解" class="headerlink" title="原型链理解"></a>原型链理解</h2><p>原型链是实现继承的主要方法。其基本思想是利用一个引用类型继承另一个引用类型的属性和方法。</p>
<p>原型链的主要实现方法是让构造函数的<code>prototype</code>对象等于另一个类型的实例，此时的<code>prototype</code>对象因为是实例，因此将包含一个指向另一个原型的指针，相应地另一个原型中也包含着一个指向另一个构造函数的指针。假如另一个原型又是另一个类型的实例，那么上述关系依然成立，如此层层递进，就构成了实例与类型的链条。这就是原型链的基本概念。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Super</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Middle</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Sub</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="title class_">Middle</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Super</span>();</span><br><span class="line"><span class="title class_">Sub</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Middle</span>();</span><br><span class="line"><span class="keyword">var</span> suber = <span class="keyword">new</span> <span class="title class_">Sub</span>();</span><br></pre></td></tr></table></figure>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img4.png" class="">
<h2 id="默认的原型"><a href="#默认的原型" class="headerlink" title="默认的原型"></a>默认的原型</h2><p>所有的引用类型都继承了<code>Object</code>，这个继承就是通过原型链来实现的。所有函数的默认原型都是<code>Object</code>的实例，因此默认原型都会包含一个内部指针，指向<code>Object.Prototype</code>。这也正是所有的自定义类型都会继承<code>toString()</code>、<code>valueOf()</code>等默认方法的根本原因。</p>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img5.png" class="">
<p><code>Object.prototype</code>就是原型链的终点了，<code>Object.prototype.__proto__</code>返回的是一个<code>null</code>空对象，这就意味着原型链的结束。</p>
<h2 id="函数也是对象"><a href="#函数也是对象" class="headerlink" title="函数也是对象"></a>函数也是对象</h2><p>其实上面的原型链还少了一部分。因为在 JavaScript 中，函数也是对象，那么函数也应该有它的原型对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params">who</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">me</span> = who;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">identify</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;I am &quot;</span> + <span class="variable language_">this</span>.<span class="property">me</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Bar</span>(<span class="params">who</span>) &#123;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="title function_">call</span>( <span class="variable language_">this</span>, who );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Bar</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>( <span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span> );</span><br><span class="line"></span><br><span class="line"><span class="title class_">Bar</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">speak</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>( <span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="title function_">identify</span>() + <span class="string">&quot;.&quot;</span> );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b1 = <span class="keyword">new</span> <span class="title class_">Bar</span>( <span class="string">&quot;b1&quot;</span> );</span><br><span class="line"><span class="keyword">var</span> b2 = <span class="keyword">new</span> <span class="title class_">Bar</span>( <span class="string">&quot;b2&quot;</span> );</span><br><span class="line"></span><br><span class="line">b1.<span class="title function_">speak</span>();</span><br><span class="line">b2.<span class="title function_">speak</span>();</span><br></pre></td></tr></table></figure>
<p>我们先看一下不包含函数原型的以上实例所包含的原型链的关系图：</p>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img6.png" class="">

<p>下面是加入了函数原型后的原型链的关系图。</p>
<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/img7.png" class="">

<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span>); <span class="comment">//A &#123;&#125;（即构造器function A 的原型对象）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span>.<span class="property">__proto__</span>); <span class="comment">//Object &#123;&#125;（即构造器function Object 的原型对象）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>); <span class="comment">//null</span></span><br></pre></td></tr></table></figure>

<img src="/2020/04/13/%E5%89%8D%E7%AB%AF/js/%E8%BF%9B%E9%98%B6/JS%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/10.png" class="">
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/" rel="tag">JS</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-MySQL/MySQL数据表的基本操作"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/12/MySQL/MySQL%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"
    >MySQL数据表的基本操作</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/12/MySQL/MySQL%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="article-date">
  <time datetime="2020-04-12T09:07:12.000Z" itemprop="datePublished">2020-04-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>数据表是数据库的重要组成部分，每一个数据库都是由若干个数据表组成的。</p>
<h1 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h1><p>所谓创建数据表是在已经创建的数据库中建立新表。创建数据表的过程是规定数据列的属性的过程，同时也是实施数据完整性（包括实体完整性、引用完整性和域完整性）约束的过程。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>可以使用<code>CREATE TABLE</code>语句创建表。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> ([表定义选项])[表选项][分区选项];</span><br></pre></td></tr></table></figure>
<p>其中，<code>[表定义选项]</code>的格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;列名1&gt; &lt;类型1&gt; [,…] &lt;列名n&gt; &lt;类型n&gt;</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li><code>CREATE TABLE</code>：用于创建给定名称的表，必须拥有表<code>CREATE</code>的权限。</li>
<li><code>&lt;表名&gt;</code>：指定要创建表的名称，必须符合标识符命名规则。表名称被指定为<code>db_name.tbl_name</code>，以便在特定的数据库中创建表。无论是否有当前数据库，都可以通过这种方式创建。在当前数据库中创建表时，可以省略<code>db_name</code>。如果使用加引号的识别名，则应对数据库和表名称分别加引号。例如，<code>&#39;mydb&#39;.&#39;mytbl&#39;</code>是合法的，但<code>&#39;mydb.mytbl&#39;</code>不合法。</li>
<li><code>&lt;表定义选项&gt;</code>：表创建定义，由列名、列的定义以及可能的空值说明、完整性约束或表索引组成。</li>
<li>默认的情况是，表被创建到当前的数据库中。若表已存在、没有当前数据库或者数据库不存在，则会出现错误。</li>
</ul>
<blockquote>
<p>提示：使用<code>CREATE TABLE</code>创建表时，必须指定以下信息：</p>
<ul>
<li>要创建的表的名称不区分大小写，不能使用SQL语言中的关键字。</li>
<li>数据表中每个列（字段）的名称和数据类型，如果创建多个列，要用逗号隔开。</li>
</ul>
</blockquote>
<h2 id="在指定的数据库中创建表"><a href="#在指定的数据库中创建表" class="headerlink" title="在指定的数据库中创建表"></a>在指定的数据库中创建表</h2><p>数据表属于数据库，在创建数据表之前，应使用语句<code>USE &lt;数据库&gt;;</code>指定操作在哪个数据库中进行，如果没有选择数据库，就会抛出<code>No database selected</code>的错误。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>创建员工表<code>tb_emp1</code>，结构如下表。</p>
<table>
<thead>
<tr>
<th align="center">字段名称</th>
<th align="center">数据类型</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id</td>
<td align="center">INT(11)</td>
<td align="center">员工编号</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">VARCHAR(25)</td>
<td align="center">员工名称</td>
</tr>
<tr>
<td align="center">deptld</td>
<td align="center">INT(11)</td>
<td align="center">所在部门编号</td>
</tr>
<tr>
<td align="center">salary</td>
<td align="center">FLOAT</td>
<td align="center">工资</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> USE test_db;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp1</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.37</span> sec)</span><br></pre></td></tr></table></figure>
<p>语句执行后，便创建了一个名称为<code>tb_emp1</code>的数据表，使用<code>SHOW TABLES;</code>语句查看数据表是否创建成功。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> TABLES;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test_db  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> tb_emp1            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="修改数据表"><a href="#修改数据表" class="headerlink" title="修改数据表"></a>修改数据表</h1><p>修改数据表的前提是数据库中已经存在该表。修改表指的是修改数据库中已经存在的数据表的结构。</p>
<p>可以使用<code>ALTER TABLE</code>语句来改变原有表的结构，例如增加或删减列、更改原有列类型、重新命名列或表等。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [修改选项]</span><br></pre></td></tr></table></figure>
<p>修改选项的语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>类型<span class="operator">&gt;</span></span><br><span class="line">CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>旧列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>新列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>新列类型<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> &#123; <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span> <span class="operator">|</span> <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span> &#125;</span><br><span class="line">MODIFY <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>类型<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span></span><br><span class="line">RENAME <span class="keyword">TO</span> <span class="operator">&lt;</span>新表名<span class="operator">&gt;</span></span><br><span class="line"><span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h2><p>MySQL 通过<code>ALTER TABLE</code>语句来实现表名的修改：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>旧表名<span class="operator">&gt;</span> RENAME [<span class="keyword">TO</span>] <span class="operator">&lt;</span>新表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>其中，<code>TO</code>为可选参数，使用与否均不影响结果。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student RENAME <span class="keyword">TO</span> tb_students_info;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> TABLES;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> tb_students_info <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：修改表名并不修改表的结构，因此修改名称后的表和修改名称前的表的结构是相同的。可以使用<code>DESC</code>命令查看修改后的表结构。</p>
</blockquote>
<h2 id="修改表字符集"><a href="#修改表字符集" class="headerlink" title="修改表字符集"></a>修改表字符集</h2><p>MySQL 通过<code>ALTER TABLE</code>语句来实现表字符集的修改：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 [<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span> [<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>其中，<code>DEFAULT</code>为可选参数，使用与否均不影响结果。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_students_info <span class="type">CHARACTER</span> <span class="keyword">SET</span> gb2312 <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> gb2312_chinese_ci;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_students_info \G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: tb_students_info</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_students_info` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>MyISAM <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="添加字段"><a href="#添加字段" class="headerlink" title="添加字段"></a>添加字段</h2><p>MySQL 数据表是由行和列构成的，通常把表的“列”称为字段，把表的“行”称为记录。随着业务的变化，可能需要在已有的表中添加新的字段。</p>
<p>MySQL 允许在开头、中间和结尾处添加字段。</p>
<h3 id="在末尾添加字段"><a href="#在末尾添加字段" class="headerlink" title="在末尾添加字段"></a>在末尾添加字段</h3><p>一个完整的字段包括字段名、数据类型和约束条件。MySQL 添加字段的语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="operator">&lt;</span>新字段名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[约束条件];</span><br></pre></td></tr></table></figure>
<p>对语法格式的说明如下：                                       </p>
<ul>
<li><code>&lt;表名&gt;</code>为数据表的名字；</li>
<li><code>&lt;新字段名&gt;</code>为所要添加的字段的名字；</li>
<li><code>&lt;数据类型&gt;</code>为所要添加的字段能存储数据的数据类型；</li>
<li><code>[约束条件]</code>是可选的，用来对添加的字段进行约束。</li>
</ul>
<p>这种语法格式默认在表的最后位置（最后一列的后面）添加新字段。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> USE test;</span><br><span class="line">Database changed</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">4</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> sex <span class="type">CHAR</span>(<span class="number">1</span>));</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.09</span> sec)                           </span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sex   <span class="operator">|</span> <span class="type">char</span>(<span class="number">1</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> age <span class="type">INT</span>(<span class="number">4</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.16</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sex   <span class="operator">|</span> <span class="type">char</span>(<span class="number">1</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> age   <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，<code>student</code>表已经添加了<code>age</code>字段，且该字段在表的最后一个位置，添加字段成功。</p>
<h3 id="在开头添加字段"><a href="#在开头添加字段" class="headerlink" title="在开头添加字段"></a>在开头添加字段</h3><p>MySQL 默认在表的最后位置添加新字段，如果希望在开头位置（第一列的前面）添加新字段，可以使用<code>FIRST</code>关键字：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="operator">&lt;</span>新字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [约束条件] <span class="keyword">FIRST</span>;</span><br></pre></td></tr></table></figure>
<p><code>FIRST</code>关键字一般放在语句的末尾。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> stuId <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">FIRST</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.14</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> stuId <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sex   <span class="operator">|</span> <span class="type">char</span>(<span class="number">1</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> age   <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，<code>student</code>表中已经添加了<code>stuId</code>字段，且该字段在表中的第一个位置，添加字段成功。</p>
<h3 id="在中间位置添加字段"><a href="#在中间位置添加字段" class="headerlink" title="在中间位置添加字段"></a>在中间位置添加字段</h3><p>MySQL 除了允许在表的开头位置和末尾位置添加字段外，还允许在中间位置（指定的字段之后）添加字段，此时需要使用<code>AFTER</code>关键字：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="operator">&lt;</span>新字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [约束条件] AFTER <span class="operator">&lt;</span>已经存在的字段名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p><code>AFTER</code>的作用是将新字段添加到某个已有字段后面。</p>
<p>注意，只能在某个已有字段的后面添加新字段，不能在它的前面添加新字段。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> stuno <span class="type">INT</span>(<span class="number">11</span>) AFTER name;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.13</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> stuId <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stuno <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sex   <span class="operator">|</span> <span class="type">char</span>(<span class="number">1</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> age   <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看到，<code>student</code>表中已经添加了<code>stuno</code>字段，且该字段在<code>name</code>字段后面的位置，添加字段成功。</p>
<h2 id="修改字段"><a href="#修改字段" class="headerlink" title="修改字段"></a>修改字段</h2><h3 id="修改字段名称"><a href="#修改字段名称" class="headerlink" title="修改字段名称"></a>修改字段名称</h3><p>MySQL 中修改表字段名的语法规则如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> CHANGE <span class="operator">&lt;</span>旧字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>新字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>新数据类型<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>新数据类型：指修改后的数据类型，如果不需要修改字段的数据类型，可以将新数据类型设置成与原来一样，但数据类型不能为空。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp1 CHANGE col1 col3 <span class="type">CHAR</span>(<span class="number">30</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.76</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> col3   <span class="operator">|</span> <span class="type">char</span>(<span class="number">30</span>)    <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">30</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>        <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>CHANGE</code>也可以只修改数据类型，实现和<code>MODIFY</code>同样的效果，方法是将 SQL 语句中的“新字段名”和“旧字段名”设置为相同的名称，只改变“数据类型”。</p>
<blockquote>
<p>提示：由于不同类型的数据在机器中的存储方式及长度并不相同，修改数据类型可能会影响数据表中已有的数据记录，因此，当数据表中已经有数据时，不要轻易修改数据类型。</p>
</blockquote>
<h3 id="修改字段数据类型"><a href="#修改字段数据类型" class="headerlink" title="修改字段数据类型"></a>修改字段数据类型</h3><p>修改字段的数据类型就是把字段的数据类型转换成另一种数据类型。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> MODIFY <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp1 MODIFY name <span class="type">VARCHAR</span>(<span class="number">30</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> col1   <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">30</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> col2   <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>        <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>语句执行后，发现表<code>tb_emp1</code>中<code>name</code>字段的数据类型已经修改成<code>VARCHAR(30)</code>，修改成功。</p>
<h2 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h2><p>删除字段是将数据表中的某个字段从表中移除：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp1 <span class="keyword">DROP</span> col2;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.53</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> col1   <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">30</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>        <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h1><p>在删除表的同时，表的结构和表中所有的数据都会被删除，因此在删除数据表之前最好先备份，以免造成无法挽回的损失。</p>
<p>使用<code>DROP TABLE</code>语句可以删除一个或多个数据表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] 表名<span class="number">1</span> [ ,表名<span class="number">2</span>, 表名<span class="number">3</span> ...]</span><br></pre></td></tr></table></figure>
<p>对语法格式的说明如下：</p>
<ul>
<li>表名1, 表名2, 表名3 …表示要被删除的数据表的名称。<code>DROP TABLE</code>可以同时删除多个表，只要将表名依次写在后面，相互之间用逗号隔开即可。</li>
<li><code>IF EXISTS</code>用于在删除数据表之前判断该表是否存在。如果不加<code>IF EXISTS</code>，当数据表不存在时 MySQL 将提示错误，中断 SQL 语句的执行；加上<code>IF EXISTS</code>后，当数据表不存在时 SQL 语句可以顺利执行，但是会发出警告。</li>
</ul>
<blockquote>
<p>两点注意：</p>
<ul>
<li>用户必须拥有执行<code>DROP TABLE</code>命令的权限，否则数据表不会被删除。</li>
<li>表被删除时，用户在该表上的权限不会自动删除。</li>
</ul>
</blockquote>
<h2 id="删除表的实例"><a href="#删除表的实例" class="headerlink" title="删除表的实例"></a>删除表的实例</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> USE test_db;</span><br><span class="line">Database changed</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> salary <span class="type">FLOAT</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.27</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> TABLES;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test_db  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> tb_emp2            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> tb_emp3            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">TABLE</span> tb_emp3;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.22</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> TABLES;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test_db  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> tb_emp2            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="删除被其它表关联的主表"><a href="#删除被其它表关联的主表" class="headerlink" title="删除被其它表关联的主表"></a>删除被其它表关联的主表</h1><p>数据表之间经常存在外键关联的情况，这时如果直接删除父表，会破坏数据表的完整性，也会删除失败。</p>
<p>删除父表有以下两种方法：</p>
<ul>
<li>先删除与它关联的子表，再删除父表；但是这样会同时删除两个表中的数据。</li>
<li>将关联表的外键约束取消，再删除父表；适用于需要保留子表的数据，只删除父表的情况。</li>
</ul>
<p>下面是上面所说的删除父表的第二种方法。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp4</span><br><span class="line">(</span><br><span class="line">id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">22</span>),</span><br><span class="line">location <span class="type">VARCHAR</span> (<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp5</span><br><span class="line">(</span><br><span class="line">id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">deptId <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">salary <span class="type">FLOAT</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> fk_emp4_emp5 <span class="keyword">FOREIGN</span> KEY (deptId) <span class="keyword">REFERENCES</span> tb_emp4(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp5\G;</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: tb_emp5</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp5` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `deptId` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `fk_emp4_emp5` (`deptId`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fk_emp4_emp5` <span class="keyword">FOREIGN</span> KEY (`deptId`) <span class="keyword">REFERENCES</span> `tb_emp4` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>latin1</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，<code>tb_emp5</code>表为子表，具有名称为<code>fk_emp4_emp5</code>的外键约束；<code>tb_emp4</code>为父表，其主键<code>id</code>被子表<code>tb_ emp5</code>所关联。</p>
<p>删除被数据表<code>tb_emp5</code>关联的数据表<code>tb_emp4</code>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">TABLE</span> tb_emp4;</span><br><span class="line">ERROR <span class="number">1217</span> (<span class="number">23000</span>): Cannot <span class="keyword">delete</span> <span class="keyword">or</span> <span class="keyword">update</span> a parent <span class="type">row</span>: a <span class="keyword">foreign</span> key <span class="keyword">constraint</span> fails</span><br></pre></td></tr></table></figure>
<p>由运行结果可以看出，当主表在存在外键约束时，不能被直接删除。</p>
<p>下面解除子表<code>tb_emp5</code>的外键约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_emp5 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY fk_emp4_emp5;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>语句成功执行后，会取消表<code>tb_emp4</code>和表<code>tb_emp5</code>之间的关联关系。</p>
<p>解除关联关系后，可以使用<code>DROP TABLE</code>语句直接删除父表<code>tb_emp4</code>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> tb_emp4;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> tb_emp5        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> temp           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>可以发现，数据库列表中已经不存在名称为<code>tb_emp4</code>的表，删除成功。</p>
<h1 id="查看表结构命令"><a href="#查看表结构命令" class="headerlink" title="查看表结构命令"></a>查看表结构命令</h1><p>创建完数据表之后，经常需要查看表结构（表信息）。在 MySQL 中，可以使用<code>DESCRIBE</code>和<code>SHOW CREATE TABLE</code>命令来查看数据表的结构。</p>
<h2 id="DESCRIBE：以表格的形式展示表结构"><a href="#DESCRIBE：以表格的形式展示表结构" class="headerlink" title="DESCRIBE：以表格的形式展示表结构"></a>DESCRIBE：以表格的形式展示表结构</h2><p><code>DESCRIBE/DESC</code>语句会以表格的形式来展示表的字段信息，包括字段名、字段数据类型、是否为主键、是否有默认值等：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br><span class="line"># 或简写成：</span><br><span class="line"><span class="keyword">DESC</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DESC</span> tb_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> deptId <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salary <span class="operator">|</span> <span class="type">float</span>       <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.14</span> sec)</span><br></pre></td></tr></table></figure>
<p>各字段的含义：</p>
<ul>
<li><code>Null</code>：表示该列是否可以存储<code>NULL</code>值。</li>
<li><code>Key</code>：表示该列是否已编制索引。<code>PRI</code>表示该列是表主键的一部分，<code>UNI</code>表示该列是<code>UNIQUE</code>索引的一部分，<code>MUL</code>表示在列中某个给定值允许出现多次。</li>
<li><code>Default</code>：表示该列是否有默认值，如果有，值是多少。</li>
<li><code>Extra</code>：表示可以获取的与给定列有关的附加信息，如<code>AUTO_INCREMENT</code>等。</li>
</ul>
<h2 id="SHOW-CREATE-TABLE：以SQL语句的形式展示表结构"><a href="#SHOW-CREATE-TABLE：以SQL语句的形式展示表结构" class="headerlink" title="SHOW CREATE TABLE：以SQL语句的形式展示表结构"></a>SHOW CREATE TABLE：以SQL语句的形式展示表结构</h2><p><code>SHOW CREATE TABLE</code>命令会以 SQL 语句的形式来展示表信息。和<code>DESCRIBE</code>相比，<code>SHOW CREATE TABLE</code>展示的内容更加丰富，它可以查看表的存储引擎和字符编码；另外，还可以通过<code>\g</code>或者<code>\G</code>参数来控制展示格式。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>在<code>SHOW CREATE TABLE</code>语句的结尾处（分号前面）添加<code>\g</code>或者<code>\G</code>参数可以改变展示形式。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span>   <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> tb_emp1 <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp1` (                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,                               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> `name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,                         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>                              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp1 \g;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span>   <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> tb_emp1 <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp1` (                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,                               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> `name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,                         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>                              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp1\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">       <span class="keyword">Table</span>: tb_emp1</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_emp1` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `deptId` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `salary` <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>gb2312</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="SQL语句对应的文件操作"><a href="#SQL语句对应的文件操作" class="headerlink" title="SQL语句对应的文件操作"></a>SQL语句对应的文件操作</h1><h3 id="1-查询数据表"><a href="#1-查询数据表" class="headerlink" title="1. 查询数据表"></a>1. 查询数据表</h3><p>在 MySQL 中无论哪种存储引擎的表都会有一个<code>.frm</code>文件来保存数据表的结构定义。所以，执行<code>SHOW TABLES;</code>语句相当于列出数据库目录中所有<code>.frm</code>文件的基本名，所得到的结果是相同的。</p>
<p>有些数据库系统使用注册表来记录某数据库里的所有数据表，但 MySQL 没有这样做，因为，MySQL 数据目录的层次结构已经把“注册表”隐藏在其中了。</p>
<h3 id="2-创建数据表"><a href="#2-创建数据表" class="headerlink" title="2. 创建数据表"></a>2. 创建数据表</h3><p>创建数据表时，需要执行<code>CREATE TABLE</code>语句定义数据表的结构。无论是哪一种存储引擎，MySQL 服务器都将创建一个<code>.frm</code>文件来保存数据表的结构定义的内部编码。</p>
<p>MySQL 服务器还会根据指定数据表的具体类型创建出其他必要的文件。例如，它将为一个 MyISAM 数据表创建出一个<code>.MYD</code>数据文件和一个<code>.MYI</code>索引文件；为一个<code>MERGE</code>数据表创建出一个<code>.mgr</code>数据&#x2F;索引文件。</p>
<p>对于 InnoDB 数据表，InnoDB 处理程序将在 InnoDB 表空间里为数据表初始化一些数据和索引信息。</p>
<h3 id="3-更新数据表"><a href="#3-更新数据表" class="headerlink" title="3. 更新数据表"></a>3. 更新数据表</h3><p>当执行<code>ALTER TABLE</code>语句时，MySQL 服务器将对相对应数据表的<code>.frm</code>文件重新进行编码，来表明数据表的结构性变化，还要对有关的数据文件和索引文件的内容进行相应的修改。</p>
<p><code>CREATE INDEX</code>和<code>DROP INDEX</code>等语句也是对相应数据表的<code>.frm</code>文件重新进行编码，因为 MySQL 服务器在内部是把它们当作等效的<code>ALTER TABLE</code>语句来处理的。改变 InnoDB 数据表的结构会引起 InnoDB 处理程序修改 InnoDB 表空间中数据表的数据，同时也对索引做出相应的修改。</p>
<h3 id="4-删除数据表"><a href="#4-删除数据表" class="headerlink" title="4. 删除数据表"></a>4. 删除数据表</h3><p><code>DROP TABLE</code>语句是通过删除该相应数据表的各种有关文件而实现的。</p>
<p>对于某些数据表类型，可以通过在相应的数据库目录里删除与数据表有关的各个文件的办法来手动删除这个数据表。例如，假设<code>mydb</code>是当前数据库，<code>mytb1</code>是一个 MyISAM、Archive 或 MERGE 类型的数据表，那么<code>DROP TABLE mytb1</code>语句就大致等效于下面这两条命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd DATADIR（数据库文件存放路径）</span><br><span class="line">rm -f mydb/mytb1.* 或 del mydb/mytb1.*</span><br></pre></td></tr></table></figure>
<p>对于 InnoDB 数据表，因为它的某些组成部分在文件系统里没有实体性的文件代表，所以没有等效的文件系统命令。例如，InnoDB 数据表在文件系统里只有一个相应的<code>.frm</code>文件，用文件系统级命令删除这个文件后，该数据表在 InnoDB 表空间中对应的数据和索引将没有任何意义。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>

   
   
  
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/22/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><span class="page-number current">23</span><a class="page-number" href="/page/24/">24</a><a class="page-number" href="/page/25/">25</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/24/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2017-2023
        <i class="ri-heart-fill heart_icon"></i> WSQ
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="学海无涯"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>
 
<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>