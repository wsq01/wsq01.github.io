<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 学海无涯</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?b1b5dee3bb1719c8a439f8070118dc80";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <!-- <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script> -->
      <link href="https://cdn.bootcdn.net/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.css" rel="stylesheet">
      <script src="https://cdn.bootcdn.net/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-计算机网络/WLAN"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
     
    <div class="article-meta">
      <a href="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/" class="article-date">
  <time datetime="2023-05-06T12:06:17.460Z" itemprop="datePublished">2023-05-06</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">6.5k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">24 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="CSMA-x2F-CA"><a href="#CSMA-x2F-CA" class="headerlink" title="CSMA&#x2F;CA"></a>CSMA&#x2F;CA</h1><p>以太网用 CSMA&#x2F;CD 进行传输控制，而 IEEE 802.11 的 WLAN 采用的是 CSMA&#x2F;CA。</p>
<p>CSMA&#x2F;CD ，全称<code>Carrier Sense Multiple Access with Collision Detection</code>，即 载波侦听多路访问&#x2F;冲突检测协议。</p>
<p>载波侦听（<code>Carrier Sense</code>），是指网络中的各个设备在发送数据前，都要确认确认线路上有没有数据传输。如果有数据传输，就不发送数据；如果没有数据传输，马上发送数据。</p>
<p>多路访问（<code>Multiple Access</code>），是指网络上所有设备收发数据，共同使用同一条线路，而且发送的数据是广播型。</p>
<p>冲突检测（<code>Collision Detection</code>），是指设备在发送数据帧的同时，还必须监听线路情况，判断是否发生冲突。也就是说，同一时刻，有没有其它设备也在发送数据帧。</p>
<p>以太网的冲突域是指数据发送时，检测出冲突，当发生冲突时等待一段随机时间再次发送。而在 WLAN 中，如果遇到其它设备正在发送数据，那么就在设备发送完成后，再等待一段随机时间，采继续发送数据。这就是冲突避免（<code>CA ，Collision Avoidance</code>）。因为在对方设备发送完后直接发送数据，也有可能会造成无线传输冲突。</p>
<p>以太网中，传输介质是网线或光纤，能够通过电气信号检测冲突的发生。但由于无线网络不会产生电气信号，因此需要使用 CSMA&#x2F;CA 来替代 CSMA&#x2F;CD。</p>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">以太网</th>
<th align="center">WLAN</th>
</tr>
</thead>
<tbody><tr>
<td align="center">标准</td>
<td align="center">IEEE802.3</td>
<td align="center">IEEE802.11</td>
</tr>
<tr>
<td align="center">地址</td>
<td align="center">MAC 地址</td>
<td align="center">MAC 地址</td>
</tr>
<tr>
<td align="center">传输介质</td>
<td align="center">线缆</td>
<td align="center">无线电波</td>
</tr>
<tr>
<td align="center">接入控制</td>
<td align="center">CSMA&#x2F;CD</td>
<td align="center">CSMA&#x2F;CA</td>
</tr>
<tr>
<td align="center">传输方式</td>
<td align="center">半双工&#x2F;全双工</td>
<td align="center">半双工</td>
</tr>
</tbody></table>
<h1 id="WLAN-的架构"><a href="#WLAN-的架构" class="headerlink" title="WLAN 的架构"></a>WLAN 的架构</h1><p>STA ，全称<code>Station</code>，即工作站，是指配有无线网卡的无线终端，比如：手机、电脑等。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/1.png" class="">

<p>AP，全称<code>Wireless Access Point</code>，即无线 AP，用来连接 STA 和有线网络的网络设备。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/2.png" class="">

<p>IBSS，全称<code>Independent Basic Service Set</code>，即独立基本服务集，包含一个及以上 STA 的无线网络，也叫做 ad-hoc 无线网络，无法访问 DS 时使用的模式。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/3.png" class="">

<p>BSS，全称<code>Basic Service Set</code>，即基本服务集，由一个 AP 和一个及以上 STA 组成的无线网络。BSS 内所有的 STA 通信都是通过 AP 完成，AP 不仅能连接有线网络，还可以在 STA 和 其它 STA 或 DS 节点之间进行桥接。</p>
<p>ESS，全称<code>Extended Service Set</code>，即扩展服务集，同一有线网络连接的、两个及以上的 AP 组成，和一个子网概念类似。</p>
<p>DS，全称<code>Distribution System</code>，即分发系统，让不同 BSS 内的 AP 通过 DS 互连，STA 可以从一个 BSS 移动到另一个 BSS。AP 之间可以是无线互连，也可以是有线互连，通常是使用有线互连。DS 是 BSS 之间进行逻辑连接的基础，让 STA 在 BSS 之间能够实现漫游。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/4.png" class="">

<h1 id="WLAN-的拓扑结构"><a href="#WLAN-的拓扑结构" class="headerlink" title="WLAN 的拓扑结构"></a>WLAN 的拓扑结构</h1><p>WLAN 的拓扑结构分为两种，一种是终端之间直接互连的<code>ad-hoc</code>模式，另一种是通过 AP 连接有线网络的基础设施模式。</p>
<p><code>ad-hoc</code>模式，全称<code>ad-hoc mode</code>，即 IEEE 802.11 无线网络的 BSS，在两台 STA 之间直接进行无线通信，而组成的网络，也叫做点对点的网络模式。通常是笔记本电脑和打印机进行无线连接或多台游戏机进行联机对战时使用。终端一般配置了无线网卡。这个模式下，终端是不能连接到互联网上的。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/5.png" class="">

<p>基础设施模式，全称<code>Infrastructure Mode</code>，是指 802.11 无线网络的 BSS 形式组网，通常是通过 AP 连接到互联网时使用。在这个模式下，除了有 STA 外，还需要有 AP 才能连接到互联网。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/6.png" class="">

<h2 id="WLAN-的接入点"><a href="#WLAN-的接入点" class="headerlink" title="WLAN 的接入点"></a>WLAN 的接入点</h2><p>有线网络通过有线线缆把终端和交换机连接起来，组成网络。而无线网络的基础设施模式中，是通过一种叫做 AP 的设备，把多台终端连接到有线网络中。AP 也叫做接入点，接入点通常有 RJ-45 网络接口，用来连接到交换机或路由器上，从而让无线网络的终端能够访问有线网络或互联网。</p>
<h1 id="WLAN-标准"><a href="#WLAN-标准" class="headerlink" title="WLAN 标准"></a>WLAN 标准</h1><p>和以太网一样，WLAN 的标准也是有 IEEE 组织制定的。以太网标准统称为 IEEE 802.3，而 WLAN 标准统称为 802.11。</p>
<p>和 IEEE 802.3 一样，IEEE 802.11 在物理层和数据链路层之间也定义了 MAC 子层。定义了 WLAN 采用哪种频带和调制方式，传输速率达到多大等传输标准，还定义了安全性、QoS 、管理等相关内容。</p>
<table>
<thead>
<tr>
<th align="center">IEEE 标准</th>
<th align="center">名称</th>
<th align="center">年份</th>
<th align="center">频带</th>
<th align="center">最大传输速率</th>
<th align="center">调制方式</th>
</tr>
</thead>
<tbody><tr>
<td align="center">802.11</td>
<td align="center">WiFi0</td>
<td align="center">1997年</td>
<td align="center">2.4GHz</td>
<td align="center">2Mbit&#x2F;s</td>
<td align="center">DSSS</td>
</tr>
<tr>
<td align="center">802.11b</td>
<td align="center">WiFi1</td>
<td align="center">1999年</td>
<td align="center">2.4GHz</td>
<td align="center">11Mbit&#x2F;s</td>
<td align="center">DSSS</td>
</tr>
<tr>
<td align="center">802.11a</td>
<td align="center">WiFi2</td>
<td align="center">1999年</td>
<td align="center">5GHz</td>
<td align="center">54Mbit&#x2F;s</td>
<td align="center">OFDM</td>
</tr>
<tr>
<td align="center">802.11g</td>
<td align="center">WiFi3</td>
<td align="center">2003年</td>
<td align="center">2.4GHz</td>
<td align="center">54Mbit&#x2F;s</td>
<td align="center">OFDM</td>
</tr>
<tr>
<td align="center">802.11n</td>
<td align="center">WiFi4</td>
<td align="center">2009年</td>
<td align="center">2.4GHz&#x2F;5GHz</td>
<td align="center">600Mbit&#x2F;s</td>
<td align="center">OFDM</td>
</tr>
<tr>
<td align="center">802.11ac Wave 1</td>
<td align="center">WiFi5</td>
<td align="center">2013年</td>
<td align="center">5GHz</td>
<td align="center">3.46Gbit&#x2F;s</td>
<td align="center">OFDM</td>
</tr>
<tr>
<td align="center">802.11ac Wave 2</td>
<td align="center">WiFi5</td>
<td align="center">2016年</td>
<td align="center">5GHz</td>
<td align="center">6.96Gbit&#x2F;s</td>
<td align="center">OFDM</td>
</tr>
<tr>
<td align="center">802.11ax</td>
<td align="center">WiFi6</td>
<td align="center">2018年</td>
<td align="center">2.4GHz&#x2F;5GHz</td>
<td align="center">9.6Gbit&#x2F;s</td>
<td align="center">OFDMA</td>
</tr>
</tbody></table>
<h2 id="IEEE-802-11n"><a href="#IEEE-802-11n" class="headerlink" title="IEEE 802.11n"></a>IEEE 802.11n</h2><p><code>IEEE 802.11n</code>之前的标准已经不多见了。<code>IEEE 802.11n</code>，又叫做 WiFi 4，标准在 2009 年制定完成，最大传输速率是<code>600 Mbit/s</code>，使用 MIMO 多通道技术让传输速率大幅提升。也能向下兼容<code>IEEE 802.11a、IEEE 802.11b、IEEE 802.11g</code>。</p>
<h2 id="IEEE-802-11ac"><a href="#IEEE-802-11ac" class="headerlink" title="IEEE 802.11ac"></a>IEEE 802.11ac</h2><p><code>IEEE 802.11ac</code>，又叫做 WiFi 5，有两个版本，分别是：Wave 1、Wave 2。区别是 Wave 1 使用 80 Mhz 频宽和 SU-MIMO 技术，最大传输速率是<code>3.46 Gbit/s</code>。而 Wave 2 是使用 160 Mhz 频宽和 DL MU-MIMO 技术，最大传输速率是<code>6.93 Gbit/s</code>。频带和调制方式等都相同。</p>
<h2 id="IEEE-802-11ax"><a href="#IEEE-802-11ax" class="headerlink" title="IEEE 802.11ax"></a>IEEE 802.11ax</h2><p><code>IEEE 802.11ax</code>，又叫做 WiFi 6，标准在 2018 年制定完成，最大传输速率是<code>9.6 Gbit/s</code>。WiFi 6 同时支持 2.4G 和 5G 频段，完整涵盖低速与高速设备，覆盖范围更远。支持 WPA 3 安全协议，无线网络更安全。支持 TWT 技术，能够更省电。简单的说，就是速度更快、延时更低、容量更低、更安全、更省电。</p>
<h2 id="什么是-WiFi"><a href="#什么是-WiFi" class="headerlink" title="什么是 WiFi"></a>什么是 WiFi</h2><p>WiFi 是基于<code>IEEE 802.11</code>标准的、不同厂家为产品的品牌认证。既然有<code>IEEE 802.11</code>标准了，为什么还要有 WiFi 认证？这是因为<code>IEEE 802.11</code>正式标准推出的时间周期长，而无线网络发展迅猛，各个厂家等不及正式标准，自己组成了 WiFi 联盟，并完成互联互通的认证。</p>
<p>实际上，并不是每个<code>IEEE 802.11</code>产品都申请了 WiFi 联盟的认证，那么缺少 WiFi 认证的产品，并不一定兼容 WiFi 设备。但是经过 WiFi 认证的 STA 或 AP 都能无障碍的互联互通。</p>
<p>在酒店或公共场所中，经常看到“免费 WiFi 上网”的标识，这就表示这里的 AP 已经通过了 WiFi 认证。除了电脑和手机，家电和游戏机也可以完成 WiFi 认证。</p>
<p>WiFi 还定义了类似 WPA 这种无线加密的相关标准。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/7.png" class="">

<h1 id="WLAN-的功能"><a href="#WLAN-的功能" class="headerlink" title="WLAN 的功能"></a>WLAN 的功能</h1><h2 id="关联"><a href="#关联" class="headerlink" title="关联"></a>关联</h2><p>使用 WLAN 的终端要通过 AP 完成无线连接，才能连接到互联网或有线网络。</p>
<p>无线终端连接 AP 的过程叫做关联（<code>Association</code>）。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/8.png" class="">

<p>STA 可以和连接不同的 AP，但是同一时刻，只能连接在一个 AP 上。AP 会定期发送<code>beacon</code>帧，STA 根据<code>beacon</code>帧的内容，获取 AP 的 SSID 信息、支持的无线传输速率，以及无线信道等信息。</p>
<p>STA 在关联过程中，会向 AP 发送关联请求数据帧，AP 收到请求后，就向 STA 返回带有状态码的关联响应数据帧。</p>
<p>STA 会确认 AP 发过来的状态码，如果是<code>successful</code>，表示关联成功，如果返回其它信息，表示关联失败。STA 在收到<code>successful</code>的同时，还会分配一个 Association ID（AID）的识别号。</p>
<p>WLAN 认证的过程，是在关联过程之前发生的。</p>
<h2 id="数据帧"><a href="#数据帧" class="headerlink" title="数据帧"></a>数据帧</h2><img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/9.png" class="">

<p>IEEE 802.11 的 MAC 数据帧的字段信息如下：</p>
<ul>
<li><code>Protocol Version</code>：协议版本，表示 IEEE 802.11 协议的版本。</li>
<li><code>Type</code>：类型，表示数据帧的功能，有控制帧、管理帧、数据帧三种。</li>
<li><code>Subtype</code>：子类型，每种数据帧都有多个子类型，实现特定的功能。</li>
<li><code>To DS</code>和<code>From DS</code>：DS 是指分布式系统，用与 AP 和关联的 STA 之间传送的数据帧类型。值为 1 时，表示发送源是 AP，值为 0 时，表示发送源是 STA。</li>
<li><code>More Frag</code>：把上层分组进行分片后，进行发送时使用。值为 1 时，表示后续存在分片数据帧。值为 0 时，表示当前数据帧是最后的分片，或不存在分片数据帧。</li>
<li><code>Retry</code>：表示是否重发数据帧。值为 1 时，表示再次发送数据帧。值为 0 时，表示不再发送这个数据帧。</li>
<li><code>More Data</code>：表示是否存在后续发送的分组。值为 1 时，表示存在后续分组。</li>
<li><code>WEP</code>：表示是否进行 WEP 加密。值为 1 时，表示进行加密。</li>
<li><code>Order</code>：值为 1 时，表示数据帧严格按照 strictly ordered（发送接收顺无法替换）的标准进行发送。</li>
</ul>
<p>IEEE 802.11 的数据帧可分为三类：</p>
<ul>
<li>管理帧<br>1、广播无线信号的<code>beacon</code>帧，默认情况下，每 100 毫秒 AP 广播一次。<br>2、认证使用认证帧：AP 和 STA 进行信息交互时，使用的关联帧。</li>
<li>控制帧</li>
<li>数据帧</li>
</ul>
<p>通常数据帧的 Address 1 表示目的地址，Address 2 表示源地址，Address 3 表示 BSSID 信息。</p>
<h1 id="接入点的接入控制"><a href="#接入点的接入控制" class="headerlink" title="接入点的接入控制"></a>接入点的接入控制</h1><p>由于无线电波是看不见的，会出现陌生用户在未经允许时，擅自接入 AP 使用的情况发生。只要在无线信号能够到达的范围内，并知道 SSID，STA 就能够和 AP 进行关联。为了防止未知的人使用，可以使用 ESSID 隐藏功能和 MAC 地址过滤功能。</p>
<h2 id="ESSID-隐藏"><a href="#ESSID-隐藏" class="headerlink" title="ESSID 隐藏"></a>ESSID 隐藏</h2><p>SSID 信息是由 AP 的 beacon 帧定期进行广播发送的。STA 通过 beacon 帧来确认和那个 SSID 进行连接。但是，只有是无线信号能够到达的地方，任何人都可以通过 beacon 帧，使用 STA 搜索到 SSID 信息并连接。</p>
<p>为了防范这类风险，可以使用不发出 beacon 帧的 ESSID 隐藏功能。STA 需要通过其它途径获得 SSID 信息，并在 STA 进行相应配置，从而隐藏网络连接。</p>
<p>但是，由于 SSID 在无线网络的传播中，没有加密，当有 STA 使用这个隐藏的 SSID 连接 AP 时，可以通过无线监控工具获取这个无线网络的 SSID，所以 ESSI 隐藏功能不是很安全的对策。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/10.png" class="">

<h2 id="MAC-地址过滤"><a href="#MAC-地址过滤" class="headerlink" title="MAC 地址过滤"></a>MAC 地址过滤</h2><p>在 AP 中设置允许关联的 MAC 地址列表，只有在列表里面的 STA 才能连上无线网络，防止以外的 STA 接入 AP，这个方法叫做 MAC 地址过滤或 MAC 地址认证。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/11.png" class="">

<p>除了在 AP 上设置外，还可以通过 RADIUS 服务器设置允许接入的 MAC 地址信息，在认证的同时完成 MAC 地址过滤。但是，MAC 地址也能通过工具伪装和冒充，可以对接入 WLAN 的 MAC 地址进行监听，获得具体的 MAC 地址信息，所以这也不是完善的安全策略。</p>
<h1 id="接入点的认证"><a href="#接入点的认证" class="headerlink" title="接入点的认证"></a>接入点的认证</h1><p>在 AP 上使用 ESSID 隐藏和 MAC 地址过滤功能，都不能完全阻止恶意访问，为了彻底防止恶意用户访问无线网络，需要进行认证。</p>
<p>IEEE 802.11 最开始有两种认证方式：开放系统认证、共享密钥认证。</p>
<p>开放系统认证<br>开发系统认证（<code>Open System Authentication</code>）不用 STA 输入用户名和密码等认证信息，就可以向 AP 发出认证请求。AP 能够接收所有接入认证请求，也就是说，无论是谁都可以和 AP 关联上。通常用于公共 WiFi ，结合 Portal 认证或 VPN 来完成用户访问网络的权限控制。</p>
<p>共享密钥认证<br>共享密钥认证（<code>Shared Key Authentication</code>）用于 AP 和 STA 进行无线加密通信。使用 WEP 或 WPA 加密标准时，AP 和 STA 预先配置相同的口令，通过这个口令就可以建立无线通信链路。这个口令叫做预共享密钥（<code>pre-shared key</code>），不知道预共享密钥的 STA，是无法和 AP 进行关联的。</p>
<p>IEEE 802.1X<br>IEEE 802.1X 是用户认证和访问控制协议，是从有线网络中引用过来的。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/12.png" class="">

<p>IEEE 802.1X 认证是由认证客户端、接入设备、认证服务器三部分组成。请求认证的终端叫做认证客户端，和终端连接的 AP、交换机及其它网络设备叫做接入设备。认证方式使用 EAP，客户端发起认证请求，接入设备会把收到的 EAP 消息封装成 RADIUS 数据帧，转发给认证服务器，当认证服务器完成认证后，接入设备会通知客户端并把客户端作为认证成功的客户端，之后客户端发送的数据帧都会转发到局域网或互联网上。</p>
<p>认证信息是使用用户名、口令、数字证书等其中一种方式即可，对应的认证协议有 EAP-MD5、EAP-TLS、EAP-TTLS 等各种类型。</p>
<h1 id="WLAN-通信的加密"><a href="#WLAN-通信的加密" class="headerlink" title="WLAN 通信的加密"></a>WLAN 通信的加密</h1><p>空气中传输的无线电波，只要是在覆盖范围内，就能被任何人收到，再加上 WLAN 数据解析工具，恶意用户就能够窃听无线网络的通信内容。</p>
<p>为了防止无线通信被窃听和篡改，要在无线通信过程中，对信息进行加密。WLAN 加密有 WEP、WPA、WPA2、WPA3 等标准。</p>
<h2 id="WEP"><a href="#WEP" class="headerlink" title="WEP"></a>WEP</h2><p>WEP，全称<code>Wired Equivalent Privacy</code>，即有线等效保密。WEP 加密是最早在无线加密中使用的技术，基于 RC4 算法的密钥对数据进行加密，这个密钥叫做 WEP key。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/13.png" class="">

<p>WEP 一共有三种加密方式：40 bit 长度的密钥和 24 bit 长度的初始向量值组成 64 bit 长的加密方式，104 bit 长度的密钥和 24 bit 长度的初始向量值组成 128 bit 长的加密方式，128 bit 长度的密钥和 24 bit 长度的初始向量值组成 152 bit 长的加密方式。密钥长度越短，破解时间也越短，现在已经不怎么使用了。</p>
<h2 id="WPA"><a href="#WPA" class="headerlink" title="WPA"></a>WPA</h2><p>WEP 实在太脆弱了，于是就制定了 WPA，全称<code>WiFi Protected Access</code>，即 WiFi 保护接入。</p>
<p>WPA 把 SSID 和 WEP 密钥一起加密，并且能定期自动更新用户认证功能和密钥的 TKIP。</p>
<p>WPA 有两种模式：个人模式和企业模式。</p>
<ul>
<li>个人模式的 WPA 主要是家庭和个人使用，也叫做 WPA-PSK，AP 和 STA 使用相同的预共享密钥（PSK）。</li>
<li>企业模式的 WPA 主要用于企业，增加了 IEEE 802.1X 认证服务器，不同的用户使用不同的用户名和密码连接无线网络。</li>
</ul>
<h2 id="WPA2"><a href="#WPA2" class="headerlink" title="WPA2"></a>WPA2</h2><p>WPA2 是新一代 WPA 标准，采用 AES 加密算法。AES 常用于 IPsec 和 SSL 等协议中，比 RC4 的安全性更高。AES 支持长度是 128 bit 、196 bit 、256 bit 的密钥，WPA2 使用其中的 128 bit 长度类型。WPA2 兼容上一代 WPA，支持 WPA2 的设备和只支持 WPA 的设备也能通信。AES 采用了类似 TKIP 的协议 CCMP，其中 CBC-MAC 是密码段连接&#x2F;消息认证码的意思。</p>
<p>AP 的加密设置可以选择 WPA-PSK（TKIP）、WPA-PSK（AES）、WPA2-PSK（TKIP）或 WPA2-PSK（AES）。</p>
<h2 id="WPA3"><a href="#WPA3" class="headerlink" title="WPA3"></a>WPA3</h2><p>2017 年 10 月，802.11 协议中沿用 13 年的 WPA2 加密被完全破解。2018 年 6 月 26 日，WiFi 联盟宣布 WPA3 协议已最终完成，这是 WiFi 连接的新标准。</p>
<p>WPA3 在 WPA2 的基础上增加了新的功能，以简化 WiFi 安全保障方法、实现更可靠的身份验证，提高数据加密强度。所有的 WPA3 网络都必须进行管理帧保护 PMF，保证数据的安全性。</p>
<p>根据 WiFi 网络的用途和安全需求的不同，WPA3 又分为 WPA3 个人版、WPA3 企业版，即 WPA3-SAE 和 WPA3-802.1X。WPA3 为不同网络提供了额外功能：WPA3 个人版增强了对密码安全的保护，而 WPA3 企业版的用户可以选择更高级的安全协议，保护敏感数据。</p>
<p>WPA3 个人版<br>对比 WPA2 个人版，WPA3 个人版能提供更可靠的基于密码的身份验证。这是由于 WPA3 个人版使用了更安全的协议：对等实体同时验证 SAE（<code>Simultaneous Authentication of Equals</code>）。SAE 取代了 WPA2 个人版的 PSK 认证方式，可以有效地抵御离线字典攻击，增加暴力破解的难度。SAE 能够提供前向保密，即使攻击者知道了网络中的密码，也不能解密获取到的流量，大大提升了 WPA3 个人网络的安全。WPA3 个人版只支持 AES 加密方式。</p>
<p>SAE 在 WPA&#x2F;WPA2-PSK 原有的四次握手前增加了 SAE 握手，实质上是为了动态协商成对主密钥 PMK。WPA&#x2F;WPA2-PSK 的 PMK 只与 SSID 和预共享密钥有关，而 SAE 引入了动态随机变量，每次协商的 PMK 都是不同的，提升了安全性。</p>
<p>WPA3 企业版</p>
<p>企业、政府和金融机构为了更高的安全性可以采用 WPA3 企业版。WPA3 企业版基于 WPA2 企业版，提供一种可选模式：WPA3-Enterprise 192bit ，这个模式的优点有：</p>
<p>数据保护：使用 192 位的 Suite-B 安全套件，增加密钥的长度。</p>
<p>密钥保护：使用 HMAC-SHA-384 在 4 次握手阶段导出密钥。</p>
<p>流量保护：使用伽罗瓦计数器模式协议 GCMP-256（ Galois Counter Mode Protocol ）保护用户上线后的无线流量。</p>
<p>管理帧保护：使用 GMAC-256（ GCMP 的伽罗瓦消息认证码，Galois Message Authentication Code ）保护组播管理帧。</p>
<p>WPA2 企业版支持多种 EAP 方式的身份验证，但是 WPA3 企业版仅支持 EAP-TLS 的方式。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/14.png" class="">

<h1 id="WLAN-的桥接"><a href="#WLAN-的桥接" class="headerlink" title="WLAN 的桥接"></a>WLAN 的桥接</h1><p>在无法布线的楼宇之间、在物理位置较远的站点之间，可以通过无线桥接进行无线连接。无线桥接是通过无线上连，有线下连的方式组网。</p>
<p>在通信距离较长时，需要使用定向天线来增强某个特定方向的电波强度。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/15.png" class="">

<h1 id="什么是无线中继？"><a href="#什么是无线中继？" class="headerlink" title="什么是无线中继？"></a>什么是无线中继？</h1><p>AP 上连无线接口当做 STA，连接其它 AP 释放的 SSID。AP 下连无线接口释放相同的 SSID，让 STA 接入，这就是无线中继。通过连接中继器，将 STA 收到的数据转发给拥有相同 SSID 的 AP，就能扩大无线网络的范围。一级中继器连接后，网络吞吐率会减半。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/16.png" class="">

<h1 id="无线网络的最大速率"><a href="#无线网络的最大速率" class="headerlink" title="无线网络的最大速率"></a>无线网络的最大速率</h1><p>无线网络和有线网络都是有理论的最大速率，比如：常见的以太网的 10Gbit&#x2F;s 和 WiFi 6 的 9.6Gbit&#x2F;s，这些是说在进行数据通信时，传输的极限速率。</p>
<p>由于无线网络中使用了 CSMA&#x2F;CA 的冲突回避协议，数据在发送时有等待的时间。因此，WiFi 6 的最大理论速率是 9.6Gbit&#x2F;s，实际使用时最大速度可能不到 80%。</p>
<h1 id="无线网络的速率跟距离有关吗？"><a href="#无线网络的速率跟距离有关吗？" class="headerlink" title="无线网络的速率跟距离有关吗？"></a>无线网络的速率跟距离有关吗？</h1><p>STA 能够进行通信的最大距离半径叫做覆盖范围。根据 STA 和 AP 的距离不同，最大速率也会不同，离 AP 越远，通信延迟越大，数据传输速率也越低。在没有障碍物时，无线网络的覆盖范围是同心圆的形状分布。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/17.png" class="">

<h1 id="WiFi-5"><a href="#WiFi-5" class="headerlink" title="WiFi 5"></a>WiFi 5</h1><p>WiFi 5 ，也就是 802.11ac 标准。对比 802.11n ，WiFi 5 主要有四个方面的提升：更宽的频宽绑定、更多的空间流、更先进的调制技术、更灵活的 MIMO 机制。</p>
<p>信道绑定：802.11n 引入了信道绑定技术，是把两个 20MHz 的信道捆绑在一起。而 WiFi 5 能够支持 160MHz 的信道，也就是绑定了 8 个信道。如果 802.11a&#x2F;b&#x2F;g 是单车道的话，而 802.11n 就是双车道，到来 WiFi 5 就达到八车道。</p>



<h1 id="WiFi-6"><a href="#WiFi-6" class="headerlink" title="WiFi 6"></a>WiFi 6</h1><p>WiFi 6，其实就是<code>802.11ax</code>标准。对比 WiFi 5，WiFi 6 的提升是更完整的频带覆盖、更高阶的调制方式、更全面的 MU-MIMO、引入 OFDMA 技术、新增 TWT 机制。</p>
<p>同时支持<code>2.4GHz</code>和<code>5GHz</code>频段：WiFi5 只支持 5G 频段，虽然 5G 的频段资源丰富，但穿透力差，在信号覆盖较弱。而 WiFi 6 同时支持<code>2.4GHz</code>和<code>5GHz</code>频段，<code>2.4G</code>信号覆盖效果更好，完整涵盖低速与高速设备。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/24.png" class="">

<p>高阶调试方式：WiFi 6 支持 1024-QAM，高于 WiFi 5 的 256-QAM，单载波承载的数据量可以达到 10bit，意味着更高的数据传输速率。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/25.png" class="">

<p>完整 MU-MIMO：WiFi 5 引入 MU-MIMO 功能，但是支持数据下载，上传数据时还是走得 SU-MIMO。而 WiFi6 是完整版的 MU-MIMO 功能，支持数据上行和下行。8 × 8 MU-MIMO，表示最多可以同时支持八个终端传输数据。虽然 AP 可以接入多个终端，但是没使用 MU-MIMO 技术之前，都是一个接着一个收发数据的，AP 每次只能和一个终端传输数据，只是时间间隔是毫秒级，我们无法感知而已。WiFi 6 就是真正意义上的八个终端同时传输数据了，适用于高密的无线网络场景。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/26.png" class="">

<p>OFDMA 技术：WiFi6 在在 OFDM 的基础上加入多址（即多用户）技术，从而演进成 OFDMA。实际上 OFDMA 将帧结构重新设计，细分成若干资源单元，为多个用户服务。</p>
<p>以 20MHz 信道为例，在 OFDM 方案（即 WiFi 4&#x2F;WiFi 5）里每一帧由 52 个数据子载波组成，但由于这一帧只为一个终端服务。传输的数据包太小时（像聊天记录）。空载的子载波也无法分配给其他终端。</p>
<p>而在 OFDMA 方案（即 WiFi 6）里每一帧由 234 个数据子载波组成，每 26 个子载波定义为一个 RU（资源单元），每个 RU 可以为一个终端服务，简单除一下，每一帧就可以被分成 9 份，最多可以同时为 9 个用户服务。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/27.png" class="">

<p>用卡车来货来解释这个技术最方便直观了。OFDM 技术是为每一个客户发一次货车。不管货物多少，来一单发一趟，这样不免就有货车空载的现象。而 OFDMA 技术会将多个订单合在一起发货，让卡车尽量满载上路，使得运输效率大大提升。</p>
<p>不但如此，WiFi6 下 OFDMA 和 MU-MIMO 的效果可以叠加。两者呈现出一种互补关系，OFDMA 适用于小数据包的并行传输提高信道利用率和传输效率。而 MU-MIMO 则适用于大数据包的并行传输，提高单用户的有效带宽，同样能减少时延。</p>
<p>TWT机制：WiFi 6 加入了 TWT 机制（<code>Target Wake Time</code>）。TWT 机制是专门针对类似智能家居这样的低速设备而设置的。例如配置 2.4GHz 频段、20MHz 频带的 WiFi 终端。AP 会自动生成一个数据交换用的唤醒时间，在网络数据传输不高的时段，依次唤醒这些低速设备进行数据交换，比如下载最新数据库、上传生成数据等操作。这样慢速设备不再长时间占用带宽，可以有效避免网络拥堵。这也是一种优化网络带宽利用率的技术手段。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/28.png" class="">

<p>WiFi 6 计算最大速率时，使用 160MHz 模式、1024-QAM 调制方式、800ns 的保护间隔时长，WiFi 6 单条流速率可达 1.2 Gbit&#x2F;s，八条流速率高达 9.6Gbit&#x2F;s。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/29.png" class="">
<h1 id="WLAN-的信道"><a href="#WLAN-的信道" class="headerlink" title="WLAN 的信道"></a>WLAN 的信道</h1><p>WLAN 标准中，使用<code>2.4GHz</code>和<code>5GHz</code>频带，各个频带都有多条信道。在设置 AP 时，为了防止干扰，需要把相同信道的 AP 隔离开来。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/30.png" class="">

<h2 id="2-4G-信道"><a href="#2-4G-信道" class="headerlink" title="2.4G 信道"></a>2.4G 信道</h2><p>WLAN 的 2.4G 信道频宽是<code>83.5MHz</code>，频率范围是<code>2.4~2.4835 GHz</code>，实际一共划分了 14 个信道，中国是使用前面的 13 个信道，信道编号是<code>1~13</code>。每个信道的有效宽度是<code>20 MHz</code>，另外还有<code>2MHz</code>的强制隔离频带，类似公路上的隔离带。对于中心频率是<code>2412MHz</code>的信道 1，频率范围是<code>2401~2423 MHz</code>。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/31.png" class="">

<p>但并不是说，只要选择数字不同的信道，就一定不会发生干扰。信道 1 使用的频率和 信道<code>2~5</code>是有一部分的重合，因此还是会发生干扰。这样看来，肯定不会发生干扰的信道组合是 1、6、11。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/32.png" class="">
<h2 id="5G-信道"><a href="#5G-信道" class="headerlink" title="5G 信道"></a>5G 信道</h2><p>WLAN 的 5G 信道频宽资源就丰富些，一共是<code>700MHz</code>的频宽，频率范围是<code>5.15~5.85 GHz</code>，中国一共有 13 个<code>20MHz</code>信道，信道编号是 36、40、44、48、52、56、60、64、149、153、157、161、165，并且所有信道都是互不干扰的，可以直接使用。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/33.png" class="">

<p>从<code>802.11n</code>开始，可以同时使用相邻的信道，组成<code>40MHz、80MHz、160MHz</code>的频宽进行数据传输。</p>
<img src="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/34.png" class="">

 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/WLAN/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2023/05/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/STP%E8%AF%A6%E8%A7%A3/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            (no title)
          
        </div>
      </a>
    
    
      <a href="/2023/05/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTPS/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title"></div>
      </a>
    
  </nav>

  
   
  
    
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2017-2023
        <i class="ri-heart-fill heart_icon"></i> WSQ
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="学海无涯"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>
 
<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>